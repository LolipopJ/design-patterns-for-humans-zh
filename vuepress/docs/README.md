::: tip
[æœ¬é¡¹ç›®](https://github.com/LolipopJ/design-patterns-for-humans-zh)ä»åœ¨æ¶¦è‰²è¿‡ç¨‹ä¸­
:::

<img :src="$withBase('/cover.png')" alt="çŒ®ç»™ä¸­æ–‡è¯»è€…çš„è®¾è®¡æ¨¡å¼æ•™ç¨‹ / Design Patterns for Humans ZH" />

***
<div align="center">
<p>
ğŸ‰ å¯¹è®¾è®¡æ¨¡å¼çš„è¶…ç®€å•è§£è¯»ï¼ ğŸ‰
</p>
<p>
è®¾è®¡æ¨¡å¼çš„è¯é¢˜ç»å¸¸å®³å¾—æˆ‘ä»¬å¿ƒç¥ä¸å®ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘å°†è¯•ç€ç”¨å°½å¯èƒ½ç®€å•çš„æ–¹å¼æ¥è§£é‡Šå®ƒä»¬ï¼Œè®©å®ƒä»¬æ·±æ·±åœ°åˆ»åœ¨æ‚¨ï¼ˆè¿˜æœ‰æˆ‘ï¼‰çš„è„‘æµ·é‡Œã€‚
</p>
<p>
æœ¬é¡¹ç›®åŸºäº <a href="https://github.com/kamranahmedse/design-patterns-for-humans">Design Patterns for Humans</a>ï¼Œæ¡ˆä¾‹çš„ JavaScript ä»£ç æ¥è‡ª <a href="https://github.com/sohamkamani/javascript-design-patterns-for-humans">JavaScript Design Patterns for Humans</a>ã€‚
</p>
</div>
***

è¯‘è€…åœ¨å­¦ä¹ çš„è¿‡ç¨‹ä¸­ï¼Œæƒ³è¦ä½¿ç”¨è‡ªå·±çš„è¯­è¨€é£æ ¼æ¥ç¿»è¯‘è¿™ç¯‡â€œç»™äººç±»å†™çš„â€è®¾è®¡æ¨¡å¼æ•™ç¨‹ã€‚å¥ˆä½•æ‰ç–å­¦æµ…ï¼Œå¦‚æœ‰è°¬è¯¯ï¼Œæ•¬è¯·æ–§æ­£ã€‚

å¦‚æœæ‚¨å–œæ¬¢è¿™ç¯‡æ•™ç¨‹ï¼Œä¸å¦¨çœ‹çœ‹é¡¹ç›®çš„åŸä½œè€…çš„[åšå®¢](http://sohamkamani.com)ï¼Œæˆ–æ˜¯åœ¨ [Twitter](https://twitter.com/sohamkamani) ä¸Šè·Ÿä»–æ‰“å£°æ‹›å‘¼ã€‚

# çŒ®ç»™ä¸­æ–‡è¯»è€…çš„è®¾è®¡æ¨¡å¼æ•™ç¨‹ / Design Patterns for Humans ZH

## ğŸš€ ä»‹ç» / Introduction

è®¾è®¡æ¨¡å¼æ˜¯ä¸º**è§£å†³æŸäº›æ™®éå­˜åœ¨çš„é—®é¢˜**æå‡ºçš„**æ–¹æ¡ˆä¸æŒ‡å¯¼åŸåˆ™**ã€‚å®ƒä»¬ä¸æ˜¯ç±»ï¼Œç¨‹åºåŒ…æˆ–åº“æ–‡ä»¶ï¼Œæ²¡æ³•ç›´æ¥æ”¾åˆ°æ‚¨çš„åº”ç”¨ç¨‹åºé‡Œç„¶åç­‰å¾…ç¥å¥‡çš„äº‹æƒ…å‘ç”Ÿã€‚ç¡®åˆ‡åœ°è¯´ï¼Œå®ƒä»¬æ˜¯ä¸€ç§æŒ‡å¯¼åŸåˆ™ï¼Œæ—¨åœ¨å‘Šè¯‰æ‚¨å¯ä»¥é€‰ç”¨æŸç§æ–¹æ³•ï¼Œæ¥è§£å†³æŸäº›é—®é¢˜ã€‚

> è®¾è®¡æ¨¡å¼æ˜¯ä¸ºè§£å†³æŸäº›æ™®éå­˜åœ¨çš„é—®é¢˜æå‡ºçš„æ–¹æ¡ˆä¸æŒ‡å¯¼åŸåˆ™ã€‚

ç»´åŸºç™¾ç§‘è¿™æ ·æè¿°å®ƒä»¬ï¼š

> åœ¨è½¯ä»¶å·¥ç¨‹é¢†åŸŸï¼Œè½¯ä»¶è®¾è®¡æ¨¡å¼æ˜¯ä¸ºè½¯ä»¶è®¾è®¡è¿‡ç¨‹ä¸­ï¼Œå¯¹ç»™å®šä¸Šä¸‹æ–‡æ™®éå­˜åœ¨çš„é—®é¢˜ï¼Œæ‰€æå‡ºçš„é€šç”¨ã€å¯é‡ç”¨çš„è§£å†³æ–¹æ¡ˆã€‚å®ƒä¸æ˜¯å®Œæ•´çš„è®¾è®¡å®ç°ï¼Œæ— æ³•ç›´æ¥è½¬è¯‘ä¸ºæºä»£ç æˆ–æœºå™¨ç ã€‚æ­£ç›¸åï¼Œå®ƒæ˜¯é¢å‘å¦‚ä½•è§£å†³é—®é¢˜çš„æè¿°æˆ–æ¨¡æ¿ï¼Œå¹¶å¯ä»¥åœ¨å¾ˆå¤šä¸åŒçš„æƒ…å†µä¸‹ä½¿ç”¨ã€‚

### âš ï¸ è¯·æ³¨æ„ / Be Careful

- è®¾è®¡æ¨¡å¼å¹¶ä¸æ˜¯è§£å†³æ‚¨æ‰€æœ‰é—®é¢˜çš„ä¸‡å…¨ä¹‹ç­–ã€‚
- ä¸è¦å¼ºè¿«å»ä½¿ç”¨å®ƒä»¬ï¼›å¦åˆ™å¾ˆå¯èƒ½å‘ç”Ÿä¸å¥½çš„äº‹æƒ…ã€‚
- è¯·è®°ä½ï¼Œè®¾è®¡æ¨¡å¼æ˜¯ä¸€ç§æŒ‡å¯¼æ–¹æ¡ˆï¼Œç”¨æ¥**è§£å†³**é—®é¢˜ï¼Œè€Œä¸æ˜¯**æ‰¾åˆ°**é—®é¢˜ï¼›æ‰€ä»¥ä¸è¦æƒ³å¤ªå¤šã€‚
- å¦‚æœåœ¨æ­£ç¡®çš„åœ°æ–¹ä»¥æ­£ç¡®çš„æ–¹å¼ä½¿ç”¨è®¾è®¡æ¨¡å¼ï¼Œå®ƒä»¬æˆ–è®¸èƒ½æˆä¸ºæ‚¨çš„å¾—åŠ›å¸®æ‰‹ï¼›å¦åˆ™å¯èƒ½å¯¼è‡´æ‚¨çš„ä»£ç æ··ä¹±ä¸å ªã€‚

### ğŸ¢ åœ¨å¼€å§‹ä¹‹å‰ / Before you start

- æ‰€æœ‰çš„è®¾è®¡æ¨¡å¼ç¤ºä¾‹éƒ½åŸºäº JavaScript çš„ [ES6](https://github.com/lukehoban/es6features) è§„èŒƒå®ç°ã€‚
- ç”±äº JavaScript ä¸­ä¸å­˜åœ¨å®ç°æ¥å£çš„è¯´æ³•ï¼Œå› æ­¤æˆ‘ä»¬åœ¨ä»£ç ç¤ºä¾‹ä¸­ä½¿ç”¨äº†éšå¼æ¥å£ï¼Œè¿™æ„å‘³ç€åªæœ‰ä¸€ä¸ªç±»å…·æœ‰ä¸€ä¸ªæ¥å£åº”å½“æœ‰çš„å±æ€§å’Œæ–¹æ³•ï¼Œè¿™ä¸ªç±»å°±è¢«è®¤ä¸ºå®ç°äº†è¿™ä¸ªæ¥å£ã€‚ä¸ºäº†è®©æ‚¨æ›´å®¹æ˜“åˆ†è¾¨å½“å‰æ­£åœ¨ä½¿ç”¨çš„æ¥å£ï¼Œæˆ‘ä»¬åœ¨æ¯ä¸ªç¤ºä¾‹ä¸­éƒ½æ·»åŠ äº†æ³¨é‡Šä¿¡æ¯ã€‚

## ğŸ—ï¸ åˆ›å»ºå‹è®¾è®¡æ¨¡å¼ / Creational Design Patterns

ç®€å•æ¥è¯´

> åˆ›å»ºå‹è®¾è®¡æ¨¡å¼å…³æ³¨å¦‚ä½•å®ä¾‹åŒ–ä¸€ä¸ªå¯¹è±¡ï¼Œæˆ–ä¸€ç»„ç›¸å…³çš„å¯¹è±¡ã€‚

ç»´åŸºç™¾ç§‘è¿™æ ·æè¿°

> åœ¨è½¯ä»¶å·¥ç¨‹é¢†åŸŸï¼Œåˆ›å»ºå‹è®¾è®¡æ¨¡å¼æ˜¯å¤„ç†å¯¹è±¡åˆ›å»ºæœºåˆ¶çš„è®¾è®¡æ¨¡å¼ï¼Œè¯•å›¾ä»¥ç¬¦åˆè¦æ±‚çš„æ–¹å¼æ¥åˆ›å»ºå¯¹è±¡ã€‚åˆ›å»ºå¯¹è±¡çš„åŸºç¡€æ–¹å¼å¯èƒ½å¯¼è‡´è®¾è®¡é—®é¢˜æˆ–å¢åŠ è®¾è®¡å¤æ‚åº¦ã€‚åˆ›å»ºå‹è®¾è®¡æ¨¡å¼é€šè¿‡ä»¥æŸç§æ–¹å¼æ§åˆ¶å¯¹è±¡åˆ›å»ºçš„è¿‡ç¨‹ï¼Œæ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚

### ğŸ  ç®€å•å·¥å‚æ¨¡å¼ / Simple Factory

ç°å®ç”Ÿæ´»ä¸­çš„ä¾‹å­

> æƒ³è±¡ï¼Œæ‚¨æ­£åœ¨ä¿®å»ºä¸€æ ‹æˆ¿å­ï¼Œä½†æ˜¯æ‚¨éœ€è¦é—¨ã€‚æ‚¨å¯ä»¥ç©¿ä¸Šæœ¨åŒ çš„è¡£æœï¼Œæ‹¿ä¸Šæœ¨å¤´ã€èƒ¶æ°´ã€é’‰å­ä»¥åŠæ‰€æœ‰éœ€è¦çš„å·¥å…·ï¼Œåœ¨æ‚¨çš„æˆ¿å­é‡Œäº²è‡ªåˆ¶ä½œè¿™ä¸ªé—¨ï¼›æˆ–è€…ï¼Œæ‚¨åªéœ€è¦æ‰“ä¸ªç”µè¯ç»™å·¥å‚ï¼Œè®©ä»–ä»¬æŠŠåˆ¶é€ å¥½çš„é—¨é€åˆ°æ‚¨èº«è¾¹ï¼Œè¿™æ ·æ‚¨ä¸å¿…äº†è§£ä»»ä½•å…³äºåˆ¶ä½œé—¨çš„çŸ¥è¯†ï¼Œä¹Ÿä¸å¿…å¤„ç†åˆ¶ä½œé—¨æ‰€å¸¦æ¥çš„éº»çƒ¦ã€‚

ç®€å•æ¥è¯´

> ç®€å•å·¥å‚åªæ˜¯ä¸ºå®¢æˆ·ç«¯ç”Ÿæˆä¸€ä¸ªå®ä¾‹ï¼Œè€Œä¸å‘å®¢æˆ·ç«¯æš´éœ²ä»»ä½•å®ä¾‹åŒ–æ“ä½œçš„é€»è¾‘ã€‚

ç»´åŸºç™¾ç§‘è¿™æ ·æè¿°

> åœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆOOPï¼‰ä¸­ï¼Œå·¥å‚æ˜¯ç”¨äºåˆ›å»ºå…¶å®ƒå¯¹è±¡çš„å¯¹è±¡â€”â€”æ›´å‡†ç¡®åœ°è¯´ï¼Œå·¥å‚æ˜¯ä¸€ä¸ªå‡½æ•°æˆ–æ–¹æ³•ï¼Œé€šè¿‡è°ƒç”¨å®ƒçš„æŸä¸ªæ–¹æ³•ï¼ˆå‡è®¾ä¸º "new"ï¼‰å¯ä»¥è¿”å›æ‹¥æœ‰ä¸åŒåŸå‹æˆ–ç±»çš„å¯¹è±¡ã€‚

**ç¼–ç¨‹ç¤ºä¾‹**

é¦–å…ˆï¼Œæˆ‘ä»¬å®šä¹‰äº†é—¨çš„æ¥å£å’Œå¹¶å®ç°äº†å®ƒ

```js
/**
 * Door interface
 * 
 * getWidth()
 * getHeight()
 */

class WoodenDoor {
  constructor(width, height){
    this.width = width
    this.height = height
  }

  getWidth(){
    return this.width
  }

  getHeight(){
    return this.height
  }
}
```

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åˆ›å»ºäº†åˆ¶é€ å¹¶è¿”å›é—¨çš„å·¥å‚

```js
const DoorFactory = {
  makeDoor : (width, height) => new WoodenDoor(width, height)
}
```

æœ€åï¼Œå¯ä»¥è¿™æ ·ä½¿ç”¨å·¥å‚

```js
// åˆ¶é€ ä¸€ä¸ª 100x200 çš„é—¨ç»™æˆ‘
const door = DoorFactory.makeDoor(100, 200)

console.log('Width:', door.getWidth())
console.log('Height:', door.getHeight())

// åˆ¶é€ ä¸€ä¸ª 50x100 çš„é—¨ç»™æˆ‘
const door = DoorFactory.makeDoor(50, 100)
```

**ä»€ä¹ˆæ—¶å€™ä½¿ç”¨ï¼Ÿ**

å½“åˆ›å»ºä¸€ä¸ªå¯¹è±¡ä¸ä»…ä»…æ˜¯èµ‹å€¼æ“ä½œï¼Œè€Œæ˜¯ä¼šæ¶‰åŠåˆ°ä¸€äº›é€»è¾‘è¿‡ç¨‹æ—¶ï¼ŒæŠŠå®ƒæ”¾åˆ°ä¸€ä¸ªä¸“ç”¨çš„å·¥å‚ä¸­ï¼ˆè€Œä¸æ˜¯åœ¨æ¯ä¸ªåœ°æ–¹ç¼–å†™é‡å¤çš„ä»£ç ï¼‰æ˜¯å¾ˆæœ‰æ„ä¹‰çš„ã€‚

### ğŸ­ å·¥å‚æ–¹æ³•æ¨¡å¼ / Factory Method

ç°å®ç”Ÿæ´»ä¸­çš„ä¾‹å­

> ä»¥æ‹›è˜ç»ç†ä¸ºä¾‹ã€‚ä¸€ä¸ªäººä¸å¯èƒ½é¢è¯•æ‰€æœ‰çš„èŒä½ã€‚æ ¹æ®èŒä½ç©ºç¼ºæƒ…å†µï¼Œå¥¹å¿…é¡»å†³å®šé¢è¯•çš„æ­¥éª¤ï¼Œå¹¶å°†é¢è¯•å§”æ´¾ç»™å…¶ä»–é¢è¯•å®˜ã€‚

ç®€å•æ¥è¯´

> å·¥å‚æ–¹æ³•æ¨¡å¼æä¾›äº†ä¸€ç§å°†å®ä¾‹åŒ–çš„é€»è¾‘åˆ†æ´¾ç»™å­ç±»çš„æ–¹æ³•ã€‚

ç»´åŸºç™¾ç§‘è¿™æ ·æè¿°

> åœ¨åŸºäºç±»çš„ç¼–ç¨‹ä¸­ï¼Œå·¥å‚æ–¹æ³•æ¨¡å¼æ˜¯ä¸€ç§åˆ›å»ºå‹æ¨¡å¼ï¼Œå®ƒä½¿ç”¨å·¥å‚æ–¹æ³•æ¥å¤„ç†åˆ›å»ºå¯¹è±¡çš„é—®é¢˜ï¼Œè€Œä¸å¿…æŒ‡å®šå°†è¦åˆ›å»ºçš„å¯¹è±¡æ‰€åŸºäºçš„å…·ä½“ç±»ã€‚è¿™æ˜¯é€šè¿‡è°ƒç”¨å·¥å‚æ–¹æ³•æ¥åˆ›å»ºå¯¹è±¡æ‰€å®ç°çš„â€”â€”è¦ä¹ˆåœ¨æ¥å£ä¸­æŒ‡å®šå¹¶ç”±å­ç±»å®ç°ï¼Œè¦ä¹ˆåœ¨åŸºç±»ä¸­å®ç°å¹¶å¯é€‰åœ°ç”±æ´¾ç”Ÿç±»è¦†ç›–â€”â€”è€Œä¸æ˜¯é€šè¿‡è°ƒç”¨æ„é€ å‡½æ•°å®ç°ã€‚

**ç¼–ç¨‹ç¤ºä¾‹**

ä»¥ä¸Šé¢çš„æ‹›è˜ç»ç†ä¸ºä¾‹ã€‚é¦–å…ˆæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªé¢è¯•å®˜æ¥å£å’Œå®ƒçš„ä¸€äº›å®ç°

```js
/**
 * Interviewer interface
 *
 * askQuestions()
 */

class Developer {
  askQuestions() {
    console.log('æå‡ºè®¾è®¡æ¨¡å¼é—®é¢˜ï¼')
  }
}

class CommunityExecutive {
  askQuestions() {
    console.log('æå‡ºç¤¾åŒºå»ºè®¾é—®é¢˜ï¼')
  }
}
```

ç°åœ¨è®©æˆ‘ä»¬ç¼–å†™æˆ‘ä»¬çš„ `HiringManager`ï¼ˆæ‹›è˜ç»ç†ï¼‰

```js
class HiringManager {
    takeInterview() {
        const interviewer = this.makeInterviewer()
        interviewer.askQuestions()
    }
}
```

ç°åœ¨æ‰€æœ‰çš„å­ç±»éƒ½å¯ä»¥ç»§æ‰¿å®ƒå¹¶æä¾›éœ€è¦çš„é¢è¯•å®˜

```js
class DevelopmentManager extends HiringManager {
    makeInterviewer() {
        return new Developer()
    }
}

class MarketingManager extends HiringManager {
    makeInterviewer() {
        return new CommunityExecutive()
    }
}
```

æœ€åï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·ä½¿ç”¨å®ƒ

```js
const devManager = new DevelopmentManager()
devManager.takeInterview() // è¾“å‡ºï¼šæå‡ºè®¾è®¡æ¨¡å¼é—®é¢˜ï¼

const marketingManager = new MarketingManager()
marketingManager.takeInterview() // è¾“å‡ºï¼šæå‡ºç¤¾åŒºå»ºè®¾é—®é¢˜ï¼
```

**ä»€ä¹ˆæ—¶å€™ä½¿ç”¨ï¼Ÿ**

å½“ç±»ä¸­å­˜åœ¨ä¸€äº›é€šç”¨çš„å¤„ç†è¿‡ç¨‹ï¼Œä½†éœ€è¦çš„å­ç±»åœ¨è¿è¡Œæ—¶åŠ¨æ€å†³å®šæ—¶ï¼Œå·¥å‚æ–¹æ³•æ¨¡å¼éå¸¸æœ‰ç”¨ã€‚æ¢å¥è¯è¯´ï¼Œå½“å®¢æˆ·ç«¯ä¸çŸ¥é“å®ƒå¯èƒ½éœ€è¦ä»€ä¹ˆå…·ä½“çš„å­ç±»æ—¶ã€‚

### ğŸ”¨ æŠ½è±¡å·¥å‚æ¨¡å¼ / Abstract Factory

ç°å®ç”Ÿæ´»ä¸­çš„ä¾‹å­

> ç°åœ¨è®©æˆ‘ä»¬æ‹“å±•ç®€å•å·¥å‚æ¨¡å¼é‡Œé—¨çš„ä¾‹å­ã€‚æ ¹æ®æ‚¨çš„éœ€è¦ï¼Œæ‚¨å¯èƒ½ä¼šä»æœ¨é—¨åº—ä¹°åˆ°æœ¨é—¨ï¼Œä»é“é—¨åº—ä¹°åˆ°é“é—¨ï¼Œæˆ–æ˜¯ä»ç›¸åº”çš„å•†åº—ä¹°åˆ°å¡‘æ–™é—¨ã€‚æ­¤å¤–ï¼Œæ‚¨å¯èƒ½éœ€è¦æœ‰ç€ä¸åŒä¸“ä¸šèƒ½åŠ›çš„å¸ˆå‚…æ¥å®‰è£…è¿™äº›é—¨ï¼Œæ¯”å¦‚è®©æœ¨åŒ å®‰è£…æœ¨é—¨ï¼Œè®©ç„Šå·¥å®‰è£…é“é—¨ç­‰ç­‰ã€‚æ­£å¦‚æ‚¨æ‰€çœ‹åˆ°çš„ï¼Œç°åœ¨é—¨ï¼ˆä¸äººï¼‰ä¹‹é—´æœ‰ä¸€ç§ä¾èµ–å…³ç³»ï¼Œæœ¨é—¨éœ€è¦æœ¨åŒ ï¼Œé“é—¨éœ€è¦ç„Šå·¥ç­‰ç­‰ã€‚

ç®€å•æ¥è¯´

> å·¥å‚çš„å·¥å‚ï¼›ä¸€ä¸ªå·¥å‚ï¼Œå®ƒå°†ç‹¬ç«‹ä½†æ˜¯ç›¸å…³ï¼ˆæˆ–äº’ç›¸ä¾èµ–ï¼‰çš„å·¥å‚ç»„æˆä¸€ç»„ï¼Œè€Œä¸ç”¨æŒ‡å®šè¿™äº›å·¥å‚çš„å…·ä½“ç±»ã€‚

ç»´åŸºç™¾ç§‘è¿™æ ·æè¿°

> æŠ½è±¡å·¥å‚æ¨¡å¼æä¾›äº†ä¸€ç§å°è£…ä¸€ç»„å…·æœ‰å…±åŒä¸»é¢˜çš„ç‹¬ç«‹å·¥å‚çš„æ–¹æ³•ï¼Œè€Œä¸å¿…æŒ‡å®šå®ƒä»¬çš„å…·ä½“ç±»ã€‚

**ç¼–ç¨‹ç¤ºä¾‹**

æ ¹æ®ä¸Šé¢é—¨çš„ä¾‹å­ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬å®šä¹‰äº† `Door`ï¼ˆé—¨ï¼‰æ¥å£å’Œå®ƒçš„ä¸€äº›å®ç°

```js
/**
 * Door interface :
 *
 * getDescription()
 */

class WoodenDoor {
    getDescription() {
        console.log('æˆ‘æ˜¯ä¸€ä¸ªæœ¨é—¨')
    }
}

class IronDoor {
    getDescription() {
        console.log('æˆ‘æ˜¯ä¸€ä¸ªé“é—¨')
    }
}
```

æ¥ç€æˆ‘ä»¬ä¸ºæ¯ä¸€ç§ç±»å‹çš„é—¨å®šä¹‰äº†å®‰è£…å¸ˆå‚…

```js
/**
 * DoorFittingExpert interface :
 *
 * getDescription()
 */

class Welder {
    getDescription() {
        console.log('æˆ‘åªèƒ½å®‰è£…æœ¨é—¨')
    }
}

class Carpenter {
    getDescription() {
        console.log('æˆ‘åªèƒ½å®‰è£…é“é—¨')
    }
}
```

ç°åœ¨æˆ‘ä»¬æœ‰äº†æŠ½è±¡å·¥å‚ï¼Œå®ƒå…è®¸æˆ‘ä»¬åˆ›å»ºä¸€ç³»åˆ—ç›¸å…³è”çš„å¯¹è±¡ï¼Œå³æœ¨é—¨å·¥å‚èƒ½å¤Ÿåˆ¶é€ æœ¨é—¨å’Œæä¾›æœ¨é—¨å®‰è£…å¸ˆå‚…ï¼Œè€Œé“é—¨å·¥å‚èƒ½å¤Ÿåˆ¶é€ é“é—¨å’Œæä¾›é“é—¨å®‰è£…å¸ˆå‚…ã€‚

```js
/**
 * DoorFactory interface :
 *
 * makeDoor()
 * makeFittingExpert()
 */

// è¿”å›æœ¨åŒ å’Œæœ¨é—¨çš„æœ¨é—¨å·¥å‚
class WoodenDoorFactory {
    makeDoor(){
        return new WoodenDoor()
    }

    makeFittingExpert() {
        return new Carpenter()
    }
}

// è·å¾—é“é—¨å’Œç›¸åº”å®‰è£…å¸ˆå‚…çš„é“é—¨å·¥å‚
class IronDoorFactory {
    makeDoor(){
        return new IronDoor()
    }

    makeFittingExpert() {
        return new Welder()
    }
}
```

æœ€åæˆ‘ä»¬å¯ä»¥è¿™æ ·ä½¿ç”¨å®ƒ

```js
woodenFactory = new WoodenDoorFactory()

door = woodenFactory.makeDoor()
expert = woodenFactory.makeFittingExpert()

door.getDescription()  // è¾“å‡ºï¼šæˆ‘æ˜¯ä¸€ä¸ªæœ¨é—¨
expert.getDescription() // è¾“å‡ºï¼šæˆ‘åªèƒ½å®‰è£…æœ¨é—¨

// é“é—¨å·¥å‚å’Œä¸Šé¢ä¸€æ ·
ironFactory = new IronDoorFactory()

door = ironFactory.makeDoor()
expert = ironFactory.makeFittingExpert()

door.getDescription()  // è¾“å‡ºï¼šæˆ‘æ˜¯ä¸€ä¸ªé“é—¨
expert.getDescription() // è¾“å‡ºï¼šæˆ‘åªèƒ½å®‰è£…é“é—¨
```

æ­£å¦‚æ‚¨çœ‹åˆ°çš„ï¼Œæœ¨é—¨å·¥å‚å·²ç»å°è£…äº† `carpenter`ï¼ˆæœ¨åŒ ï¼‰å’Œ `wooden door`ï¼ˆæœ¨é—¨ï¼‰ï¼Œé“é—¨å·¥å‚å·²ç»å°è£…äº† `iron door`ï¼ˆé“é—¨ï¼‰å’Œ `welder`ï¼ˆç„Šå·¥ï¼‰ã€‚å› æ­¤ï¼Œå®ƒç¡®ä¿äº†å¯¹äºæ¯ä¸€ä¸ªåˆ¶é€ å‡ºæ¥çš„é—¨ï¼Œæˆ‘ä»¬éƒ½èƒ½å¾—åˆ°æ­£ç¡®çš„å®‰è£…å¸ˆå‚…ã€‚

**ä»€ä¹ˆæ—¶å€™ä½¿ç”¨ï¼Ÿ**

å½“å¯¹è±¡ä¹‹é—´å­˜åœ¨ç›¸äº’ä¾èµ–çš„å…³ç³»ï¼Œæ¶‰åŠçš„åˆ›å»ºé€»è¾‘å¹¶ä¸é‚£ä¹ˆç®€å•æ—¶ã€‚

### ğŸ‘· ç”Ÿæˆå™¨æ¨¡å¼ / Builder

è¯‘æ³¨ï¼šåˆå**å»ºé€ æ¨¡å¼**ã€‚

ç°å®ç”Ÿæ´»ä¸­çš„ä¾‹å­

> æƒ³è±¡æ‚¨åœ¨å“ˆå¸æ–¯æ±‰å ¡åº—é‡Œï¼Œç‚¹äº†ä¸€ä»½â€œå¤§å“ˆè¿ªæ±‰å ¡â€ï¼Œæ¥ç€åº—å‘˜å°±æŠŠæ±‰å ¡é€’ç»™ä½ ï¼Œ*æ¯«æ— ç–‘é—®* è¿™æ˜¯ä¸€ä¸ªç®€å•å·¥å‚çš„ä¾‹å­ã€‚ä½†æ˜¯åœ¨ä¸€äº›æƒ…å†µä¸‹æ±‰å ¡çš„åˆ¶ä½œå¯èƒ½ä¼šåŒ…æ‹¬æ›´å¤šçš„æ­¥éª¤é€»è¾‘ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œæ‚¨æƒ³è¦ä¸€ä»½å®šåˆ¶çš„æ±‰å ¡ï¼Œå…³äºæ±‰å ¡çš„åˆ¶ä½œæ‚¨æœ‰å¾ˆå¤šé€‰é¡¹ï¼šæƒ³è¦ä»€ä¹ˆé¢åŒ…ï¼Ÿå–œæ¬¢å“ªæ¬¾é…±æ±ï¼Ÿæƒ³åƒå“ªç§å¥¶é…ªï¼Ÿè¯¸å¦‚æ­¤ç±»ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå°±éœ€è¦ç”¨åˆ°ç”Ÿæˆå™¨æ¨¡å¼äº†ã€‚

ç®€å•æ¥è¯´

> ç”Ÿæˆå™¨æ¨¡å¼å…è®¸æ‚¨åˆ›å»ºä¸åŒé£æ ¼çš„å¯¹è±¡ï¼ŒåŒæ—¶é¿å…æ±¡æŸ“æ„é€ å‡½æ•°ã€‚å½“ä¸€ä¸ªå¯¹è±¡å¯èƒ½å­˜åœ¨å¤šç§é£æ ¼æ—¶ï¼Œæˆ–è€…å½“ä¸€ä¸ªå¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹åŒ…å«å¾ˆå¤šæ­¥éª¤æ—¶ï¼Œç”Ÿæˆå™¨æ¨¡å¼éå¸¸æœ‰ç”¨ã€‚

ç»´åŸºç™¾ç§‘è¿™æ ·æè¿°

> ç”Ÿæˆå™¨æ¨¡å¼æ˜¯ä¸€ç§åˆ›å»ºå‹è½¯ä»¶è®¾è®¡æ¨¡å¼ï¼Œæ—¨åœ¨æ‰¾å‡ºé‡å æ„é€ å‡½æ•°åé¢æ¨¡å¼ï¼ˆTelescopic Constructor Anti-patternï¼‰çš„ä¸€ä¸ªè§£å†³æ–¹æ¡ˆã€‚

æ—¢ç„¶å·²ç»æåˆ°ï¼Œé‚£ä¹ˆè¯·å…è®¸æˆ‘è¡¥å……ä¸€ä¸‹ä»€ä¹ˆæ˜¯é‡å æ„é€ å‡½æ•°åé¢æ¨¡å¼ã€‚åœ¨æŸä¸€æ—¶åˆ»æˆ‘ä»¬éƒ½çœ‹åˆ°äº†è¿™æ ·ä¸€ä¸ªæ„é€ å‡½æ•°ï¼š

```js
constructor(size, cheese = true, pepperoni = true, tomato = false, lettuce = true) {
    // ... 
}
```

æ­£å¦‚æ‚¨æ‰€çœ‹è§çš„ï¼Œæ„é€ å‡½æ•°çš„å‚æ•°æ•°é‡å¾ˆå¿«å°±ä¼šå¤±æ§ï¼Œç†è§£å‚æ•°çš„å«ä¹‰ä¹Ÿå¯èƒ½å› æ­¤å˜å¾—å›°éš¾ã€‚æ­¤å¤–ï¼Œå¦‚æœåœ¨ä»¥åæ‚¨è¿˜æƒ³æ·»åŠ æ›´å¤šçš„æ„é€ é€‰é¡¹ï¼Œå®ƒçš„å‚æ•°åˆ—è¡¨è¿˜ä¼šç»§ç»­å¢é•¿ã€‚è¿™å°±è¢«ç§°ä½œé‡å æ„é€ å‡½æ•°åé¢æ¨¡å¼ã€‚

**ç¼–ç¨‹ç¤ºä¾‹**

æ˜æ™ºçš„é€‰æ‹©æ˜¯ä½¿ç”¨ç”Ÿæˆå™¨æ¨¡å¼ã€‚é¦–å…ˆæˆ‘ä»¬å®šä¹‰æˆ‘ä»¬æƒ³è¦åˆ¶ä½œçš„æ±‰å ¡

```js
class Burger {
    constructor(builder) {
        this.size = builder.size
        this.cheeze = builder.cheeze || false
        this.pepperoni = builder.pepperoni || false
        this.lettuce = builder.lettuce || false
        this.tomato = builder.tomato || false
    }
}
```

æ¥ç€æˆ‘ä»¬ç¼–å†™äº†ç”Ÿæˆå™¨

```js
class BurgerBuilder {
    constructor(size) {
        this.size = size
    }

    addPepperoni() {
        this.pepperoni = true
        return this
    }

    addLettuce() {
        this.lettuce = true
        return this
    }

    addCheeze() {
        this.cheeze = true
        return this
    }

    addTomato() {
        this.tomato = true
        return this
    }

    build() {
        return new Burger(this)
    }
}
```

æœ€åå¯ä»¥è¿™æ ·ä½¿ç”¨å®ƒ

```js
const burger = (new BurgerBuilder(14))
    .addPepperoni()
    .addLettuce()
    .addTomato()
    .build()
```

**JavaScript ç‰ˆæœ¬ç‰¹åˆ«æç¤º**ï¼šå½“æ‚¨å‘ç°ä¸€ä¸ªå‡½æ•°æˆ–æ–¹æ³•çš„å‚æ•°å¤ªå¤šï¼ˆä¸€èˆ¬è¶…è¿‡ 2 ä¸ªå‚æ•°éƒ½è¢«è®¤ä¸ºæ˜¯å¤ªå¤šï¼‰æ—¶ï¼Œåº”å½“ä½¿ç”¨ä¸€ä¸ªå¯¹è±¡å‚æ•°ï¼Œæ¥å–ä»£å¤šä¸ªå‚æ•°ã€‚ç†ç”±æœ‰äºŒï¼š

1. å®ƒå¯ä»¥è®©æ‚¨çš„ä»£ç çœ‹ä¸Šå»æ›´æ•´æ´ï¼Œå› ä¸ºåªæœ‰ä¸€ä¸ªå‚æ•°ã€‚
2. æ‚¨ä¸éœ€è¦æ‹…å¿ƒå‚æ•°çš„é¡ºåºï¼Œå› ä¸ºå‚æ•°å°†æ ¹æ®å¯¹è±¡çš„å‘½åå±æ€§ä¼ é€’ã€‚

ä¸¾ä¸ªä¾‹å­ï¼Œåº”å½“ä½¿ç”¨ï¼š

```js
const burger = new Burger({
    size : 14,
    pepperoni : true,
    cheeze : false,
    lettuce : true,
    tomato : true
})
```

æ¥å–ä»£ï¼š

```js
const burger = new Burger(14, true, false, true, true)
```

**ä»€ä¹ˆæ—¶å€™ä½¿ç”¨ï¼Ÿ**

å½“ä¸€ä¸ªå¯¹è±¡å¯èƒ½æœ‰å¤šç§é£æ ¼ï¼Œå¹¶æƒ³è¦é¿å…é‡å æ„é€ å‡½æ•°æ—¶ã€‚ä¸å·¥å‚æ¨¡å¼çš„å…³é”®åŒºåˆ«æ˜¯ï¼Œå½“åˆ›å»ºå¯¹è±¡è¿‡ç¨‹åªæœ‰ä¸€ä¸ªæ­¥éª¤æ—¶ï¼Œåº”ä½¿ç”¨å·¥å‚æ¨¡å¼ï¼›å½“åˆ›å»ºå¯¹è±¡è¿‡ç¨‹å­˜åœ¨å¤šä¸ªæ­¥éª¤æ—¶ï¼Œåº”ä½¿ç”¨ç”Ÿæˆå™¨æ¨¡å¼ã€‚

### ğŸ‘ åŸå‹æ¨¡å¼ / Prototype

ç°å®ç”Ÿæ´»ä¸­çš„ä¾‹å­

> è¿˜è®°å¾—é‚£åªè¢«å…‹éš†çš„ç¾Šâ€”â€”å¤šè‰å—ï¼Ÿè®©æˆ‘ä»¬èŠèŠå…‹éš†è¿™ä»¶äº‹å„¿ï¼Œå½“ç„¶ï¼Œä¸è°ˆç»†èŠ‚ï¼Œåªè°ˆå®ƒçš„æ ¸å¿ƒæ€æƒ³ã€‚

ç®€å•æ¥è¯´

> åŸºäºå·²å­˜åœ¨çš„å¯¹è±¡ï¼Œé€šè¿‡å…‹éš†åˆ›å»ºæ–°çš„å¯¹è±¡ã€‚

ç»´åŸºç™¾ç§‘è¿™æ ·æè¿°

> åœ¨è½¯ä»¶å¼€å‘é¢†åŸŸï¼ŒåŸå‹æ¨¡å¼æ˜¯ä¸€ç§åˆ›å»ºå‹è®¾è®¡æ¨¡å¼ã€‚å½“åˆ›å»ºçš„å¯¹è±¡ç±»å‹ç”±ä¸€ä¸ªåŸå‹å®ä¾‹ç¡®å®šæ—¶ï¼Œä½¿ç”¨åŸå‹æ¨¡å¼ï¼Œè¿™ä¸ªåŸå‹å®ä¾‹å°†è¢«å…‹éš†æ¥ç”Ÿæˆæ–°çš„å¯¹è±¡ã€‚

ç®€è€Œè¨€ä¹‹ï¼ŒåŸå‹æ¨¡å¼å…è®¸æ‚¨åˆ›å»ºå·²å­˜åœ¨å¯¹è±¡çš„å‰¯æœ¬ï¼Œå¹¶æ ¹æ®æ‚¨çš„éœ€è¦ä¿®æ”¹è¿™ä¸ªå‰¯æœ¬ï¼Œè€Œä¸ç”¨ç»å†ä»å¤´å¼€å§‹åˆ›å»ºæ–°çš„å¯¹è±¡å¹¶é…ç½®æ•´ä¸ªå¯¹è±¡çš„éº»çƒ¦ã€‚

**ç¼–ç¨‹ç¤ºä¾‹**

é¦–å…ˆæˆ‘ä»¬å®šä¹‰äº†æˆ‘ä»¬æƒ³è¦å…‹éš†çš„ç¾Š

```js
class Sheep {
    constructor(name, category = "å±±ç¾Š") {
        this.name = name;
        this.category = category;
    }
    setName(name) {
        this.name = name;
    }
    getName() {
        console.log(this.name);
    }
    setCategory(category) {
        this.category = category;
    }
    getCategory() {
        console.log(this.category);
    }
}
```

ç°åœ¨æˆ‘ä»¬æœ‰äº†ä¸€ä¸ªç¾ŠåŸå‹ï¼ˆSheepPrototypeï¼‰çš„ç±»ï¼Œå®ƒå°†å…‹éš†ç»™å®šäº†åŸå‹çš„å¯¹è±¡ã€‚å®ƒçš„æ„é€ å‡½æ•°æ¥å—ç±»å‹ä¸ºç¾Šçš„åŸå‹

```js
class SheepPrototype {
    constructor(proto) {
        this.proto = proto;
    }
    clone() {
        return new Sheep(this.proto.name, this.proto.category);
    }
}
```

æœ€åæˆ‘ä»¬å¯ä»¥è¿™æ ·ä½¿ç”¨å®ƒ

```js
const originalSheep = new Sheep("Jolly");
originalSheep.getName(); // Jolly
originalSheep.getCategory(); // å±±ç¾Š
// å…‹éš†å¹¶æ ¹æ®éœ€è¦ä¿®æ”¹
const prototype = new SheepPrototype(originalSheep);
const clonedSheep = prototype.clone();
clonedSheep.setName("Dolly");
clonedSheep.getName(); // Dolly
clonedSheep.getCategory(); // å±±ç¾Š
```

**JavaScript ç‰ˆæœ¬ç‰¹åˆ«æç¤º**ï¼šæ­¤ç¼–ç¨‹ç¤ºä¾‹æ˜¯åŸå‹æ¨¡å¼çš„ç»å…¸å®ç°ï¼Œä½†æ˜¯ JavaScript èƒ½å¤Ÿä½¿ç”¨[å†…å»ºåŸå‹å·¥å…·](https://developer.mozilla.org/zh-CN/docs/Learn/JavaScript/Objects/Object_prototypes)æ›´æœ‰æ•ˆåœ°å®ç°åŸå‹æ¨¡å¼ã€‚

**ä»€ä¹ˆæ—¶å€™ä½¿ç”¨ï¼Ÿ**

å½“éœ€è¦çš„å¯¹è±¡ä¸ç°æœ‰çš„å¯¹è±¡å¾ˆç›¸ä¼¼æ—¶ï¼›æˆ–ä¸å…‹éš†çš„æ–¹å¼ç›¸æ¯”ï¼Œç›´æ¥åˆ›å»ºå¯¹è±¡çš„æˆæœ¬æ›´é«˜æ—¶ã€‚

### ğŸ’ å•ä¾‹æ¨¡å¼ / Singleton

ç°å®ç”Ÿæ´»ä¸­çš„ä¾‹å­

> åœ¨ä¸€ä¸ªå›½å®¶é‡ŒåŒæ—¶åªèƒ½æœ‰ä¸€ä½æ€»ç»Ÿã€‚å½“èŒè´£éœ€è¦æ—¶ï¼Œè¿™ä½æ€»ç»Ÿå°±å¿…é¡»é‡‡å–è¡ŒåŠ¨ã€‚è¿™é‡Œçš„æ€»ç»Ÿå³æ˜¯å•ä¾‹ã€‚

ç®€å•æ¥è¯´

> ç¡®ä¿åªåˆ›å»ºäº†ç‰¹å®šç±»çš„å”¯ä¸€å¯¹è±¡ã€‚

ç»´åŸºç™¾ç§‘è¿™æ ·æè¿°

> åœ¨è½¯ä»¶å·¥ç¨‹é¢†åŸŸï¼Œå•ä¾‹æ¨¡å¼æ˜¯ä¸€ç§è½¯ä»¶è®¾è®¡æ¨¡å¼ï¼Œå®ƒå°†ç±»çš„å®ä¾‹åŒ–é™åˆ¶ä¸ºä¸€ä¸ªå¯¹è±¡ã€‚å½“åªéœ€è¦ä¸€ä¸ªå¯¹è±¡æ¥ååŠ©æ•´ä¸ªç³»ç»Ÿçš„è¿è¡Œæ—¶ï¼Œå•ä¾‹æ¨¡å¼å¾ˆæœ‰å¸®åŠ©ã€‚

å®é™…ä¸Šï¼Œå•ä¾‹æ¨¡å¼è¢«è®¤ä¸ºæ˜¯ä¸€ç§åé¢æ¨¡å¼ï¼ˆAnti-patternï¼‰ï¼Œåº”å½“é¿å…è¿‡åº¦ä½¿ç”¨å®ƒã€‚å•ä¾‹æ¨¡å¼ä¸ä¸€å®šæ€»æ˜¯ä¸å¥½çš„ï¼Œä¹Ÿèƒ½å¤Ÿæœ‰ä¸€äº›æœ‰æ•ˆçš„ç”¨ä¾‹ï¼Œä½†ä»åº”å½“è°¨æ…ä½¿ç”¨å®ƒï¼Œå› ä¸ºå®ƒä¼šåœ¨æ‚¨çš„åº”ç”¨ä¸­å¼•å…¥å…¨å±€çŠ¶æ€ï¼Œåœ¨ä¸€ä¸ªåœ°æ–¹å¯¹å®ƒçš„ä¿®æ”¹å¯èƒ½ä¼šå½±å“åˆ°å…¶å®ƒåœ°æ–¹ï¼Œå¹¶ä¸”è°ƒè¯•èµ·æ¥å¯èƒ½ä¼šå˜å¾—éå¸¸å›°éš¾ã€‚ä½¿ç”¨å•ä¾‹æ¨¡å¼çš„å¦ä¸€ä¸ªåå¤„æ˜¯ï¼Œå®ƒä¼šä½¿æ‚¨çš„ä»£ç ç´§å¯†è€¦åˆï¼Œæ­¤å¤–æ¨¡æ‹Ÿï¼ˆMockï¼Œè¯‘è€…æ³¨ï¼šåœ¨å•å…ƒæµ‹è¯•ä¸­ï¼Œå¸¸ç”¨ Mock çš„æ–¹æ³•æ¥æ¨¡æ‹Ÿæ„é€ ä¸€äº›å¤æ‚æˆ–ä¸å®¹æ˜“è·å–çš„å¯¹è±¡ï¼‰å•ä¾‹å¯èƒ½ä¼šå¾ˆå›°éš¾ã€‚

**ç¼–ç¨‹ç¤ºä¾‹**

åœ¨ JavaScript ä¸­ï¼Œå•ä¾‹å¯ä»¥ä½¿ç”¨æ¨¡å—æ¨¡å¼å®ç°ã€‚ç§æœ‰å˜é‡å’Œæ–¹æ³•éšè—åœ¨å‡½æ•°é—­åŒ…ä¸­ï¼Œè€Œå…¬æœ‰æ–¹æ³•é€‰æ‹©åœ°æš´éœ²å‡ºå»ã€‚

```js
const president = (function(){
    const presidentsPrivateInformation = 'Super private'

    const name = 'Turd Sandwich'

    const getName = () => name

    return {
        getName
    }
}())
```

åœ¨è¿™é‡Œï¼Œ`presidentsPrivateInformation` å’Œ `name` ä¸ºç§æœ‰å˜é‡ã€‚ä½†æ˜¯ï¼Œ`name` å¯ä»¥é€šè¿‡å¯¹å¤–æš´éœ²çš„ `president.getName` æ–¹æ³•è®¿é—®åˆ°ã€‚

```js
president.getName() // è¾“å‡ºï¼š'Turd Sandwich'
president.name // è¾“å‡ºï¼šundefined
president.presidentsPrivateInformation // è¾“å‡ºï¼šundefined
```

## ğŸ”© ç»“æ„å‹è®¾è®¡æ¨¡å¼ / Structural Design Patterns

ç®€å•æ¥è¯´

> ç»“æ„å‹è®¾è®¡æ¨¡å¼ä¸»è¦å…³æ³¨å¯¹è±¡çš„ç»„æˆï¼Œæˆ–è€…æ¢å¥è¯è¯´ï¼Œå…³æ³¨å®ä½“ä¹‹é—´å¦‚ä½•ç›¸äº’ä½¿ç”¨ã€‚å†æˆ–è€…å¦ä¸€ç§è§£é‡Šæ˜¯ï¼Œå®ƒæœ‰åŠ©äºå›ç­”â€œå¦‚ä½•æ„å»ºè½¯ä»¶çš„ç»„ä»¶â€è¿™ä¸ªé—®é¢˜ã€‚

ç»´åŸºç™¾ç§‘è¿™æ ·æè¿°

> åœ¨è½¯ä»¶å·¥ç¨‹é¢†åŸŸï¼Œç»“æ„å‹è®¾è®¡æ¨¡å¼æ˜¯é€šè¿‡è¯†åˆ«ä¸€ä¸ªç®€å•çš„æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•å®ç°äº†å®ä½“ä¹‹é—´çš„å…³ç³»ï¼Œæ¥ç®€åŒ–è®¾è®¡çš„è®¾è®¡æ¨¡å¼ã€‚

### ğŸ”Œ é€‚é…å™¨æ¨¡å¼ / Adapter

ç°å®ç”Ÿæ´»ä¸­çš„ä¾‹å­

> ä¸ºäº†ä¼ è¾“å›¾ç‰‡ï¼Œæ‚¨éœ€è¦æŸç§ä¸ç”µè„‘ç«¯å£å…¼å®¹çš„é€‚é…å™¨ï¼Œè¿™æ ·æ‚¨å°±å¯ä»¥å°†å­˜å‚¨å¡è¿æ¥åˆ°æ‚¨çš„ç”µè„‘äº†ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¯»å¡å™¨å°±æ˜¯ä¸€ä¸ªé€‚é…å™¨ã€‚
> å¦ä¸€ä¸ªä¾‹å­æ˜¯è‘—åçš„ç”µæºé€‚é…å™¨ï¼Œä¸€ä¸ªä¸‰è„šæ’å¤´æ— æ³•æ’å…¥åˆ°ä¸¤è„šæ’åº§ä¸­ï¼Œå®ƒéœ€è¦ç”¨åˆ°ç”µæºé€‚é…å™¨ä½¿å…¶ä¸ä¸¤è„šæ’åº§å…¼å®¹ã€‚
> å†ä¸¾ä¸ªä¾‹å­ï¼Œä¸€ä½ç¿»è¯‘è€…å°†ä¸€ä¸ªäººè¯´çš„è¯ç¿»è¯‘ç»™å¦ä¸€ä¸ªäººï¼ˆè¯‘æ³¨ï¼šè¿™é‡Œçš„ç¿»è¯‘è€…å°±æ˜¯é€‚é…å™¨ï¼‰ã€‚

ç®€å•æ¥è¯´

> é€‚é…å™¨æ¨¡å¼å…è®¸æ‚¨å°†ä¸å…¶å®ƒä¸å…¼å®¹çš„å¯¹è±¡åŒ…è£…åˆ°ä¸€ä¸ªé€‚é…å™¨ä¸­ï¼Œè®©è¿™ä¸ªå¯¹è±¡ä¸å¦ä¸€ä¸ªç±»å…¼å®¹ã€‚

ç»´åŸºç™¾ç§‘è¿™æ ·æè¿°

> åœ¨è½¯ä»¶å·¥ç¨‹é¢†åŸŸï¼Œé€‚é…å™¨æ¨¡å¼æ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œå®ƒå…è®¸ä¸€ä¸ªç°æœ‰ç±»çš„æ¥å£ç”¨ä½œå¦ä¸€ä¸ªæ¥å£ã€‚é€‚é…å™¨æ¨¡å¼å¸¸ç”¨äºä½¿ç°æœ‰çš„ç±»ä¸å…¶å®ƒçš„ç±»ä¸€èµ·å·¥ä½œï¼Œè€Œæ— éœ€ä¿®æ”¹å®ƒä»¬çš„æºç ã€‚

**ç¼–ç¨‹ç¤ºä¾‹**

æƒ³è±¡ä¸€ä¸ªæ¸¸æˆï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªçŒäººï¼Œä»–è¦ç‹©çŒç‹®å­ã€‚

é¦–å…ˆæˆ‘ä»¬å®šä¹‰äº† `Lion`ï¼ˆç‹®å­ï¼‰æ¥å£ï¼Œæ‰€æœ‰ç±»å‹çš„ç‹®å­éƒ½éœ€è¦å®ç°è¿™ä¸ªæ¥å£

```js
/**
 * Lion interface :
 *
 * roar()
 */

class AfricanLion  {
    roar() {}
}

class AsianLion  {
    roar() {}
}
```

è€ŒçŒäººéœ€è¦ `Lion` çš„ä»»æ„å®ç°æ¥ç‹©çŒã€‚

```js
class Hunter {
    hunt(lion) {
        // ... å‰é¢çš„ä¸€äº›ä»£ç 
        lion.roar()
        // ... åé¢çš„ä¸€äº›ä»£ç 
    }
}
```

ç°åœ¨å‡è®¾æˆ‘ä»¬åœ¨æˆ‘ä»¬çš„æ¸¸æˆé‡Œæ·»åŠ äº†ä¸€åª `WildDog`ï¼ˆé‡ç‹—ï¼‰ï¼ŒçŒäººä¹Ÿå¯ä»¥ç‹©çŒå®ƒã€‚ä½†æ˜¯æˆ‘ä»¬æ— æ³•ç›´æ¥æ·»åŠ é‡ç‹—ï¼Œå› ä¸ºå®ƒæœ‰ç€ä¸åŒçš„æ¥å£ã€‚ä¸ºäº†è®©å®ƒä¸æˆ‘ä»¬çš„çŒäººå…¼å®¹ï¼Œæˆ‘ä»¬å¿…é¡»åˆ›å»ºä¸€ä¸ªå…¼å®¹çš„é€‚é…å™¨

```js
// éœ€è¦æ·»åŠ åˆ°æ¸¸æˆä¸­
class WildDog {
    bark() {}
}

// ä¸é‡ç‹—ç›¸å…³çš„é€‚é…å™¨ï¼Œè®©å®ƒä¸æˆ‘ä»¬çš„æ¸¸æˆå…¼å®¹
class WildDogAdapter {

    constructor(dog) {
        this.dog = dog;
    }
    
    roar() {
        this.dog.bark();
    }
}
```

äºæ˜¯ï¼Œé€šè¿‡ `WildDogAdapter`ï¼Œåœ¨æˆ‘ä»¬çš„æ¸¸æˆä¸­å°±å¯ä»¥ä½¿ç”¨ `WildDog` äº†ã€‚

```js
wildDog = new WildDog()
wildDogAdapter = new WildDogAdapter(wildDog)

hunter = new Hunter()
hunter.hunt(wildDogAdapter)
```

### ğŸš¡ æ¡¥æ¥æ¨¡å¼ / Bridge

ç°å®ç”Ÿæ´»ä¸­çš„ä¾‹å­

> æƒ³è±¡æ‚¨æœ‰ä¸€ä¸ªåŒ…æ‹¬å¾ˆå¤šé¡µé¢çš„ç½‘ç«™ï¼Œç°åœ¨æ‚¨è®¡åˆ’è®©ç”¨æˆ·ä¿®æ”¹ç½‘ç«™çš„ä¸»é¢˜ã€‚æ‚¨ä¼šæ€ä¹ˆåšï¼Ÿä¸ºæ¯ä¸ªé¡µé¢çš„æ¯ä¸ªä¸»é¢˜åˆ›å»ºä¸€ä»½å‰¯æœ¬ï¼Œæˆ–æ˜¯åˆ›å»ºå•ç‹¬çš„ä¸»é¢˜å¹¶æ ¹æ®ç”¨æˆ·çš„åå¥½åŠ è½½å®ƒä»¬ï¼Ÿæ¡¥æ¥æ¨¡å¼å…è®¸æ‚¨å®ç°åè€…ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚

![With and without the bridge pattern](static/With-and-without-the-bridge-pattern.png)

ç®€å•æ¥è¯´

> æ¡¥æ¥æ¨¡å¼æ˜¯åå¥½äºä½¿ç”¨ç»„åˆçš„æ¨¡å¼ï¼Œè€Œä¸æ˜¯ç»§æ‰¿ã€‚å®ç°çš„ç»†èŠ‚ä»ä¸€ä¸ªæ¨¡ç»„å±‚æ¬¡æ¨é€ç»™å¦ä¸€ä¸ªå…·æœ‰å•ç‹¬æ¨¡ç»„å±‚æ¬¡çš„å¯¹è±¡ã€‚

ç»´åŸºç™¾ç§‘è¿™æ ·æè¿°

> æ¡¥æ¥æ¨¡å¼æ˜¯ä¸€ç§ç”¨åœ¨è½¯ä»¶å·¥ç¨‹é¢†åŸŸçš„è®¾è®¡æ¨¡å¼ï¼Œæ—¨åœ¨â€œå°†æŠ½è±¡ä¸å…¶å®ç°è§£è€¦ï¼Œä½¿å¾—ä¸¤è€…å¯ä»¥ç‹¬ç«‹æ”¹å˜â€ã€‚

**ç¼–ç¨‹ç¤ºä¾‹**

ç¿»è¯‘ä¸€ä¸‹åˆšåˆšå…³äºæˆ‘ä»¬ç½‘ç«™çš„ä¾‹å­ã€‚ç°åœ¨æˆ‘ä»¬å®šä¹‰äº† `WebPage`ï¼ˆç½‘ç«™ï¼‰æ¨¡ç»„å±‚æ¬¡

```js
/**
 * Webpage interface :
 *
 * constructor(theme)
 * getContent()
 */

class About{
    constructor(theme) {
        this.theme = theme
    }

    getContent() {
        return "About page in " + this.theme.getColor()
    }
}

class Careers{
   constructor(theme) {
       this.theme = theme
   }

   getContent() {
       return "Careers page in " + this.theme.getColor()
   }
}
```

ä»¥åŠå•ç‹¬çš„ä¸»é¢˜æ¨¡ç»„å±‚æ¬¡

```js
/**
 * Theme interface :
 *
 * getColor()
 */

class DarkTheme{
    getColor() {
        return 'Dark Black'
    }
}
class LightTheme{
    getColor() {
        return 'Off white'
    }
}
class AquaTheme{
    getColor() {
        return 'Light blue'
    }
}
```

æœ€åï¼Œç»“åˆä¸¤ä¸ªæ¨¡ç»„å±‚æ¬¡ä½¿ç”¨

```js
const darkTheme = new DarkTheme()

const about = new About(darkTheme)
const careers = new Careers(darkTheme)

console.log(about.getContent()) // "About page in Dark Black"
console.log(careers.getContent()) // "Careers page in Dark Black"
```

### ğŸŒ¿ ç»„åˆæ¨¡å¼ / Composite

ç°å®ç”Ÿæ´»ä¸­çš„ä¾‹å­

> æ¯ä¸ªç»„ç»‡éƒ½ç”±é›‡å‘˜ç»„æˆã€‚æ¯ä¸ªé›‡å‘˜éƒ½æœ‰ä¸€äº›ç›¸åŒçš„ç‰¹ç‚¹ï¼Œå¦‚æœ‰ä¸€å®šçš„è–ªæ°´é…¬åŠ³ï¼Œæ‹…è´ŸæŸäº›ä»»åŠ¡èŒè´£ï¼Œå¯èƒ½éœ€è¦å‘æŸäººæŠ¥å‘Šï¼Œå¯èƒ½æ‹¥æœ‰ä¸‹å±ç­‰ç­‰ã€‚

ç®€å•æ¥è¯´

> ç»„åˆæ¨¡å¼ä½¿å¾—å®¢æˆ·ç«¯ä»¥ç»Ÿä¸€çš„æ–¹å¼å¤„ç†ä¸åŒçš„å¯¹è±¡ã€‚

ç»´åŸºç™¾ç§‘è¿™æ ·æè¿°

> åœ¨è½¯ä»¶å·¥ç¨‹é¢†åŸŸï¼Œç»„åˆæ¨¡å¼æ˜¯ä¸€ç§åˆ†ç¦»è®¾è®¡æ¨¡å¼ã€‚ç»„åˆæ¨¡å¼æè¿°äº†ä¸€ç»„å¯¹è±¡çš„å¤„ç†ï¼Œä¸å¯¹ä¸€ä¸ªå¯¹è±¡çš„å•ä¸ªå®ä¾‹çš„å¤„ç†ç›¸åŒã€‚ç»„åˆæ¨¡å¼çš„ç›®çš„æ˜¯å°†å¯¹è±¡â€œç»„åˆâ€è¿›æ ‘ç»“æ„ä¸­ï¼Œæ¥è¡¨ç¤ºéƒ¨åˆ†æ•´ä½“çš„å±‚æ¬¡ç»“æ„ã€‚å®ç°ç»„åˆæ¨¡å¼ä½¿å¾—å®¢æˆ·ç«¯ä½¿ç”¨ç»Ÿä¸€çš„æ–¹å¼å¤„ç†ä¸åŒçš„å¯¹è±¡å’Œç»„åˆä½“ã€‚

**ç¼–ç¨‹ç¤ºä¾‹**

ä»¥å‰é¢æˆ‘ä»¬é›‡å‘˜çš„ä¾‹å­ä¸ºä¾‹ã€‚ç°åœ¨æˆ‘ä»¬æœ‰å‡ ç§ä¸åŒçš„é›‡å‘˜ç±»å‹

```js
/**
 * Employee interface :
 *
 * constructor(name, salary)
 * getName()
 * setSalary()
 * getSalary()
 * getRoles()
 */

class Developer {
    constructor(name, salary) {
        this.name = name
        this.salary = salary
    }

    getName() {
        return this.name
    }

    setSalary(salary) {
        this.salary = salary
    }

    getSalary() {
        return this.salary
    }

    getRoles() {
        return this.roles
    }

    develop() {
        /* */
    }
}

class Designer {
    constructor(name, salary) {
        this.name = name
        this.salary = salary
    }

    getName() {
        return this.name
    }

    setSalary(salary) {
        this.salary = salary
    }

    getSalary() {
        return this.salary
    }

    getRoles() {
        return this.roles
    }

    design() {
        /* */
    }
}
```

æ¥ç€æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªç»„ç»‡ç±»ï¼Œå®ƒåŒ…æ‹¬äº†è¿™å‡ ç§ä¸åŒç±»å‹çš„é›‡å‘˜

```js
class Organization {
    constructor(){
        this.employees = []
    }

    addEmployee(employee) {
        this.employees.push(employee)
    }

    getNetSalaries() {
        let netSalary = 0

        this.employees.forEach(employee => {
            netSalary += employee.getSalary()
        })

        return netSalary
    }
}
```

æœ€åæˆ‘ä»¬å¯ä»¥è¿™æ ·ä½¿ç”¨å®ƒ

```js
// å®šä¹‰æ–°çš„é›‡å‘˜
const john = new Developer('John Doe', 12000)
const jane = new Designer('Jane', 10000)

// æ·»åŠ é›‡å‘˜åˆ°ç»„ç»‡ä¸­
const organization = new Organization()
organization.addEmployee(john)
organization.addEmployee(jane)

console.log("è–ªé‡‘å‡€é¢ï¼š" , organization.getNetSalaries()) // è–ªé‡‘å‡€é¢ï¼š22000
```

### â˜• è£…é¥°å™¨æ¨¡å¼ / Decorator

ç°å®ç”Ÿæ´»ä¸­çš„ä¾‹å­

> æƒ³è±¡æ‚¨ç»è¥äº†ä¸€å®¶æä¾›å¤šç§æœåŠ¡çš„æ±½ä¿®å‚ã€‚ç°åœ¨æ‚¨è¦å¦‚ä½•è®¡ç®—åº”è¯¥æ”¶å–çš„è´¦å•é‡‘é¢ï¼Ÿæ‚¨å¯ä»¥é€‰æ‹©ä¸€ç§æœåŠ¡ï¼ŒåŠ¨æ€åœ°å°†æä¾›æœåŠ¡çš„ä»·æ ¼ç´¯è®¡åˆ°è´¦å•ä¸Šï¼Œç›´åˆ°æ‚¨å¾—åˆ°äº†æœ€ç»ˆçš„æ¶ˆè´¹é‡‘é¢ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæ¯ä¸€ç§ç±»å‹çš„æœåŠ¡éƒ½æ˜¯ä¸€ä¸ªè£…é¥°å™¨ã€‚

ç®€å•æ¥è¯´

> è£…é¥°å™¨æ¨¡å¼å…è®¸æ‚¨å°†å¯¹è±¡æ”¾å…¥ä¸€ä¸ªè£…é¥°å™¨ç±»çš„å¯¹è±¡ä¸­ï¼ŒåŠ¨æ€åœ°æ”¹å˜è¿™ä¸ªå¯¹è±¡åœ¨è¿è¡Œæ—¶çš„è¡Œä¸ºã€‚

ç»´åŸºç™¾ç§‘è¿™æ ·æè¿°

> åœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­ï¼Œè£…é¥°å™¨æ¨¡å¼æ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œå®ƒå…è®¸é™æ€æˆ–åŠ¨æ€åœ°å‘å•ä¸ªå¯¹è±¡ä¸­æ·»åŠ è¡Œä¸ºï¼Œè€Œä¸ä¼šå½±å“åŒä¸€ä¸ªç±»çš„å…¶å®ƒå¯¹è±¡çš„è¡Œä¸ºã€‚è£…é¥°å™¨æ¨¡å¼é€šå¸¸æœ‰åŠ©äºéµå¾ªå•ä¸€è´£ä»»åŸåˆ™ï¼Œè¿™æ˜¯å› ä¸ºå®ƒå…è®¸åœ¨å…·æœ‰ç‹¬ç‰¹å…³æ³¨é¢†åŸŸçš„ç±»ä¹‹é—´ï¼Œåˆ’åˆ†å‡ºå„è‡ªçš„åŠŸèƒ½ã€‚

**ç¼–ç¨‹ç¤ºä¾‹**

ä¸å¦¨ä»¥å’–å•¡ä¸ºä¾‹ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬ç¼–å†™ä¸€ä¸ªæ™®é€šå’–å•¡çš„ç±»æ¥å®ç°å’–å•¡æ¥å£

```js
/**
 * Coffee interface:
 * getCost()
 * getDescription()
 */

class SimpleCoffee {

    getCost() {
        return 10
    }

    getDescription() {
        return 'æ™®é€šå’–å•¡'
    }
}
```

æˆ‘ä»¬æƒ³è¦è®©ä»£ç å…·æœ‰å¯æ‰©å±•æ€§ï¼Œå½“éœ€è¦çš„æ—¶å€™å¯ä»¥æœ‰é€‰é¡¹å»ä¿®æ”¹å®ƒã€‚è®©æˆ‘ä»¬æ¥ç¼–å†™ä¸€äº›é¢å¤–é€‰é¡¹ï¼ˆè£…é¥°å™¨ï¼‰

```js
class MilkCoffee {

    constructor(coffee) {
        this.coffee = coffee
    }

    getCost() {
        return this.coffee.getCost() + 2
    }

    getDescription() {
        return this.coffee.getDescription() + 'ï¼ŒåŠ å¥¶'
    }
}

class WhipCoffee {

    constructor(coffee) {
        this.coffee = coffee
    }

    getCost() {
        return this.coffee.getCost() + 5
    }

    getDescription() {
        return this.coffee.getDescription() + 'ï¼ŒåŠ é²œå¥¶æ²¹'
    }
}

class VanillaCoffee {

    constructor(coffee) {
        this.coffee = coffee
    }

    getCost() {
        return this.coffee.getCost() + 3
    }

    getDescription() {
        return this.coffee.getDescription() + 'ï¼ŒåŠ é¦™è‰'
    }
}
```

ç°åœ¨ï¼Œæ¥ä¸€æ¯å’–å•¡å§

```js
let someCoffee

someCoffee = new SimpleCoffee()
console.log(someCoffee.getCost()) // 10
console.log(someCoffee.getDescription()) // æ™®é€šå’–å•¡

someCoffee = new MilkCoffee(someCoffee)
console.log(someCoffee.getCost()) // 12
console.log(someCoffee.getDescription()) // æ™®é€šå’–å•¡ï¼ŒåŠ å¥¶

someCoffee = new WhipCoffee(someCoffee)
console.log(someCoffee.getCost()) // 17
console.log(someCoffee.getDescription()) // æ™®é€šå’–å•¡ï¼ŒåŠ å¥¶ï¼ŒåŠ é²œå¥¶æ²¹

someCoffee = new VanillaCoffee(someCoffee)
console.log(someCoffee.getCost()) // 20
console.log(someCoffee.getDescription()) // æ™®é€šå’–å•¡ï¼ŒåŠ å¥¶ï¼ŒåŠ é²œå¥¶æ²¹ï¼ŒåŠ é¦™è‰
```

### ğŸ“¦ é—¨é¢æ¨¡å¼ / Facade

è¯‘æ³¨ï¼šä¹Ÿå¸¸è¢«è¯‘ä¸º**å¤–è§‚æ¨¡å¼**ã€‚

ç°å®ç”Ÿæ´»ä¸­çš„ä¾‹å­

> æ‚¨æ˜¯å¦‚ä½•å¯åŠ¨ç”µè„‘çš„ï¼Ÿâ€œæŒ‰ä¸‹ç”µæºæŒ‰é’®ï¼â€æ‚¨è¯´ã€‚è¿™æ˜¯æ‚¨æ‰€ç›¸ä¿¡çš„ï¼Œå› ä¸ºæ‚¨æ­£åœ¨ä½¿ç”¨ç”µè„‘ä¸ºå¤–éƒ¨æä¾›çš„ç®€å•æ¥å£ï¼Œè€Œåœ¨ç”µè„‘å†…éƒ¨ï¼Œå®ƒå¿…é¡»åšå¾ˆå¤šäº‹æƒ…æ¥å®ç°å¯åŠ¨äº‹ä»¶ã€‚è¿™ä¸ªå¤æ‚å­ç³»ç»Ÿçš„ç®€å•æ¥å£ï¼Œå°±æ˜¯é—¨é¢ã€‚

ç®€å•æ¥è¯´

> é—¨é¢æ¨¡å¼ä¸ºå¤æ‚çš„å­ç³»ç»Ÿæä¾›äº†ä¸€ä¸ªç®€åŒ–çš„æ¥å£ã€‚

ç»´åŸºç™¾ç§‘è¿™æ ·æè¿°

> é—¨é¢æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒä¸ºæ›´å¤§çš„ä»£ç ä¸»ä½“æä¾›äº†ç®€åŒ–çš„æ¥å£ï¼Œä¾‹å¦‚ä¸€ä¸ªç±»åº“ã€‚

**ç¼–ç¨‹ç¤ºä¾‹**

æ‹¿ä¸Šé¢å¯åŠ¨ç”µè„‘çš„ä¾‹å­æ¥è¯´ã€‚é¦–å…ˆæˆ‘ä»¬ç¼–å†™äº†ç”µè„‘ç±»

```js
class Computer {

    getElectricShock() {
        console.log('Ouch!')
    }

    makeSound() {
        console.log('Beep beep!')
    }

    showLoadingScreen() {
        console.log('åŠ è½½ä¸­..')
    }

    bam() {
        console.log('å‡†å¤‡å°±ç»ªï¼')
    }

    closeEverything() {
        console.log('Bup bup bup buzzzz!')
    }

    sooth() {
        console.log('Zzzzz')
    }

    pullCurrent() {
        console.log('Haaah!')
    }
}
```

æ¥ç€æˆ‘ä»¬ç¼–å†™äº†å®ƒçš„é—¨é¢

```js
class ComputerFacade {

    constructor(computer) {
        this.computer = computer
    }

    turnOn() {
        this.computer.getElectricShock()
        this.computer.makeSound()
        this.computer.showLoadingScreen()
        this.computer.bam()
    }

    turnOff() {
        this.computer.closeEverything()
        this.computer.pullCurrent()
        this.computer.sooth()
    }
}
```

æœ€åå°±å¯ä»¥ä½¿ç”¨ç”µè„‘çš„é—¨é¢äº†

```js
const computer = new ComputerFacade(new Computer())
computer.turnOn() // Ouch! Beep beep! åŠ è½½ä¸­.. å‡†å¤‡å°±ç»ªï¼
computer.turnOff() // Bup bup buzzz! Haah! Zzzzz
```

### ğŸƒ äº«å…ƒæ¨¡å¼ / Flyweight

ç°å®ç”Ÿæ´»ä¸­çš„ä¾‹å­

> æ‚¨å–è¿‡æ‘Šä½ä¸Šæ–°é²œçš„èŒ¶å—ï¼Ÿä»–ä»¬é€šå¸¸ä¼šæ²ä¸æ­¢ä¸€æ¯æ‚¨ç‚¹çš„èŒ¶ï¼Œç„¶åå°†å‰©ä¸‹çš„èŒ¶ç•™å¾…ç»™å…¶ä»–æ¶ˆè´¹è€…ï¼Œè¾¾åˆ°èŠ‚çœèµ„æºçš„ç›®çš„ï¼Œä¾‹å¦‚ç‡ƒæ°”ç­‰ã€‚äº«å…ƒæ¨¡å¼å°±æ˜¯å…³äºè¿™ä»¶äº‹â€”â€”å…±äº«ã€‚

ç®€å•æ¥è¯´

> äº«å…ƒæ¨¡å¼é€šè¿‡åœ¨ç›¸ä¼¼å¯¹è±¡é—´å…±äº«å°½å¯èƒ½å¤šçš„æ•°æ®ï¼Œæ¥å‡å°‘å†…å­˜ä½¿ç”¨æˆ–è®¡ç®—å¼€é”€ã€‚

ç»´åŸºç™¾ç§‘è¿™æ ·æè¿°

> åœ¨è®¡ç®—æœºç¼–ç¨‹ä¸­ï¼Œäº«å…ƒæ¨¡å¼æ˜¯ä¸€ä¸ªè½¯ä»¶è®¾è®¡æ¨¡å¼ã€‚äº«å…ƒæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒä¸å…¶å®ƒç›¸ä¼¼çš„å¯¹è±¡å…±äº«å°½å¯èƒ½å¤šçš„æ•°æ®ï¼Œæ¥å‡å°‘å†…å­˜å¼€é”€ã€‚å½“ç®€å•çš„é‡å¤è¡Œä¸ºå°†å ç”¨ä¸å¯æ¥å—æ•°å€¼çš„å†…å­˜æ—¶ï¼Œå¯ä»¥ä½¿ç”¨äº«å…ƒæ¨¡å¼æ¥è¡¨ç¤ºå¤§é‡çº§çš„å¯¹è±¡ã€‚

**ç¼–ç¨‹ç¤ºä¾‹**

ç¿»è¯‘å‰è¾¹æˆ‘ä»¬å…³äºèŒ¶çš„ä¾‹å­ã€‚é¦–å…ˆæˆ‘ä»¬ç¼–å†™äº†èŒ¶çš„ç±»å‹å’ŒèŒ¶çš„åˆ¶ä½œç±»

```js
// æ‰€æœ‰å°†è¢«ç¼“å­˜çš„æ•°æ®å³æ˜¯äº«å…ƒ
// è¿™é‡ŒèŒ¶çš„ç±»å‹å°†æˆä¸ºäº«å…ƒ
class KarakTea {
}

// å……å½“å·¥å‚ï¼Œä¿å­˜æ²å¥½çš„èŒ¶
class TeaMaker {
    constructor(){
        this.availableTea = {}
    }

    make(preference) {
        this.availableTea[preference] = this.availableTea[preference] || (new KarakTea())
        return this.availableTea[preference]
    }
}
```

æ¥ç€æˆ‘ä»¬ç¼–å†™äº† `TeaShop`ï¼ˆèŒ¶åº—ï¼‰ç±»ï¼Œå®ƒå°†å¤„ç†ç‚¹å•å’Œä¸ŠèŒ¶äº‹ä»¶

```js
class TeaShop {
    constructor(teaMaker) {
        this.teaMaker = teaMaker
        this.orders = []
    }

    takeOrder(teaType, table) {
        this.orders[table] = this.teaMaker.make(teaType)
    }

    serve() {
        this.orders.forEach((order, index) => {
            console.log('ä¸ŠèŒ¶ç»™æ¡Œå· #' + index)
        })
    }
}
```

æœ€åæˆ‘ä»¬å¯ä»¥åƒä¸‹é¢ä¸€æ ·ä½¿ç”¨å®ƒ

```js
const teaMaker = new TeaMaker()
const shop = new TeaShop(teaMaker)

shop.takeOrder('å°‘ç³–', 1)
shop.takeOrder('å¤šå¥¶', 2)
shop.takeOrder('æ— ç³–', 5)

shop.serve()
// ä¸ŠèŒ¶ç»™æ¡Œå· #1
// ä¸ŠèŒ¶ç»™æ¡Œå· #2
// ä¸ŠèŒ¶ç»™æ¡Œå· #5
```

### ğŸ± ä»£ç†æ¨¡å¼ / Proxy

ç°å®ç”Ÿæ´»ä¸­çš„ä¾‹å­

> æ‚¨æ›¾åˆ·å¡æ¥é€šè¿‡é—¨ç¦å—ï¼Ÿæœ‰å¾ˆå¤šç§æ–¹æ³•å¯ä»¥æ‰“å¼€é—¨ç¦ï¼Œåˆ·é—¨ç¦å¡æˆ–æ˜¯æŒ‰ä¸‹ç»•è¿‡å®‰ä¿çš„æŒ‰é’®ã€‚æ‰“å¼€é—¨æ˜¯é—¨çš„ä¸»è¦åŠŸèƒ½ï¼Œä½†è¿™é‡Œæœ‰ä¸€å±‚ä»£ç†æ·»åŠ åˆ°äº†æ‰“å¼€é—¨ä¸Šï¼Œå¢æ·»äº†ä¸€äº›åŠŸèƒ½ã€‚è®©æˆ‘é€šè¿‡ä¸‹é¢çš„ä»£ç ç¤ºä¾‹æ›´å¥½åœ°è§£é‡Šå®ƒã€‚

ç®€å•æ¥è¯´

> ä½¿ç”¨ä»£ç†æ¨¡å¼ï¼Œç±»ä»£è¡¨è¡Œé©¶å¦ä¸€ä¸ªç±»çš„åŠŸèƒ½ã€‚

ç»´åŸºç™¾ç§‘è¿™æ ·æè¿°

> åœ¨å…¶æœ€ä¸€èˆ¬çš„å½¢å¼ï¼Œä»£ç†æ˜¯ä¸€ä¸ªç±»ï¼Œä½œä¸ºå…¶å®ƒä¸œè¥¿çš„æ¥å£å‘æŒ¥åŠŸèƒ½ã€‚ä»£ç†æ˜¯è¢«å®¢æˆ·ç«¯è°ƒç”¨çš„å°è£…æˆ–ä¸­ä»‹å¯¹è±¡ï¼Œç”¨äºè®¿é—®ç³»ç»ŸèƒŒåçœŸæ­£æä¾›æœåŠ¡çš„å¯¹è±¡ã€‚ä½¿ç”¨ä»£ç†å¯ä»¥ç›´æ¥åœ°æŒ‡å‘çœŸæ­£çš„å¯¹è±¡ï¼Œæˆ–è€…å¯ä»¥æä¾›é¢å¤–çš„é€»è¾‘ã€‚åœ¨ä»£ç†æ¨¡å¼ä¸‹ï¼Œå¯ä»¥æ·»åŠ é™„åŠ çš„åŠŸèƒ½ï¼Œä¾‹å¦‚ï¼Œå½“å¯¹çœŸæ­£å¯¹è±¡çš„æ“ä½œä¼šæ¶ˆè€—å¤§é‡èµ„æºæ—¶è¿›è¡Œç¼“å­˜ï¼Œæˆ–æ˜¯åœ¨è°ƒç”¨çœŸæ­£å¯¹è±¡çš„æ“ä½œä¹‹å‰æ£€æŸ¥å‰ç½®æ¡ä»¶ã€‚

**ç¼–ç¨‹ç¤ºä¾‹**

ä»¥ä¸Šé¢æˆ‘ä»¬çš„é˜²ç›—é—¨ä¸ºä¾‹ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬ç¼–å†™äº†é—¨çš„æ¥å£å’Œå®ƒçš„å®ç°

```js
/**
 * Door interface :
 *
 * open()
 * close()
 */

class LabDoor {
    open() {
        console.log('æ‰“å¼€å®éªŒå®¤é—¨')
    }

    close() {
        console.log('å…³é—­å®éªŒå®¤é—¨')
    }
}
```

æ¥ç€æˆ‘ä»¬ç¼–å†™äº†ä»£ç†ï¼Œå®ƒå¯ä»¥ç¡®ä¿æˆ‘ä»¬æƒ³è¦çš„ä»»ä½•é—¨çš„å®‰å…¨

```js
class Security {
    constructor(door) {
        this.door = door
    }

    open(password) {
        if (this.authenticate(password)) {
            this.door.open()
        } else {
            console.log('å¥¥ä¸ï¼å¯†ç é”™è¯¯ã€‚')
        }
    }

    authenticate(password) {
        return password === 'ecr@t'
    }

    close() {
        this.door.close()
    }
}
```

æœ€åè¿™æ˜¯ä½¿ç”¨å®ƒçš„æ–¹æ³•

```js
const door = new Security(new LabDoor())
door.open('invalid') // å¥¥ä¸ï¼å¯†ç é”™è¯¯ã€‚

door.open('ecr@t') // æ‰“å¼€å®éªŒå®¤é—¨
door.close() // å…³é—­å®éªŒå®¤é—¨
```

## ğŸ¤¹ è¡Œä¸ºå‹è®¾è®¡æ¨¡å¼ / Behavioral Design Patterns

ç®€å•æ¥è¯´

> è¡Œä¸ºå‹è®¾è®¡æ¨¡å¼ä¸»è¦å…³æ³¨å¯¹è±¡ä¹‹é—´è´£ä»»çš„åˆ†é…ã€‚ä¸ç»“æ„å‹è®¾è®¡æ¨¡å¼ä¸åŒçš„æ˜¯ï¼Œå®ƒä»¬ä¸ä»…æŒ‡å®šäº†å¯¹è±¡çš„ç»“æ„ï¼Œè¿˜æ¦‚è¿°äº†å¯¹è±¡ä¹‹é—´æ¶ˆæ¯ä¼ é€’ï¼ˆé€šä¿¡ï¼‰çš„æ¨¡å¼ã€‚æ¢å¥è¯è¯´ï¼Œå®ƒä»¬æœ‰åŠ©äºå›ç­”äº†â€œå¦‚ä½•åœ¨è½¯ä»¶ç»„ä»¶ä¸­æ‰§è¡Œè¡Œä¸ºï¼Ÿâ€è¿™ä¸ªé—®é¢˜ã€‚

ç»´åŸºç™¾ç§‘è¿™æ ·æè¿°

> åœ¨è½¯ä»¶å·¥ç¨‹é¢†åŸŸï¼Œè¡Œä¸ºå‹è®¾è®¡æ¨¡å¼æ˜¯è¯†åˆ«å¹¶å®ç°å¯¹è±¡ä¹‹é—´çš„å¸¸è§é€šä¿¡æ¨¡å¼çš„è®¾è®¡æ¨¡å¼ã€‚å¦‚æ­¤ä¸€æ¥ï¼Œè¿™äº›æ¨¡å¼ä½¿å¾—é€šä¿¡å˜å¾—æ›´åŠ çµæ´»ã€‚

### ğŸ”— è´£ä»»é“¾æ¨¡å¼ / Chain of Responsibility

ç°å®ç”Ÿæ´»ä¸­çš„ä¾‹å­

> ä¸¾ä¸ªä¾‹å­ï¼Œåœ¨æ‚¨çš„è´¦æˆ·ä¸­ï¼Œæ‚¨è®¾ç½®äº†ä¸‰ç§æ”¯ä»˜æ–¹å¼ï¼ˆ`A`, `B` å’Œ `C`ï¼‰ï¼Œå…¶ä¸­å­˜æ”¾äº†ä¸åŒæ•°é‡çš„é’±ã€‚`A` è´¦æˆ·ä¸­æœ‰ 100 ç¾å…ƒï¼Œ`B` ä¸­æœ‰ 300 ç¾å…ƒï¼Œè€Œ `C` ä¸­æœ‰ 1000 ç¾å…ƒï¼ŒæŒ‰ç…§ `A`ï¼Œ`B` æœ€åæ˜¯ `C` çš„é¡ºåºåå¥½è¿›è¡Œæ”¯ä»˜æ“ä½œã€‚æ‚¨å°è¯•è´­ä¹°æŸä¸ªä»·å€¼ 210 ç¾å…ƒçš„ä¸œè¥¿ã€‚ä½¿ç”¨è´£ä»»é“¾æ¨¡å¼ï¼Œé¦–å…ˆï¼Œæ£€æŸ¥ `A` è´¦æˆ·æ˜¯å¦èƒ½è´­ä¹°ï¼Œå¦‚æœå¯ä»¥ï¼Œå°†è¿›è¡Œæ”¯ä»˜æ“ä½œç„¶åå°†é“¾ä¸­æ­¢ã€‚å¦‚æœä¸è¶³ä»¥è´­ä¹°ï¼Œè¯·æ±‚å°†ä¼ é€’ç»™ `B` è´¦æˆ·ï¼Œæ£€æŸ¥æ˜¯å¦èƒ½è´­ä¹°ï¼ŒåŒæ ·å¦‚æœå¯ä»¥ï¼Œå°†é“¾ä¸­æ­¢ï¼›å¦‚æœä¸å¯ä»¥ï¼Œè¯·æ±‚å°†ç»§ç»­ä¼ é€’ç›´åˆ°å®ƒæ‰¾åˆ°åˆé€‚çš„å¤„ç†è€…ã€‚åœ¨è¿™é‡Œï¼Œ`A`ï¼Œ`B` å’Œ `C` æ˜¯é“¾ä¸Šçš„ä¸åŒç¯èŠ‚ï¼Œè€Œè¿™æ•´ä¸ªæ¨¡å¼å°±æ˜¯è´£ä»»é“¾ã€‚

ç®€å•æ¥è¯´

> è´£ä»»é“¾æ¨¡å¼æœ‰åŠ©äºæ„å»ºä¸€æ¡å¯¹è±¡é“¾ã€‚è¯·æ±‚ä»é“¾çš„ä¸€ç«¯è¿›å…¥ï¼Œä»å¯¹è±¡åˆ°å¦ä¸€ä¸ªå¯¹è±¡ä¾æ¬¡ä¼ é€’ï¼Œç›´åˆ°å®ƒæ‰¾åˆ°åˆé€‚çš„å¤„ç†è€…ã€‚

ç»´åŸºç™¾ç§‘è¿™æ ·æè¿°

> åœ¨é¢å‘å¯¹è±¡è®¾è®¡ä¸­ï¼Œè´£ä»»é“¾æ¨¡å¼æ˜¯ç”±ä¸€äº›å‘½ä»¤å¯¹è±¡å’Œä¸€ç³»åˆ—å¤„ç†å¯¹è±¡ç»„æˆçš„è®¾è®¡æ¨¡å¼ã€‚æ¯ä¸ªå¤„ç†å¯¹è±¡éƒ½åŒ…å«äº†å®ƒå¯ä»¥å¤„ç†çš„å‘½ä»¤å¯¹è±¡ç±»å‹çš„é€»è¾‘ï¼Œå…¶ä½™çš„å°†ä¼ é€’ç»™é“¾ä¸­çš„ä¸‹ä¸€ä¸ªå¤„ç†å¯¹è±¡ã€‚

**ç¼–ç¨‹ç¤ºä¾‹**

ç¿»è¯‘ä¸€ä¸‹åˆšåˆšæˆ‘ä»¬è´¦æˆ·çš„ä¾‹å­ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬ç¼–å†™äº†åŸºç¡€è´¦æˆ·ç±»ï¼Œå®ƒåŒ…æ‹¬å°†è´¦æˆ·é“¾æ¥èµ·æ¥çš„é€»è¾‘ã€‚åŸºäºåŸºç¡€è´¦æˆ·ç±»ï¼Œæˆ‘ä»¬è¿˜ç¼–å†™äº†ä¸€äº›å…·ä½“è´¦æˆ·ç±»

```js
class Account {

    setNext(account) {
        this.successor = account
    }

    pay(amountToPay) {
        if (this.canPay(amountToPay)) {
            console.log(`ä½¿ç”¨ ${this.name} æ”¯ä»˜ ${amountToPay}ï¼`)
        } else if (this.successor) {
            console.log(`æ— æ³•ä½¿ç”¨ ${this.name} æ”¯ä»˜ã€‚ç»§ç»­ä¸­...`)
            this.successor.pay(amountToPay)
        } else {
            console.log('æ²¡æœ‰è´¦æˆ·é¢åº¦è¶³å¤Ÿ')
        }
    }

    canPay(amount) {
        return this.balance >= amount
    }
}

class Bank extends Account {
    constructor(balance) {
        super()
        this.name = 'é“¶è¡Œ'
        this.balance = balance
    }
}

class Paypal extends Account {
    constructor(balance) {
        super()
        this.name = 'è´å®'
        this.balance = balance
    }
}

class Bitcoin extends Account {
    constructor(balance) {
        super()
        this.name = 'æ¯”ç‰¹å¸'
        this.balance = balance
    }
}
```

ç°åœ¨ï¼Œè®©æˆ‘ä»¬ä½¿ç”¨ä¸Šé¢å®šä¹‰çš„å…·ä½“è´¦æˆ·ç±»ï¼ˆå³é“¶è¡Œï¼Œè´å®ï¼Œæ¯”ç‰¹å¸ï¼‰ï¼Œæ„æˆæˆ‘ä»¬çš„è´£ä»»é“¾

```js
// è®©æˆ‘ä»¬åƒä¸‹é¢è¿™æ ·æ„æˆè´£ä»»é“¾
//      é“¶è¡Œ.è´å®.æ¯”ç‰¹å¸
//
// é“¶è¡Œä¼˜å…ˆæ”¯ä»˜
//      å¦‚æœé“¶è¡Œä¸è¶³ä»¥æ”¯ä»˜ï¼Œåˆ™ä½¿ç”¨è´å®
//      å¦‚æœè´å®ä¸è¶³ä»¥æ”¯ä»˜ï¼Œåˆ™ä½¿ç”¨æ¯”ç‰¹å¸

const bank = new Bank(100)          // é“¶è¡Œé¢åº¦ä¸º 100
const paypal = new Paypal(200)      // è´å®é¢åº¦ä¸º 200
const bitcoin = new Bitcoin(300)    // æ¯”ç‰¹å¸é¢åº¦ä¸º 300

bank.setNext(paypal)
paypal.setNext(bitcoin)

// è®©æˆ‘ä»¬å°è¯•ä½¿ç”¨é“¶è¡Œä¼˜å…ˆæ”¯ä»˜
bank.pay(259)

// è¾“å‡ºå¦‚ä¸‹
// ==============
// æ— æ³•ä½¿ç”¨ é“¶è¡Œ æ”¯ä»˜ã€‚ç»§ç»­ä¸­...
// æ— æ³•ä½¿ç”¨ è´å® æ”¯ä»˜ã€‚ç»§ç»­ä¸­...
// ä½¿ç”¨ æ¯”ç‰¹å¸ æ”¯ä»˜ 259ï¼
```

### ğŸ‘® å‘½ä»¤æ¨¡å¼ / Command

ç°å®ç”Ÿæ´»ä¸­çš„ä¾‹å­

> ä¸¾ä¸€ä¸ªå¸¸è§çš„ä¾‹å­ï¼Œæ‚¨åœ¨é¤å…ç‚¹å•ã€‚æ‚¨ï¼ˆå³ `Client` å®¢æˆ·ç«¯ï¼‰å‘Šè¯‰æœåŠ¡å‘˜ï¼ˆå³ `Invoker` è°ƒç”¨è€…ï¼‰æ‚¨æƒ³è¦è¿™äº›èœè‚´ï¼ˆå³ `Command` å‘½ä»¤ï¼‰ï¼Œäºæ˜¯æœåŠ¡å‘˜ç®€å•åœ°å°†è¿™äº›éœ€æ±‚è½¬å‘ç»™å¨å¸ˆï¼ˆå³ `Receiver` æ¥æ”¶è€…ï¼‰ï¼Œä»–ä»¬çŸ¥é“è¿™äº›èœè‚´æ˜¯ä»€ä¹ˆä»¥åŠè¯¥å¦‚ä½•çƒ¹åˆ¶ã€‚
> å¦ä¸€ä¸ªä¾‹å­æ˜¯æ‚¨ï¼ˆå³ `Client` å®¢æˆ·ç«¯ï¼‰ä½¿ç”¨é¥æ§å™¨ï¼ˆå³ `Invoker` è°ƒç”¨è€…ï¼‰ï¼Œåˆ‡æ¢ï¼ˆå³ `Command` å‘½ä»¤ï¼‰ç”µè§†ï¼ˆå³ `Receiver` æ¥æ”¶è€…ï¼‰æ­£åœ¨æ’­æ”¾çš„é¢‘é“ã€‚

ç®€å•æ¥è¯´

> å‘½ä»¤æ¨¡å¼å…è®¸æ‚¨å°†æ“ä½œå°è£…åˆ°å¯¹è±¡ä¸­ã€‚å‘½ä»¤æ¨¡å¼èƒŒåçš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼Œæä¾›å°†å®¢æˆ·ç«¯ä¸æ¥æ”¶è€…è§£è€¦çš„æ–¹æ³•ã€‚

ç»´åŸºç™¾ç§‘è¿™æ ·æè¿°

> åœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­ï¼Œå‘½ä»¤æ¨¡å¼æ˜¯ä¸€ç§è¡Œä¸ºå‹è®¾è®¡æ¨¡å¼ï¼Œå®ƒå°†æ‰§è¡Œæ“ä½œæˆ–ç¨åè§¦å‘äº‹ä»¶æ‰€éœ€çš„å…¨éƒ¨ä¿¡æ¯å°è£…åˆ°ä¸€ä¸ªå¯¹è±¡ä¸­ã€‚ä¿¡æ¯åŒ…æ‹¬æ–¹æ³•åï¼Œæ‹¥æœ‰æ­¤æ–¹æ³•çš„å¯¹è±¡å’Œæ­¤æ–¹æ³•å‚æ•°çš„å€¼ã€‚

**ç¼–ç¨‹ç¤ºä¾‹**

é¦–å…ˆï¼Œæˆ‘ä»¬å®šä¹‰äº†æ¥æ”¶è€…ï¼Œå®ƒæ‹¥æœ‰å¯èƒ½ä¼šæ‰§è¡Œçš„æ¯ä¸ªæ–¹æ³•çš„å®ç°ã€‚

```js
// Receiver
class Bulb {
    turnOn() {
        console.log('ç‚¹äº®äº†ç¯æ³¡ï¼')
    }

    turnOff() {
        console.log('é»‘æš—ï¼')
    }
}
```

æˆ‘ä»¬å·²ç»æœ‰äº†æ¯ä¸ªå‘½ä»¤éƒ½éœ€è¦å®ç°çš„æ¥å£ï¼ŒåŸºäºè¿™ä¸ªæ¥å£ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ç»„å‘½ä»¤

```js
/**
 * Command interface
 *
 * execute()
 * undo()
 * redo()
 */

// Command
class TurnOnCommand {
    constructor(bulb) {
        this.bulb = bulb
    }

    execute() {
        this.bulb.turnOn()
    }

    undo() {
        this.bulb.turnOff()
    }

    redo() {
        this.execute()
    }
}

class TurnOffCommand {
    constructor(bulb) {
        this.bulb = bulb
    }

    execute() {
        this.bulb.turnOff()
    }

    undo() {
        this.bulb.turnOn()
    }

    redo() {
        this.execute()
    }
}
```

ä¹‹åï¼Œæˆ‘ä»¬å®šä¹‰äº† `Invoker`ï¼ˆè°ƒç”¨è€…ï¼‰ï¼Œç”±å®ƒæ¥å¤„ç†å®¢æˆ·ç«¯çš„äº¤äº’å‘½ä»¤

```js
// Invoker
class RemoteControl {
    submit(command) {
        command.execute()
    }
}
```

æœ€åï¼Œè®©æˆ‘ä»¬æ¥çœ‹çœ‹è¯¥å¦‚ä½•é€šè¿‡å®¢æˆ·ç«¯è°ƒç”¨å®ƒ

```js
const bulb = new Bulb()

const turnOn = new TurnOnCommand(bulb)
const turnOff = new TurnOffCommand(bulb)

const remote = new RemoteControl()
remote.submit(turnOn) // ç‚¹äº®äº†ç¯æ³¡ï¼
remote.submit(turnOff) // é»‘æš—ï¼
```

å‘½ä»¤æ¨¡å¼ä¹Ÿå¯ä»¥ç”¨æ¥å®ç°åŸºäºäº‹åŠ¡çš„ç³»ç»Ÿã€‚æ‚¨æ‰§è¡Œçš„å‘½ä»¤å°†ä¿å­˜åœ¨å†å²è®°å½•ä¸­ã€‚å¦‚æœæˆåŠŸæ‰§è¡Œäº†æœ€åçš„å‘½ä»¤ï¼Œä¸€åˆ‡éƒ½å¥½ï¼›å¦‚æœæ²¡æœ‰ï¼Œåˆ™å¯ä»¥æ ¹æ®å†å²è®°å½•ä¸æ–­å›æ»šï¼Œå¯¹æ‰€æœ‰å·²æ‰§è¡Œçš„å‘½ä»¤è¿›è¡Œ `undo`ï¼ˆæ’¤é”€ï¼‰æ“ä½œã€‚

### â¿ è¿­ä»£å™¨æ¨¡å¼ / Iterator

ç°å®ç”Ÿæ´»ä¸­çš„ä¾‹å­

> æ—§å¼æ”¶éŸ³æœºå°†æ˜¯è¿­ä»£å™¨æ¨¡å¼çš„å¥½ä¾‹å­ï¼Œç”¨æˆ·å¯ä»¥ä»æŸä¸ªå¹¿æ’­é¢‘é“å¼€å§‹ï¼Œä½¿ç”¨å‘åæˆ–å‘å‰çš„æŒ‰é’®æ¥æ”¶å¬å„ä¸ªå¹¿æ’­é¢‘é“ã€‚æˆ–è€…ä»¥ MP3 éŸ³ä¹æ’­æ”¾å™¨æˆ–ç”µè§†ä¸ºä¾‹ï¼Œæ‚¨å¯ä»¥æŒ‰ä¸‹å‘åæˆ–å‘å‰çš„æŒ‰é’®æ¥æµè§ˆè¿ç»­çš„é¢‘é“ï¼Œæ¢å¥è¯è¯´ï¼Œå®ƒä»¬éƒ½æä¾›äº†ä½¿ç”¨è¿­ä»£å™¨éå†å„ä¸ªé¢‘é“ï¼ŒéŸ³ä¹æˆ–å¹¿æ’­çš„æ¥å£ã€‚

ç®€å•æ¥è¯´

> è¿­ä»£å™¨æ¨¡å¼æä¾›äº†è®¿é—®å¯¹è±¡çš„æ‰€æœ‰å…ƒç´ çš„æ–¹æ³•ï¼Œè€Œä¸å¿…æš´éœ²å¯¹è±¡çš„åº•å±‚è¡¨ç°å½¢å¼ï¼ˆè¯‘è€…æ³¨ï¼šåˆ—è¡¨ã€æ ˆå’Œæ ‘ç­‰ï¼‰ã€‚

ç»´åŸºç™¾ç§‘è¿™æ ·æè¿°

> åœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­ï¼Œè¿­ä»£å™¨æ¨¡å¼æ˜¯ä¸€ç§ä½¿ç”¨è¿­ä»£å™¨éå†å®¹å™¨å¹¶è®¿é—®å…¶æ‰€æœ‰å…ƒç´ çš„è®¾è®¡æ¨¡å¼ã€‚è¿­ä»£å™¨æ¨¡å¼å¯ä»¥å°†ç®—æ³•ä¸å®¹å™¨è§£è€¦ï¼›ä½†åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œç®—æ³•æ˜¯å¿…ç„¶ç‰¹å®šäºå®¹å™¨çš„ï¼Œå› è€Œæ— æ³•è§£è€¦ã€‚

**ç¼–ç¨‹ç¤ºä¾‹**

ç¿»è¯‘ä¸€ä¸‹æˆ‘ä»¬ä¸Šé¢å¹¿æ’­ç”µå°çš„ä¾‹å­ã€‚é¦–å…ˆæˆ‘ä»¬å®šä¹‰äº† `RadioStation`ï¼ˆå¹¿æ’­ç”µå°ï¼‰ç±»ã€‚

```js
class RadioStation {
    constructor(frequency) {
        this.frequency = frequency
    }

    getFrequency() {
        return this.frequency
    }
}
```

æ¥ç€æˆ‘ä»¬å®šä¹‰äº†è¿­ä»£å™¨

```js
class StationList {
    constructor(){
        this.stations = []
    }

    addStation(station) {
        this.stations.push(station)
    }

    removeStation(toRemove) {
        const toRemoveFrequency = toRemove.getFrequency()
        this.stations = this.stations.filter(station => {
            return station.getFrequency() !== toRemoveFrequency
        })
    }
}
```

ç°åœ¨æˆ‘ä»¬å¯ä»¥è¿™æ ·ä½¿ç”¨å®ƒ

```js
const stationList = new StationList()

stationList.addStation(new RadioStation(89))
stationList.addStation(new RadioStation(101))
stationList.addStation(new RadioStation(102))
stationList.addStation(new RadioStation(103.2))

stationList.stations.forEach(station => console.log(station.getFrequency()))

stationList.removeStation(new RadioStation(89)) // å°†ç§»é™¤ 89 é¢‘é“çš„å¹¿æ’­ç”µå°
```

### ğŸ‘½ ä¸­ä»‹è€…æ¨¡å¼ / Mediator

ç°å®ç”Ÿæ´»ä¸­çš„ä¾‹å­

> ä¸€ä¸ªå¸¸è§çš„ä¾‹å­æ˜¯ï¼Œæ‚¨æ­£ä½¿ç”¨æ‚¨çš„æ‰‹æœºè·Ÿå…¶ä»–äººèŠå¤©ï¼Œåœ¨æ‚¨å’Œä»–ä»¬ä¹‹é—´å­˜åœ¨ä¸€ä¸ªç½‘ç»œæä¾›å•†ï¼Œæ‚¨å‘å‡ºçš„æ¶ˆæ¯å°†é€šè¿‡è¿™ä¸ªç½‘ç»œæä¾›å•†é€è¾¾ï¼Œè€Œéç›´æ¥å‘é€ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç½‘ç»œæä¾›å•†å……å½“äº†ä¸­ä»‹è€…çš„èº«ä»½ã€‚

ç®€å•æ¥è¯´

> ä¸­ä»‹è€…æ¨¡å¼åœ¨ä¸¤ä¸ªå¯¹è±¡ï¼ˆç§°ä½œâ€œåŒäº‹ç±»â€ï¼‰ä¹‹é—´æ·»åŠ äº†ä¸€ä¸ªç¬¬ä¸‰æ–¹å¯¹è±¡ï¼ˆç§°ä½œâ€œä¸­ä»‹è€…â€ï¼‰ï¼Œè¿›è€Œæ§åˆ¶è¿™ä¸¤ä¸ªå¯¹è±¡ä¹‹é—´çš„äº¤äº’ã€‚ä¸­ä»‹è€…æ¨¡å¼æœ‰åŠ©äºé™ä½ç±»ä¹‹é—´é€šä¿¡äº¤æµçš„è€¦åˆåº¦ã€‚å› ä¸ºç°åœ¨ï¼Œå®ƒä»¬ä¸å†éœ€è¦äº†è§£å¯¹æ–¹çš„å®ç°ç»†èŠ‚ã€‚

ç»´åŸºç™¾ç§‘è¿™æ ·æè¿°

> åœ¨è½¯ä»¶å·¥ç¨‹é¢†åŸŸï¼Œä¸­ä»‹è€…æ¨¡å¼å®šä¹‰äº†ä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡å°è£…äº†ä¸€ç»„å¯¹è±¡ä¹‹é—´äº¤äº’çš„æ–¹å¼ã€‚ä¸­ä»‹è€…æ¨¡å¼è¢«è®¤ä¸ºæ˜¯ä¸€ç§è¡Œä¸ºå‹è®¾è®¡æ¨¡å¼ï¼Œå› ä¸ºå®ƒå¯ä»¥æ”¹å˜ç¨‹åºè¿è¡Œæ—¶çš„è¡Œä¸ºã€‚

**ç¼–ç¨‹ç¤ºä¾‹**

ä¸‹é¢æ˜¯èŠå¤©å®¤ï¼ˆå³ä¸­ä»‹è€…ï¼‰çš„æœ€ç®€å•ç¤ºä¾‹ï¼Œå…¶ä¸­æœ‰è‹¥å¹²äº’ç›¸å‘é€æ¶ˆæ¯çš„ç”¨æˆ·ï¼ˆå³åŒäº‹ç±»ï¼‰

é¦–å…ˆæˆ‘ä»¬å®šä¹‰äº†ä¸­ä»‹è€…ï¼Œå³èŠå¤©å®¤

```js
// Mediator
class ChatRoom {
    showMessage(user, message) {
        const time = new Date()
        const sender = user.getName()

        console.log(time + '[' + sender + ']:' + message)
    }
}
```

æ¥ç€æˆ‘ä»¬å®šä¹‰äº†ç”¨æˆ·ï¼Œå³åŒäº‹ç±»

```js
class User {
    constructor(name, chatMediator) {
        this.name = name
        this.chatMediator = chatMediator
    }

    getName() {
        return this.name
    }

    send(message) {
        this.chatMediator.showMessage(this, message)
    }
}
```

å°±å¯ä»¥åƒè¿™æ ·ä½¿ç”¨äº†

```js
const mediator = new ChatRoom()

const john = new User('John Doe', mediator)
const jane = new User('Jane Doe', mediator)

john.send('ä½ å¥½ï¼')
jane.send('ä½ å¥½å“‡ï¼')

// è¾“å‡ºå¦‚ä¸‹
// Feb 14, 10:58 [John]: ä½ å¥½ï¼
// Feb 14, 10:58 [Jane]: ä½ å¥½å“‡ï¼
```

### ğŸ’¾ å¤‡å¿˜å½•æ¨¡å¼ / Memento

ç°å®ç”Ÿæ´»ä¸­çš„ä¾‹å­

> ä»¥è®¡ç®—å™¨ï¼ˆå³â€œåŸå‘å™¨â€ï¼‰ä¸ºä¾‹ï¼Œæ¯å½“æ‚¨æ‰§è¡Œäº†æŸäº›è®¡ç®—æ“ä½œæ—¶ï¼Œæœ€åä¸€æ¬¡è®¡ç®—çš„ç»“æœéƒ½ä¼šè¢«ä¿å­˜åˆ°å†…å­˜ï¼ˆå³â€œå¤‡å¿˜å½•â€ï¼‰ä¸­ï¼Œè¿™æ ·æ‚¨å°±å¯ä»¥é€šè¿‡æŒ‰ä¸‹æŸäº›æ“ä½œæŒ‰é’®ï¼ˆå³â€œè´Ÿè´£äººâ€ï¼‰æ¥æŸ¥çœ‹ï¼Œæˆ–è€…å¦‚æœå¯èƒ½çš„è¯ï¼Œæ¢å¤å®ƒã€‚

ç®€å•æ¥è¯´

> å¤‡å¿˜å½•æ¨¡å¼é€šè¿‡æŸç§æ–¹å¼æ•è·å¹¶ä¿å­˜å¯¹è±¡çš„å½“å‰çŠ¶æ€ï¼Œä»¥ä¾¿åœ¨ä¹‹åå¯ä»¥ä½¿ç”¨è½»æ¾çš„æ–¹å¼æ¢å¤ã€‚

ç»´åŸºç™¾ç§‘è¿™æ ·æè¿°

> å¤‡å¿˜å½•æ¨¡å¼æ˜¯ä¸€ç§æä¾›äº†æ¢å¤å¯¹è±¡åˆ°ä»¥å‰çŠ¶æ€ï¼ˆé€šè¿‡å›æ»šæ¥æ’¤é”€ï¼‰çš„èƒ½åŠ›çš„è½¯ä»¶è®¾è®¡æ¨¡å¼ã€‚

é€šå¸¸åœ¨æ‚¨éœ€è¦æä¾›æŸç§æ’¤é”€åŠŸèƒ½æ—¶ååˆ†æœ‰ç”¨ã€‚

**ç¼–ç¨‹ç¤ºä¾‹**

ä»¥æœ¬æ–‡ç¼–è¾‘å™¨ä¸ºä¾‹ï¼Œå®ƒä¸æ—¶åœ°ä¿å­˜å½“å‰çš„çŠ¶æ€ï¼Œå½“æ‚¨æƒ³è¦æ—¶åˆ™å¯ä»¥æ¢å¤

é¦–å…ˆæˆ‘ä»¬å®šä¹‰äº†å¤‡å¿˜å½•å¯¹è±¡ï¼Œå®ƒèƒ½å¤Ÿä¿å­˜ç¼–è¾‘å™¨çš„çŠ¶æ€

```js
class EditorMemento {
    constructor(content) {
        this._content = content
    }

    getContent() {
        return this._content
    }
}
```

æ¥ç€æˆ‘ä»¬å®šä¹‰äº†ç¼–è¾‘å™¨å¯¹è±¡ï¼Œå³åŸå‘å™¨ï¼Œå®ƒå°†ä¼šä½¿ç”¨åˆ°å¤‡å¿˜å½•å¯¹è±¡

```js
class Editor {
    constructor(){
        this._content = ''
    }

    type(words) {
        this._content = this._content + words
    }

    getContent() {
        return this._content
    }

    save() {
        return new EditorMemento(this._content)
    }

    restore(memento) {
        this._content = memento.getContent()
    }
}
```

æœ€åå¯ä»¥è¿™æ ·ä½¿ç”¨å®ƒ

```js
const editor = new Editor()

// è¾“å…¥ä¸€äº›æ–‡æœ¬
editor.type('æ—¥æœˆå¿½å…¶ä¸æ·¹å…®ï¼Œ')
editor.type('æ˜¥ä¸ç§‹å…¶ä»£åºã€‚')

// ä¿å­˜å½“å‰ç”¨äºæ¢å¤çš„çŠ¶æ€ï¼šæ—¥æœˆå¿½å…¶ä¸æ·¹å…®ï¼Œæ˜¥ä¸ç§‹å…¶ä»£åºã€‚
const saved = editor.save()

// å†è¾“å…¥ä¸€äº›æ–‡æœ¬
editor.type('æƒŸè‰æœ¨ä¹‹é›¶è½å…®ï¼Œæç¾äººä¹‹è¿Ÿæš®ã€‚')

// ä¸ä¿å­˜ï¼Œè¾“å‡ºå½“å‰å†…å®¹
console.log(editor.getContent())// æ—¥æœˆå¿½å…¶ä¸æ·¹å…®ï¼Œæ˜¥ä¸ç§‹å…¶ä»£åºã€‚æƒŸè‰æœ¨ä¹‹é›¶è½å…®ï¼Œæç¾äººä¹‹è¿Ÿæš®ã€‚

// æ¢å¤åˆ°ä¸Šæ¬¡ä¿å­˜çš„çŠ¶æ€
editor.restore(saved)

console.log(editor.getContent()) // æ—¥æœˆå¿½å…¶ä¸æ·¹å…®ï¼Œæ˜¥ä¸ç§‹å…¶ä»£åºã€‚
```

### ğŸ˜ è§‚å¯Ÿè€…æ¨¡å¼ / Observer

ï¼ˆä¹Ÿè¢«ç§°ä¸º _â€œå‘å¸ƒ-è®¢é˜…æ¨¡å¼â€_ ï¼‰

ç°å®ç”Ÿæ´»ä¸­çš„ä¾‹å­

> æ±‚èŒè€…å°±æ˜¯å¾ˆå¥½çš„ä¾‹å­ï¼Œä»–ä»¬ä¼šè®¢é˜…ä¸€äº›èŒä½å‘å¸ƒç½‘ç«™ï¼Œå½“æœ‰åŒ¹é…çš„å·¥ä½œæœºä¼šæ—¶é€šçŸ¥ä»–ä»¬ã€‚

ç®€å•æ¥è¯´

> è§‚å¯Ÿè€…æ¨¡å¼å®šä¹‰äº†å¯¹è±¡ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œæ¯å½“ä¸€ä¸ªå¯¹è±¡æ”¹å˜å®ƒçš„çŠ¶æ€æ—¶ï¼Œå®ƒçš„æ‰€æœ‰ä¾èµ–å¯¹è±¡å°†ä¼šå¾—åˆ°é€šçŸ¥ã€‚

ç»´åŸºç™¾ç§‘è¿™æ ·æè¿°

> è§‚å¯Ÿè€…æ¨¡å¼æ˜¯ä¸€ç§è½¯ä»¶è®¾è®¡æ¨¡å¼ï¼Œä¸€ä¸ªç›®æ ‡å¯¹è±¡ç®¡ç†æ‰€æœ‰ä¾èµ–äºå®ƒçš„è§‚å¯Ÿè€…å¯¹è±¡ï¼Œå¹¶åœ¨å®ƒçŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ä¸»åŠ¨é€šçŸ¥è§‚å¯Ÿè€…å¯¹è±¡ï¼Œè¿™é€šå¸¸æ˜¯é€šè¿‡è°ƒç”¨è§‚å¯Ÿè€…å¯¹è±¡çš„æŸä¸ªæ–¹æ³•æ¥å®ç°çš„ã€‚

**ç¼–ç¨‹ç¤ºä¾‹**

ç¿»è¯‘å‰é¢æˆ‘ä»¬çš„ä¾‹å­ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬å®šä¹‰äº†æ±‚èŒè€…ç±»ï¼Œå½“æœ‰æ–°çš„èŒä½å‘å¸ƒæ—¶ï¼Œä»–ä»¬å°†å¾—åˆ°é€šçŸ¥

```js
const JobPost = title => ({
    title: title
})

class JobSeeker {
    constructor(name) {
        this._name = name
    }

    notify(jobPost) {
        console.log(this._name, ' æ¥æ”¶äº†ä¸€ä¸ªæ–°èŒä½çš„é€šçŸ¥ï¼š', jobPost.title)
    }
}
```

æ¥ç€ï¼Œæˆ‘ä»¬å®šä¹‰äº†èŒä½å‘å¸ƒå…¬å‘Šæ ï¼Œä¾›æ±‚èŒè€…è®¢é˜…

```js
class JobBoard {
    constructor() {
        this._subscribers = []
    }

    subscribe(jobSeeker) {
        this._subscribers.push(jobSeeker)
    }

    addJob(jobPosting) {
        this._subscribers.forEach(subscriber => {
            subscriber.notify(jobPosting)
        })
    }
}
```

ç°åœ¨ï¼Œå¯ä»¥è¿™æ ·ä½¿ç”¨å®ƒ

```js
// åˆ›å»ºè®¢é˜…è€…
const johnDoe = new JobSeeker('John Doe')
const janeDoe = new JobSeeker('Jane Doe')
const kaneDoe = new JobSeeker('Kane Doe')

// åˆ›å»ºå‘å¸ƒè€…ï¼Œå¹¶ç»‘å®šè®¢é˜…è€…
const jobBoard = new JobBoard()
jobBoard.subscribe(johnDoe)
jobBoard.subscribe(janeDoe)

// æ·»åŠ ä¸€ä»½æ–°çš„èŒä½ï¼Œçœ‹çœ‹è®¢é˜…è€…æ˜¯å¦æ”¶åˆ°é€šçŸ¥
jobBoard.addJob(JobPost('è½¯ä»¶å·¥ç¨‹å¸ˆ'))

// è¾“å‡ºå¦‚ä¸‹
// John Doe æ¥æ”¶äº†ä¸€ä¸ªæ–°èŒä½çš„é€šçŸ¥ï¼šè½¯ä»¶å·¥ç¨‹å¸ˆ
// Jane Doe æ¥æ”¶äº†ä¸€ä¸ªæ–°èŒä½çš„é€šçŸ¥ï¼šè½¯ä»¶å·¥ç¨‹å¸ˆ
```

### ğŸƒ è®¿é—®è€…æ¨¡å¼ / Visitor

ç°å®ç”Ÿæ´»ä¸­çš„ä¾‹å­

> æœ‰äººå»æœæ‹œæ—…æ¸¸ã€‚ä»–ä»¬åªéœ€è¦é€šè¿‡ä¸€ç§æ–¹å¼ï¼ˆå³ç­¾è¯ï¼‰ä¾¿å¯è¿›å…¥æœæ‹œã€‚æŠµè¾¾ä¹‹åï¼Œä»–ä»¬å¯ä»¥è‡ªè¡Œå‚è§‚æœæ‹œçš„æ‰€æœ‰åœ°æ–¹ï¼Œè€Œä¸å¿…å¾å¾—è®¸å¯æˆ–æ˜¯ä¸ºè®¿é—®æŸåœ°è€Œè·‘è…¿ã€‚åªéœ€è¦è®©ä»–ä»¬çŸ¥é“åœ°ç‚¹ï¼Œä»–ä»¬å°±å¯ä»¥è®¿é—®å‚è§‚äº†ã€‚è®¿é—®è€…æ¨¡å¼å…è®¸æ‚¨åƒè¿™æ ·åšï¼Œå¸®åŠ©æ‚¨æ·»åŠ ä¸€äº›å¯ä»¥è®¿é—®çš„åœ°ç‚¹ï¼Œä»–ä»¬å°±å¯ä»¥è‡ªç”±è®¿é—®è€Œæ— éœ€åšé¢å¤–çš„è·‘è…¿å·¥ä½œã€‚

ç®€å•æ¥è¯´

> è®¿é—®è€…æ¨¡å¼å…è®¸æ‚¨ä¸ºå¯¹è±¡æ·»åŠ è¿›ä¸€æ­¥çš„æ“ä½œï¼Œè€Œæ— éœ€ä¿®æ”¹å®ƒä»¬ã€‚

ç»´åŸºç™¾ç§‘è¿™æ ·æè¿°

> åœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹å’Œè½¯ä»¶å·¥ç¨‹é¢†åŸŸï¼Œè®¿é—®è€…æ¨¡å¼æ˜¯ä¸€ç§å°†ç®—æ³•ï¼Œä»æ‰§è¡Œå®ƒçš„å¯¹è±¡çš„ç»“æ„ä¸­åˆ†ç¦»å‡ºæ¥çš„æ–¹å¼æ¨¡å¼ã€‚è¿™ç§åˆ†ç¦»å¸¦æ¥çš„å®é™…æ•ˆæœæ˜¯ï¼Œæä¾›äº†å‘å·²å­˜åœ¨å¯¹è±¡çš„ç»“æ„ä¸­æ·»åŠ æ–°çš„æ“ä½œæ–¹æ³•ï¼Œè€Œæ— éœ€ä¿®æ”¹è¿™äº›å¯¹è±¡çš„ç»“æ„çš„èƒ½åŠ›ã€‚å®ƒæ˜¯ä¸€ç§éµå¾ªå¼€é—­åŸåˆ™ï¼ˆOpenâ€“closed principleï¼‰çš„æ–¹æ³•ã€‚

**ç¼–ç¨‹ç¤ºä¾‹**

è®©æˆ‘ä»¬æ¨¡æ‹Ÿä¸€ä¸ªåŠ¨ç‰©å›­ä½œä¸ºä¾‹å­ï¼Œè¿™é‡Œæœ‰å‡ ç§ä¸åŒçš„åŠ¨ç‰©ï¼Œå®ƒä»¬ä¼šå‘å‡ºä¸åŒçš„å«å£°ã€‚ç°åœ¨ä½¿ç”¨è®¿é—®è€…æ¨¡å¼ç¿»è¯‘ä¸ºä»£ç è¯­è¨€

æˆ‘ä»¬å·²ç»å®ç°äº†åŠ¨ç‰©ç±»

```js
class Monkey {
    shout() {
        console.log('Ooh oo aa aa!')
    }

    accept(operation) {
        operation.visitMonkey(this)
    }
}

class Lion {
    roar() {
        console.log('Roaaar!')
    }

    accept(operation) {
        operation.visitLion(this)
    }
}

class Dolphin {
    speak() {
        console.log('Tuut tuttu tuutt!')
    }

    accept(operation) {
        operation.visitDolphin(this)
    }
}
```

æ¥ç€ï¼Œå®ç°æˆ‘ä»¬çš„è®¿é—®è€…

```js
const speak = {
    visitMonkey(monkey){
        monkey.shout()
    },
    visitLion(lion){
        lion.roar()
    },
    visitDolphin(dolphin){
        dolphin.speak()
    }
}
```

å®ƒå¯ä»¥è¿™æ ·ä½¿ç”¨

```js
const monkey = new Monkey()
const lion = new Lion()
const dolphin = new Dolphin()

monkey.accept(speak)    // Ooh oo aa aa!
lion.accept(speak)      // Roaaar!
dolphin.accept(speak)   // Tuut tutt tuutt!
```

æˆ‘ä»¬å¯ä»¥ç®€å•åœ°ä¸ºåŠ¨ç‰©ç±»æ·»åŠ å¯ç»§æ‰¿çš„å±‚æ¬¡ç»“æ„æ¥è®©åŠ¨ç‰©å‘å‡ºå«å£°ï¼Œä½†æ¥ä¸‹æ¥å½“æˆ‘ä»¬éœ€è¦ä¸ºåŠ¨ç‰©æ·»åŠ æ–°çš„è¡Œä¸ºæ—¶ï¼Œä¸å¾—ä¸å»ä¿®æ”¹åŠ¨ç‰©ç±»æœ¬èº«ã€‚ä½†ç°åœ¨ï¼Œæˆ‘ä»¬ä¸å†éœ€è¦ä¿®æ”¹åŠ¨ç‰©ç±»ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦ä¸ºåŠ¨ç‰©æ·»åŠ è·³è·ƒè¡Œä¸ºï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•åœ°åˆ›å»ºä¸€ä¸ªæ–°çš„è®¿é—®è€…æ¥å®ç°ï¼Œå¦‚ä¸‹æ‰€ç¤º

```js
const jump = {
    visitMonkey(monkey) {
        console.log('è·³äº† 20 è‹±å°ºé«˜ï¼è·³åˆ°äº†æ ‘ä¸Šå»ï¼')
    },
    visitLion(lion) {
        console.log('è·³äº† 7 è‹±å°ºé«˜ï¼å›åˆ°äº†åœ°ä¸Šï¼')
    },
    visitDolphin(dolphin) {
        console.log('æ¢å‡ºäº†æ°´é¢ä¸€ç‚¹éšåæ¶ˆå¤±äº†')
    }
}
```

åƒè¿™æ ·ä½¿ç”¨å®ƒ

```js
monkey.accept(speak)   // Ooh oo aa aa!
monkey.accept(jump)    // è·³äº† 20 è‹±å°ºé«˜ï¼è·³åˆ°äº†æ ‘ä¸Šå»ï¼

lion.accept(speak)     // Roaaar!
lion.accept(jump)      // è·³äº† 7 è‹±å°ºé«˜ï¼å›åˆ°äº†åœ°ä¸Šï¼

dolphin.accept(speak)  // Tuut tutt tuutt!
dolphin.accept(jump)   // æ¢å‡ºäº†æ°´é¢ä¸€ç‚¹éšåæ¶ˆå¤±äº†
```

### ğŸ’¡ ç­–ç•¥æ¨¡å¼ / Strategy

ç°å®ç”Ÿæ´»ä¸­çš„ä¾‹å­

> è€ƒè™‘æ’åºçš„ä¾‹å­ï¼Œæˆ‘ä»¬å®ç°äº†å†’æ³¡æ’åºï¼Œä½†éšç€æ•°æ®é‡çš„å¢é•¿ï¼Œå†’æ³¡æ’åºå˜å¾—éå¸¸æ…¢ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬åˆå®ç°äº†å¿«é€Ÿæ’åºã€‚ä½†ç°åœ¨ï¼Œå°½ç®¡å¿«é€Ÿæ’åºç®—æ³•åœ¨å¤„ç†è¾ƒå¤§æ•°æ®é›†æ—¶è¡¨ç°å¾—å¾ˆå¥½ï¼Œä½†å®ƒåœ¨å¤„ç†è¾ƒå°æ•°æ®é›†æ—¶ä¼šå˜å¾—éå¸¸æ…¢ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ç§ç­–ç•¥ï¼Œå½“å¤„ç†è¾ƒå°æ•°æ®é›†æ—¶ï¼Œé‡‡ç”¨å†’æ³¡æ’åºç®—æ³•ï¼›å¤„ç†è¾ƒå¤§æ•°æ®é›†æ—¶ï¼Œé‡‡ç”¨å¿«é€Ÿæ’åºç®—æ³•ã€‚

ç®€å•æ¥è¯´

> ç­–ç•¥æ¨¡å¼å…è®¸æ‚¨æ ¹æ®å®é™…æƒ…å†µåˆ‡æ¢ä½¿ç”¨çš„ç®—æ³•æˆ–ç­–ç•¥ã€‚

ç»´åŸºç™¾ç§‘è¿™æ ·æè¿°

> åœ¨è®¡ç®—æœºç¼–ç¨‹ä¸­ï¼Œç­–ç•¥æ¨¡å¼ï¼ˆStrategy patternï¼Œä¹Ÿè¢«ç§°ä¸º Policy patternï¼‰æ˜¯ä¸€ç§å…è®¸åœ¨è¿è¡Œæ—¶é€‰æ‹©ç®—æ³•è¡Œä¸ºçš„è¡Œä¸ºå‹è®¾è®¡æ¨¡å¼ã€‚

**ç¼–ç¨‹ç¤ºä¾‹**

ç¿»è¯‘ä¸Šé¢æˆ‘ä»¬çš„ä¾‹å­ï¼Œé€šè¿‡ JavaScript çš„ç±»å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾å®ç°è¿™ä¸¤ç§ç­–ç•¥

```js
const bubbleSort = dataset => {
    console.log('ä½¿ç”¨å†’æ³¡æ’åº')
    // ...
    // ...
    return dataset
}

const quickSort = dataset => {
    console.log('ä½¿ç”¨å¿«é€Ÿæ’åº')
    // ...
    // ...
    return dataset
}
```

æ¥ç€æˆ‘ä»¬å®šä¹‰äº†å®¢æˆ·ç«¯ï¼Œå®ƒå°†å†³å®šä½¿ç”¨ä½•ç§ç­–ç•¥

```js
const sorter = dataset => {
    if(dataset.length > 5){
        return quickSort
    } else {
        return bubbleSort
    }
}
```

æœ€åï¼Œå¯ä»¥è¿™æ ·ä½¿ç”¨å®ƒ

```js
const longDataSet = [1, 5, 4, 3, 2, 8]
const shortDataSet = [1, 5, 4]

const sorter1 = sorter(longDataSet)
const sorter2 = sorter(shortDataSet)

sorter1(longDataSet) // Output : ä½¿ç”¨å¿«é€Ÿæ’åº
sorter2(shortDataSet) // Output : ä½¿ç”¨å†’æ³¡æ’åº
```

### ğŸ’¢ çŠ¶æ€æ¨¡å¼ / State

ç°å®ç”Ÿæ´»ä¸­çš„ä¾‹å­

> æƒ³è±¡æ‚¨æ­£åœ¨ä½¿ç”¨æŸç§ç»˜ç”»åº”ç”¨ï¼Œæ‚¨é€‰æ‹©äº†ä¸€ç§ç”»ç¬”æ¥ç”»å›¾ã€‚ç°åœ¨ï¼Œç”»ç¬”å°†æ ¹æ®æ‚¨é€‰æ‹©çš„é¢œè‰²æ”¹å˜å®ƒçš„è¡Œä¸ºï¼Œå³å¦‚æœæ‚¨é€‰æ‹©äº†çº¢è‰²ï¼Œé‚£ä¹ˆå°†ä»¥çº¢è‰²ç”»å›¾ï¼Œå¦‚æœé€‰æ‹©äº†è“è‰²åˆ™ä»¥è“è‰²ç”»å›¾ã€‚

ç®€å•æ¥è¯´

> çŠ¶æ€æ¨¡å¼å…è®¸æ‚¨åœ¨çŠ¶æ€å˜åŒ–æ—¶ï¼Œæ”¹å˜ç±»çš„è¡Œä¸ºã€‚

ç»´åŸºç™¾ç§‘è¿™æ ·æè¿°

> çŠ¶æ€æ¨¡å¼æ˜¯ä¸€ç§ä»¥é¢å‘å¯¹è±¡çš„å½¢å¼ï¼Œå®ç°çŠ¶æ€æœºçš„è¡Œä¸ºå‹è®¾è®¡æ¨¡å¼ã€‚åœ¨çŠ¶æ€æ¨¡å¼ä¸­ï¼Œé€šè¿‡å°†æ¯ä¸ªå•ç‹¬çš„çŠ¶æ€å®ç°ä¸ºçŠ¶æ€æ¨¡å¼æ¥å£çš„æ´¾ç”Ÿç±»ï¼Œå¹¶é€šè¿‡è°ƒç”¨æ­¤æ¨¡å¼è¶…ç±»å®šä¹‰çš„æ–¹æ³•å®ç°çŠ¶æ€è½¬æ¢ï¼Œæœ€ç»ˆå®ç°äº†çŠ¶æ€æœºã€‚
> çŠ¶æ€æ¨¡å¼å¯ä»¥çœ‹ä½œèƒ½å¤Ÿé€šè¿‡è°ƒç”¨æ­¤æ¨¡å¼çš„æ¥å£æ‰€å®šä¹‰çš„æ–¹æ³•ï¼Œæ¥æ”¹å˜å½“å‰ç­–ç•¥çš„ç­–ç•¥æ¨¡å¼ã€‚

**ç¼–ç¨‹ç¤ºä¾‹**

ä»¥æ–‡æœ¬ç¼–è¾‘å™¨ä¸ºä¾‹ï¼Œå®ƒå…è®¸æ‚¨æ”¹å˜è¾“å…¥æ–‡æœ¬çš„çŠ¶æ€ï¼Œå³å¦‚æœæ‚¨é€‰æ‹©äº†åŠ ç²—ï¼Œå°±å¼€å§‹è¾“å…¥åŠ ç²—çš„æ–‡æœ¬ï¼Œå¦‚æœé€‰æ‹©äº†æ–œä½“åˆ™è¾“å…¥æ–œä½“çš„æ–‡æœ¬ç­‰ç­‰ã€‚

é¦–å…ˆæˆ‘ä»¬ç¼–å†™äº†æ”¹å˜è¾“å…¥æ–‡æœ¬çŠ¶æ€çš„å‡½æ•°

```js
const upperCase = inputString => inputString.toUpperCase()
const lowerCase = inputString => inputString.toLowerCase()
const defaultTransform = inputString => inputString
```

æ¥ç€æˆ‘ä»¬ç¼–å†™äº†æ–‡æœ¬ç¼–è¾‘å™¨ç±»

```js
class TextEditor {
    constructor(transform) {
        this._transform = transform
    }

    setTransform(transform) {
        this._transform = transform
    }

    type(words) {
        console.log(this._transform(words))
    }
}
```

æœ€åå¯ä»¥åƒè¿™æ ·ä½¿ç”¨å®ƒ

```js
const editor = new TextEditor(defaultTransform)

editor.type('First line')

editor.setTransform(upperCase)

editor.type('Second line')
editor.type('Third line')

editor.setTransform(lowerCase)

editor.type('Fourth line')
editor.type('Fifth line')

// è¾“å‡ºï¼š
// First line
// SECOND LINE
// THIRD LINE
// fourth line
// fifth line
```

### ğŸ“’ æ¨¡æ¿æ–¹æ³•æ¨¡å¼ / Template Method

ç°å®ç”Ÿæ´»ä¸­çš„ä¾‹å­

> å‡è®¾æˆ‘ä»¬æ‰“ç®—ç›–ä¸€äº›æˆ¿å­ã€‚å»ºæˆ¿å­çš„æ­¥éª¤å¯èƒ½åƒè¿™æ ·
>
> - æ‰“åœ°åŸº
> - ç­‘å¢™å£
> - ç›–å±‹é¡¶
> - åŠ æ¥¼å±‚
>
> ä¸Šè¿°æ­¥éª¤çš„é¡ºåºä¸èƒ½è¢«æ”¹å˜ï¼Œå³åœ¨ç­‘å¥½å¢™å£ä¹‹å‰æ‚¨æ²¡æ³•ç›–ä¸Šå±‹é¡¶ã€‚ä½†æ¯ä¸€ä¸ªæ­¥éª¤éƒ½å¯ä»¥è¢«ä¿®æ”¹ï¼Œä¾‹å¦‚å¯ä»¥ä½¿ç”¨æœ¨å¤´ã€èšé…¯çº¤ç»´æˆ–çŸ³å¤´æ¥ç­‘å»ºå¢™å£ã€‚
  
ç®€å•æ¥è¯´

> æ¨¡æ¿æ–¹æ³•æ¨¡å¼å®šä¹‰äº†å¦‚ä½•æ‰§è¡ŒæŸäº›ç®—æ³•çš„æ¡†æ¶ï¼Œä½†å°†è¿™äº›æ­¥éª¤çš„å…·ä½“å®ç°æ¨è¿Ÿåˆ°äº†å­ç±»ã€‚

ç»´åŸºç™¾ç§‘è¿™æ ·æè¿°

> åœ¨è½¯ä»¶å·¥ç¨‹é¢†åŸŸï¼Œæ¨¡æ¿æ–¹æ³•æ¨¡å¼æ˜¯ä¸€ç§è¡Œä¸ºå‹è®¾è®¡æ¨¡å¼ã€‚æ¨¡æ¿æ–¹æ³•æ˜¯è¶…ç±»ä¸­çš„æ–¹æ³•ï¼Œé€šå¸¸æ˜¯æŠ½è±¡è¶…ç±»ï¼Œå®ƒæ ¹æ®å¤§é‡çš„é«˜çº§æ­¥éª¤æ¥å®šä¹‰æ“ä½œçš„æ¡†æ¶ã€‚è¿™äº›æ­¥éª¤æœ¬èº«ç”±ä¸æ¨¡æ¿æ–¹æ³•ä¸­ç›¸åŒçš„ç±»ä¸­é™„åŠ çš„å¸®åŠ©ç±»æ–¹æ³•å®ç°ã€‚

**ç¼–ç¨‹ç¤ºä¾‹**

æƒ³è±¡æˆ‘ä»¬åœ¨ç¼–å†™ä¸€ä¸ªå·¥å…·ï¼Œå®ƒèƒ½å¸®åŠ©æˆ‘ä»¬æµ‹è¯•ä»£ç ï¼Œæ£€æŸ¥ä»£ç æ ¼å¼ï¼Œæ„å»ºåº”ç”¨ï¼Œç”Ÿæˆæ„å»ºæŠ¥å‘Šï¼ˆå³ä»£ç è¦†ç›–ç‡ï¼Œä»£ç æ ¼å¼æ£€æŸ¥ç»“æœç­‰ï¼‰ä»¥åŠå°†æˆ‘ä»¬çš„åº”ç”¨éƒ¨ç½²åˆ°æµ‹è¯•æœåŠ¡å™¨ä¸Šã€‚

é¦–å…ˆæˆ‘ä»¬ç¼–å†™äº†åŸºç±»ï¼Œå®ƒæŒ‡å®šäº†æ„å»ºç®—æ³•çš„æ¡†æ¶

```js
class Builder {
    // æ¨¡æ¿æ–¹æ³•
    build() {
        this.test()
        this.lint()
        this.assemble()
        this.deploy()
    }
}
```

ç°åœ¨æˆ‘ä»¬ç¼–å†™äº†å®ƒçš„å…·ä½“å®ç°

```js
class AndroidBuilder extends Builder {
    test() {
        console.log('æ‰§è¡Œå®‰å“ä»£ç æµ‹è¯•')
    }

    lint() {
        console.log('æ£€æŸ¥å®‰å“ä»£ç æ ¼å¼')
    }

    assemble() {
        console.log('å¯åŠ¨å®‰å“åº”ç”¨æ„å»º')
    }

    deploy() {
        console.log('éƒ¨ç½²å®‰å“åº”ç”¨åˆ°æœåŠ¡å™¨')
    }
}

class IosBuilder extends Builder {
    test() {
        console.log('æ‰§è¡Œ IOS ä»£ç æµ‹è¯•')
    }

    lint() {
        console.log('æ£€æŸ¥ IOS ä»£ç æ ¼å¼')
    }

    assemble() {
        console.log('å¯åŠ¨ IOS åº”ç”¨æ„å»º')
    }

    deploy() {
        console.log('éƒ¨ç½² IOS åº”ç”¨åˆ°æœåŠ¡å™¨')
    }
}
```

æœ€åå¯ä»¥è¿™æ ·ä½¿ç”¨å®ƒ

```js
const androidBuilder = new AndroidBuilder()
androidBuilder.build()

// è¾“å‡ºï¼š
// æ‰§è¡Œå®‰å“ä»£ç æµ‹è¯•
// æ£€æŸ¥å®‰å“ä»£ç æ ¼å¼
// å¯åŠ¨å®‰å“åº”ç”¨æ„å»º
// éƒ¨ç½²å®‰å“åº”ç”¨åˆ°æœåŠ¡å™¨

const iosBuilder = new IosBuilder()
iosBuilder.build()

// è¾“å‡ºï¼š
// æ‰§è¡Œ IOS ä»£ç æµ‹è¯•
// æ£€æŸ¥ IOS ä»£ç æ ¼å¼
// å¯åŠ¨ IOS åº”ç”¨æ„å»º
// éƒ¨ç½² IOS åº”ç”¨åˆ°æœåŠ¡å™¨
```

## ğŸš¦ å°¾å£° / Wrap Up Folks

åˆ°è¿™é‡Œæ•™ç¨‹çš„æ­£æ–‡å†…å®¹å°±ç»“æŸäº†ã€‚æˆ‘ä¼šæŒç»­æ”¹è¿›è¿™ç¯‡æ•™ç¨‹ï¼Œä¹Ÿè®¸æ‚¨ä»¥åæƒ³è¦é‡æ–°è®¿é—®è¿™ä¸ªä»“åº“æ¥æŸ¥çœ‹æœ€æ–°çš„å†…å®¹ï¼Œä¸å¦¨ç‚¹ä¸€ä¸ªå…³æ³¨ä»¥åŠæ˜Ÿæ ‡ã€‚å¯¹äº†ï¼Œæˆ‘è®¡åˆ’æ’°å†™åŒæ ·é£æ ¼çš„è½¯ä»¶ä½“ç³»æ¶æ„æ•™ç¨‹ï¼Œå¸Œæœ›æ‚¨ç»§ç»­å…³æ³¨ã€‚

## ğŸ‘¬ å‚ä¸è´¡çŒ® / Contribution

- åé¦ˆé—®é¢˜ / Report issues
- æ‹‰å–è¯·æ±‚ï¼Œæ”¹è¿›æ–‡æ¡£ / Open pull request with improvements
- åˆ†äº«æ­¤ä»“åº“ / Spread the word

## ğŸ”‘ é¡¹ç›®è®¸å¯ / License

MIT Â© [LolipopJ](https://github.com/LolipopJ)

æœ¬é¡¹ç›®åŸºäº [Design Patterns for Humans](https://github.com/kamranahmedse/design-patterns-for-humans)ï¼Œæ¡ˆä¾‹çš„ JavaScript ä»£ç æ¥è‡ª [JavaScript Design Patterns for Humans](https://github.com/sohamkamani/javascript-design-patterns-for-humans)ã€‚
