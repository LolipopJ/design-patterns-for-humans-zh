<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>献给中文读者的设计模式教程</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="apple-touch-icon" sizes="180x180" href="/design-patterns-for-humans-zh/favicon-180.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/design-patterns-for-humans-zh/favicon-32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/design-patterns-for-humans-zh/favicon-16.png">
    <link rel="shortcut icon" href="/design-patterns-for-humans-zh/favicon.ico">
    <meta name="description" content="对设计模式的超简单解读！的另一个中文译本。">
    
    <link rel="preload" href="/design-patterns-for-humans-zh/assets/css/0.styles.225eff94.css" as="style"><link rel="preload" href="/design-patterns-for-humans-zh/assets/js/app.bd9d272e.js" as="script"><link rel="preload" href="/design-patterns-for-humans-zh/assets/js/2.6b578c18.js" as="script"><link rel="preload" href="/design-patterns-for-humans-zh/assets/js/7.dc0c925c.js" as="script"><link rel="prefetch" href="/design-patterns-for-humans-zh/assets/js/3.4d2a580f.js"><link rel="prefetch" href="/design-patterns-for-humans-zh/assets/js/4.1ec4d5f4.js"><link rel="prefetch" href="/design-patterns-for-humans-zh/assets/js/5.657d4fd9.js"><link rel="prefetch" href="/design-patterns-for-humans-zh/assets/js/6.3d277fb6.js">
    <link rel="stylesheet" href="/design-patterns-for-humans-zh/assets/css/0.styles.225eff94.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/design-patterns-for-humans-zh/" aria-current="page" class="home-link router-link-exact-active router-link-active"><!----> <span class="site-name">献给中文读者的设计模式教程</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="选择编程语言" class="dropdown-title"><span class="title">选择编程语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="选择编程语言" class="mobile-dropdown-title"><span class="title">选择编程语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/design-patterns-for-humans-zh/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  JavaScript
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/kamranahmedse/design-patterns-for-humans" target="_blank" rel="noopener noreferrer" class="nav-link external">
  英文原文
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/LolipopJ/design-patterns-for-humans-zh" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="选择编程语言" class="dropdown-title"><span class="title">选择编程语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="选择编程语言" class="mobile-dropdown-title"><span class="title">选择编程语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/design-patterns-for-humans-zh/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  JavaScript
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/kamranahmedse/design-patterns-for-humans" target="_blank" rel="noopener noreferrer" class="nav-link external">
  英文原文
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/LolipopJ/design-patterns-for-humans-zh" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span></span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/design-patterns-for-humans-zh/#🚀-介绍-introduction" class="sidebar-link">🚀 介绍 / Introduction</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/design-patterns-for-humans-zh/#⚠️-请注意-be-careful" class="sidebar-link">⚠️ 请注意 / Be Careful</a></li><li class="sidebar-sub-header"><a href="/design-patterns-for-humans-zh/#🐢-在开始之前-before-you-start" class="sidebar-link">🐢 在开始之前 / Before you start</a></li></ul></li><li><a href="/design-patterns-for-humans-zh/#🏗️-创建型设计模式-creational-design-patterns" class="sidebar-link">🏗️ 创建型设计模式 / Creational Design Patterns</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/design-patterns-for-humans-zh/#🏠-简单工厂模式-simple-factory" class="sidebar-link">🏠 简单工厂模式 / Simple Factory</a></li><li class="sidebar-sub-header"><a href="/design-patterns-for-humans-zh/#🏭-工厂方法模式-factory-method" class="sidebar-link">🏭 工厂方法模式 / Factory Method</a></li><li class="sidebar-sub-header"><a href="/design-patterns-for-humans-zh/#🔨-抽象工厂模式-abstract-factory" class="sidebar-link">🔨 抽象工厂模式 / Abstract Factory</a></li><li class="sidebar-sub-header"><a href="/design-patterns-for-humans-zh/#👷-生成器模式-builder" class="sidebar-link">👷 生成器模式 / Builder</a></li><li class="sidebar-sub-header"><a href="/design-patterns-for-humans-zh/#🐑-原型模式-prototype" class="sidebar-link">🐑 原型模式 / Prototype</a></li><li class="sidebar-sub-header"><a href="/design-patterns-for-humans-zh/#💍-单例模式-singleton" class="sidebar-link">💍 单例模式 / Singleton</a></li></ul></li><li><a href="/design-patterns-for-humans-zh/#🔩-结构型设计模式-structural-design-patterns" class="sidebar-link">🔩 结构型设计模式 / Structural Design Patterns</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/design-patterns-for-humans-zh/#🔌-适配器模式-adapter" class="sidebar-link">🔌 适配器模式 / Adapter</a></li><li class="sidebar-sub-header"><a href="/design-patterns-for-humans-zh/#🚡-桥接模式-bridge" class="sidebar-link">🚡 桥接模式 / Bridge</a></li><li class="sidebar-sub-header"><a href="/design-patterns-for-humans-zh/#🌿-组合模式-composite" class="sidebar-link">🌿 组合模式 / Composite</a></li><li class="sidebar-sub-header"><a href="/design-patterns-for-humans-zh/#☕-装饰器模式-decorator" class="sidebar-link">☕ 装饰器模式 / Decorator</a></li><li class="sidebar-sub-header"><a href="/design-patterns-for-humans-zh/#📦-门面模式-facade" class="sidebar-link">📦 门面模式 / Facade</a></li><li class="sidebar-sub-header"><a href="/design-patterns-for-humans-zh/#🍃-享元模式-flyweight" class="sidebar-link">🍃 享元模式 / Flyweight</a></li><li class="sidebar-sub-header"><a href="/design-patterns-for-humans-zh/#🎱-代理模式-proxy" class="sidebar-link">🎱 代理模式 / Proxy</a></li></ul></li><li><a href="/design-patterns-for-humans-zh/#🤹-行为型设计模式-behavioral-design-patterns" class="sidebar-link">🤹 行为型设计模式 / Behavioral Design Patterns</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/design-patterns-for-humans-zh/#🔗-责任链模式-chain-of-responsibility" class="sidebar-link">🔗 责任链模式 / Chain of Responsibility</a></li><li class="sidebar-sub-header"><a href="/design-patterns-for-humans-zh/#👮-命令模式-command" class="sidebar-link">👮 命令模式 / Command</a></li><li class="sidebar-sub-header"><a href="/design-patterns-for-humans-zh/#➿-迭代器模式-iterator" class="sidebar-link">➿ 迭代器模式 / Iterator</a></li><li class="sidebar-sub-header"><a href="/design-patterns-for-humans-zh/#👽-中介者模式-mediator" class="sidebar-link">👽 中介者模式 / Mediator</a></li><li class="sidebar-sub-header"><a href="/design-patterns-for-humans-zh/#💾-备忘录模式-memento" class="sidebar-link">💾 备忘录模式 / Memento</a></li><li class="sidebar-sub-header"><a href="/design-patterns-for-humans-zh/#😎-观察者模式-observer" class="sidebar-link">😎 观察者模式 / Observer</a></li><li class="sidebar-sub-header"><a href="/design-patterns-for-humans-zh/#🏃-访问者模式-visitor" class="sidebar-link">🏃 访问者模式 / Visitor</a></li><li class="sidebar-sub-header"><a href="/design-patterns-for-humans-zh/#💡-策略模式-strategy" class="sidebar-link">💡 策略模式 / Strategy</a></li><li class="sidebar-sub-header"><a href="/design-patterns-for-humans-zh/#💢-状态模式-state" class="sidebar-link">💢 状态模式 / State</a></li><li class="sidebar-sub-header"><a href="/design-patterns-for-humans-zh/#📒-模板方法模式-template-method" class="sidebar-link">📒 模板方法模式 / Template Method</a></li></ul></li><li><a href="/design-patterns-for-humans-zh/#🚦-尾声-wrap-up-folks" class="sidebar-link">🚦 尾声 / Wrap Up Folks</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/design-patterns-for-humans-zh/#👬-参与贡献-contribution" class="sidebar-link">👬 参与贡献 / Contribution</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/design-patterns-for-humans-zh/#🔑-项目许可-license" class="sidebar-link">🔑 项目许可 / License</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p><a href="https://github.com/LolipopJ/design-patterns-for-humans-zh" target="_blank" rel="noopener noreferrer">本项目<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>仍在翻译过程中，当前仅作参考使用</p></div> <img src="/design-patterns-for-humans-zh/cover.png" alt="献给中文读者的设计模式教程 / Design Patterns for Humans ZH"> <hr> <div align="center"><p>
🎉 对设计模式的超简单解读！ 🎉
</p> <p>
设计模式的话题经常害得我们心神不宁。在这里，我将试着用尽可能简单的方式来解释它们，让它们深深地刻在您（还有我）的脑海里。
</p> <p>
本项目基于 <a href="https://github.com/kamranahmedse/design-patterns-for-humans">Design Patterns for Humans</a>，案例的 JavaScript 代码来自 <a href="https://github.com/sohamkamani/javascript-design-patterns-for-humans">JavaScript Design Patterns for Humans</a>。
</p></div> <hr> <p>译者在学习的过程中，想要使用自己的语言风格来翻译这篇“给人类写的”设计模式教程。奈何才疏学浅，如有谬误，敬请斧正。</p> <p>如果您喜欢这篇教程，不妨看看项目的原作者的<a href="http://sohamkamani.com" target="_blank" rel="noopener noreferrer">博客<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，或是在 <a href="https://twitter.com/sohamkamani" target="_blank" rel="noopener noreferrer">Twitter<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 上跟他打声招呼。</p> <h1 id="献给中文读者的设计模式教程-design-patterns-for-humans-zh"><a href="#献给中文读者的设计模式教程-design-patterns-for-humans-zh" class="header-anchor">#</a> 献给中文读者的设计模式教程 / Design Patterns for Humans ZH</h1> <h2 id="🚀-介绍-introduction"><a href="#🚀-介绍-introduction" class="header-anchor">#</a> 🚀 介绍 / Introduction</h2> <p>设计模式是为<strong>解决某些普遍存在的问题</strong>提出的<strong>方案与指导原则</strong>。它们不是类，程序包或库文件，没法直接放到您的应用程序里然后等待神奇的事情发生。确切地说，它们是一种指导原则，旨在告诉您可以选用某种方法，来解决某些问题。</p> <blockquote><p>设计模式是为解决某些普遍存在的问题提出的方案与指导原则。</p></blockquote> <p>维基百科这样描述它们：</p> <blockquote><p>在软件工程领域，软件设计模式是为软件设计过程中，对给定上下文普遍存在的问题，所提出的通用、可重用的解决方案。它不是完整的设计实现，无法直接转译为源代码或机器码。正相反，它是面向如何解决问题的描述或模板，并可以在很多不同的情况下使用。</p></blockquote> <h3 id="⚠️-请注意-be-careful"><a href="#⚠️-请注意-be-careful" class="header-anchor">#</a> ⚠️ 请注意 / Be Careful</h3> <ul><li>设计模式并不是解决您所有问题的万全之策。</li> <li>不要强迫去使用它们；否则很可能发生不好的事情。</li> <li>请记住，设计模式是一种指导方案，用来<strong>解决</strong>问题，而不是<strong>找到</strong>问题；所以不要想太多。</li> <li>如果在正确的地方以正确的方式使用设计模式，它们或许能成为您的得力帮手；否则可能导致您的代码混乱不堪。</li></ul> <h3 id="🐢-在开始之前-before-you-start"><a href="#🐢-在开始之前-before-you-start" class="header-anchor">#</a> 🐢 在开始之前 / Before you start</h3> <ul><li>所有的设计模式示例都基于 JavaScript 的 <a href="https://github.com/lukehoban/es6features" target="_blank" rel="noopener noreferrer">ES6<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 规范实现。</li> <li>由于 JavaScript 中不存在实现接口的说法，因此我们在代码示例中使用了隐式接口，这意味着只有一个类具有一个接口应当有的属性和方法，这个类就被认为实现了这个接口。为了让您更容易分辨当前正在使用的接口，我们在每个示例中都添加了注释信息。</li></ul> <h2 id="🏗️-创建型设计模式-creational-design-patterns"><a href="#🏗️-创建型设计模式-creational-design-patterns" class="header-anchor">#</a> 🏗️ 创建型设计模式 / Creational Design Patterns</h2> <p>简单来说</p> <blockquote><p>创建型设计模式关注如何实例化一个对象，或一组相关的对象。</p></blockquote> <p>维基百科这样描述</p> <blockquote><p>在软件工程领域，创建型设计模式是处理对象创建机制的设计模式，试图以符合要求的方式来创建对象。创建对象的基础方式可能导致设计问题或增加设计复杂度。创建型设计模式通过以某种方式控制对象创建的过程，来解决这个问题。</p></blockquote> <h3 id="🏠-简单工厂模式-simple-factory"><a href="#🏠-简单工厂模式-simple-factory" class="header-anchor">#</a> 🏠 简单工厂模式 / Simple Factory</h3> <p>现实生活中的例子</p> <blockquote><p>想象，您正在修建一栋房子，但是您需要门。您可以穿上木匠的衣服，拿上木头、胶水、钉子以及所有需要的工具，在您的房子里亲自制作这个门；或者，您只需要打个电话给工厂，让他们把制造好的门送到您身边，这样您不必了解任何关于制作门的知识，也不必处理制作门所带来的麻烦。</p></blockquote> <p>简单来说</p> <blockquote><p>简单工厂只是为客户端生成一个实例，而不向客户端暴露任何实例化操作的逻辑。</p></blockquote> <p>维基百科这样描述</p> <blockquote><p>在面向对象编程（OOP）中，工厂是用于创建其它对象的对象——更准确地说，工厂是一个函数或方法，通过调用它的某个方法（假设为 &quot;new&quot;）可以返回拥有不同原型或类的对象。</p></blockquote> <p><strong>编程示例</strong></p> <p>首先，我们定义了门的接口和并实现了它</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * Door
 * getWidth()
 * getHeight()
 */</span>

<span class="token keyword">class</span> <span class="token class-name">WoodenDoor</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">width<span class="token punctuation">,</span> height</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>width <span class="token operator">=</span> width
    <span class="token keyword">this</span><span class="token punctuation">.</span>height <span class="token operator">=</span> height
  <span class="token punctuation">}</span>

  <span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>width
  <span class="token punctuation">}</span>

  <span class="token function">getHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>height
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>接下来，我们创建了制造并返回门的工厂</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> DoorFactory <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">makeDoor</span> <span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">width<span class="token punctuation">,</span> height</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token class-name">WoodenDoor</span><span class="token punctuation">(</span>width<span class="token punctuation">,</span> height<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>最后，可以这样使用工厂</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 给我制造一个 100x200 的门</span>
<span class="token keyword">const</span> door <span class="token operator">=</span> DoorFactory<span class="token punctuation">.</span><span class="token function">makeDoor</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Width:'</span><span class="token punctuation">,</span> door<span class="token punctuation">.</span><span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Height:'</span><span class="token punctuation">,</span> door<span class="token punctuation">.</span><span class="token function">getHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">// 给我制造一个 50x100 的门</span>
<span class="token keyword">const</span> door <span class="token operator">=</span> DoorFactory<span class="token punctuation">.</span><span class="token function">makeDoor</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>什么时候使用？</strong></p> <p>当创建一个对象不仅仅是赋值操作，而是会涉及到一些逻辑过程时，把它放到一个专用的工厂中（而不是在每个地方编写重复的代码）是很有意义的。</p> <h3 id="🏭-工厂方法模式-factory-method"><a href="#🏭-工厂方法模式-factory-method" class="header-anchor">#</a> 🏭 工厂方法模式 / Factory Method</h3> <p>现实生活中的例子</p> <blockquote><p>以招聘经理为例。一个人不可能对每一个职位都进行面试。根据职位空缺情况，她必须决定面试的步骤，并将其委派给不同的人。</p></blockquote> <p>简单来说</p> <blockquote><p>工厂方法模式提供了一种将实例化的逻辑分派给子类的方法。</p></blockquote> <p>维基百科这样描述</p> <blockquote><p>在基于类的编程中，工厂方法模式是一种创建型模式，它使用工厂方法来处理创建对象的问题，而不必指定将要创建的对象所基于的具体类。这是通过调用工厂方法来创建对象所实现的——要么在接口中指定并由子类实现，要么在基类中实现并可选地由派生类覆盖——而不是通过调用构造函数实现。</p></blockquote> <p><strong>编程示例</strong></p> <p>以上面的招聘经理为例。首先我们定义一个面试官接口和它的一些实现</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * Interviewer interface
 *
 * askQuestions()
 */</span>

<span class="token keyword">class</span> <span class="token class-name">Developer</span> <span class="token punctuation">{</span>
  <span class="token function">askQuestions</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'提出设计模式问题！'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">CommunityExecutive</span> <span class="token punctuation">{</span>
  <span class="token function">askQuestions</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'提出社区建设问题！'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>现在让我们编写我们的 <code>HiringManager</code>（招聘经理）</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">HiringManager</span> <span class="token punctuation">{</span>
        
    <span class="token function">takeInterview</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> interviewer <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">makeInterviewer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        interviewer<span class="token punctuation">.</span><span class="token function">askQuestions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>现在所有的子类都可以继承它并提供需要的面试官</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">DevelopmentManager</span> <span class="token keyword">extends</span> <span class="token class-name">HiringManager</span> <span class="token punctuation">{</span>
    <span class="token function">makeInterviewer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Developer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">MarketingManager</span> <span class="token keyword">extends</span> <span class="token class-name">HiringManager</span> <span class="token punctuation">{</span>
    <span class="token function">makeInterviewer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">CommunityExecutive</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>最后，我们可以这样使用它</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> devManager <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DevelopmentManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
devManager<span class="token punctuation">.</span><span class="token function">takeInterview</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 输出：提出设计模式问题！</span>

<span class="token keyword">const</span> marketingManager <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MarketingManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
marketingManager<span class="token punctuation">.</span><span class="token function">takeInterview</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 输出：提出社区建设问题！</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>什么时候使用？</strong></p> <p>当类中存在一些通用的处理过程，但需要的子类在运行时动态决定时，工厂方法模式非常有用。换句话说，当客户端不知道它可能需要什么具体的子类时。</p> <h3 id="🔨-抽象工厂模式-abstract-factory"><a href="#🔨-抽象工厂模式-abstract-factory" class="header-anchor">#</a> 🔨 抽象工厂模式 / Abstract Factory</h3> <p>现实生活中的例子</p> <blockquote><p>现在让我们拓展简单工厂模式里门的例子。根据您的需要，您可能会从木门店买到木门，从铁门店买到铁门，或是从相应的商店买到塑料门。此外，您可能需要有着不同专业能力的师傅来安装这些门，比如让木匠安装木门，让焊工安装铁门等等。正如您所看到的，现在门（与人）之间有一种依赖关系，木门需要木匠，铁门需要焊工等等。</p></blockquote> <p>简单来说</p> <blockquote><p>工厂的工厂；一个工厂，它将独立但是相关（或互相依赖）的工厂组成一组，而不用指定这些工厂的具体类。</p></blockquote> <p>维基百科这样描述</p> <blockquote><p>抽象工厂模式提供了一种封装一组具有共同主题的独立工厂的方法，而不必指定它们的具体类。</p></blockquote> <p><strong>编程示例</strong></p> <p>根据上面门的例子。首先，我们定义了 <code>Door</code>（门）接口和它的一些实现</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * Door interface :
 *
 * getDescription()
 */</span>

<span class="token keyword">class</span> <span class="token class-name">WoodenDoor</span> <span class="token punctuation">{</span>
    <span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'我是一个木门'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">IronDoor</span> <span class="token punctuation">{</span>
    <span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'我是一个铁门'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>接着我们为每一种类型的门定义了安装师傅</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * DoorFittingExpert interface :
 *
 * getDescription()
 */</span>

<span class="token keyword">class</span> <span class="token class-name">Welder</span> <span class="token punctuation">{</span>
    <span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'我只能安装木门'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Carpenter</span> <span class="token punctuation">{</span>
    <span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'我只能安装铁门'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>现在我们有了抽象工厂，它允许我们创建一系列相关联的对象。比如，木门工厂能够制造木门和提供木门安装师傅，铁门工厂能够制造铁门和提供铁门安装师傅。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * DoorFactory interface :
 *
 * makeDoor()
 * makeFittingExpert()
 */</span>

<span class="token comment">// 返回木匠和木门的木门工厂</span>
<span class="token keyword">class</span> <span class="token class-name">WoodenDoorFactory</span> <span class="token punctuation">{</span>
    <span class="token function">makeDoor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">WoodenDoor</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token function">makeFittingExpert</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Carpenter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 获得铁门和相应安装师傅的铁门工厂</span>
<span class="token keyword">class</span> <span class="token class-name">IronDoorFactory</span> <span class="token punctuation">{</span>
    <span class="token function">makeDoor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">IronDoor</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token function">makeFittingExpert</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Welder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><p>最后我们可以这样使用它</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>woodenFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WoodenDoorFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

door <span class="token operator">=</span> woodenFactory<span class="token punctuation">.</span><span class="token function">makeDoor</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
expert <span class="token operator">=</span> woodenFactory<span class="token punctuation">.</span><span class="token function">makeFittingExpert</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

door<span class="token punctuation">.</span><span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// 输出：我是一个木门</span>
expert<span class="token punctuation">.</span><span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 输出：我只能安装木门</span>

<span class="token comment">// 铁门工厂和上面一样</span>
ironFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IronDoorFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

door <span class="token operator">=</span> ironFactory<span class="token punctuation">.</span><span class="token function">makeDoor</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
expert <span class="token operator">=</span> ironFactory<span class="token punctuation">.</span><span class="token function">makeFittingExpert</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

door<span class="token punctuation">.</span><span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// 输出：我是一个铁门</span>
expert<span class="token punctuation">.</span><span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 输出：我只能安装铁门</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>正如您看到的，木门工厂已经封装了 <code>carpenter</code>（木匠）和 <code>wooden door</code>（木门），铁门工厂已经封装了 <code>iron door</code>（铁门）和 <code>welder</code>（焊工）。因此，它确保了对于每一个制造出来的门，我们都能得到正确的安装师傅。</p> <p><strong>什么时候使用？</strong></p> <p>当对象之间存在相互依赖的关系，涉及的创建逻辑并不那么简单时。</p> <h3 id="👷-生成器模式-builder"><a href="#👷-生成器模式-builder" class="header-anchor">#</a> 👷 生成器模式 / Builder</h3> <p>译注：又名<strong>建造模式</strong>。</p> <p>现实生活中的例子</p> <blockquote><p>想象您在哈帝斯汉堡店里，点了一份“大哈迪汉堡”，接着店员就把汉堡递给你，<em>毫无疑问</em> 这是一个简单工厂的例子。但是在一些情况下汉堡的制作可能会包括更多的步骤逻辑。举个例子，您想要一份定制的汉堡，关于汉堡的制作您有很多选项：想要什么面包？喜欢哪款酱汁？想吃哪种奶酪？诸如此类。在这种情况下，就需要用到生成器模式了。</p></blockquote> <p>简单来说</p> <blockquote><p>生成器模式允许您创建不同风格的对象，同时避免污染构造函数。当一个对象可能存在多种风格时，或者当一个对象的创建过程包含很多步骤时，生成器模式非常有用。</p></blockquote> <p>维基百科这样描述</p> <blockquote><p>生成器模式是一种创建型软件设计模式，旨在找出重叠构造函数反面模式（Telescopic Constructor Anti-pattern）的一个解决方案。</p></blockquote> <p>既然已经提到，那么请允许我补充一下什么是重叠构造函数反面模式。在某一时刻我们都看到了这样一个构造函数：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">size<span class="token punctuation">,</span> cheese <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span> pepperoni <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span> tomato <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span> lettuce <span class="token operator">=</span> <span class="token boolean">true</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ... </span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>正如您所看见的，构造函数的参数数量很快就会失控，理解参数的含义也可能因此变得困难。此外，如果在以后您还想添加更多的构造选项，它的参数列表还会继续增长。这就被称作重叠构造函数反面模式。</p> <p><strong>编程示例</strong></p> <p>明智的选择是使用生成器模式。首先我们定义我们想要制作的汉堡</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Burger</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">builder</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>size <span class="token operator">=</span> builder<span class="token punctuation">.</span>size
        <span class="token keyword">this</span><span class="token punctuation">.</span>cheeze <span class="token operator">=</span> builder<span class="token punctuation">.</span>cheeze <span class="token operator">||</span> <span class="token boolean">false</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>pepperoni <span class="token operator">=</span> builder<span class="token punctuation">.</span>pepperoni <span class="token operator">||</span> <span class="token boolean">false</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>lettuce <span class="token operator">=</span> builder<span class="token punctuation">.</span>lettuce <span class="token operator">||</span> <span class="token boolean">false</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>tomato <span class="token operator">=</span> builder<span class="token punctuation">.</span>tomato <span class="token operator">||</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>接着我们编写了生成器</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">BurgerBuilder</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">size</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>size <span class="token operator">=</span> size
    <span class="token punctuation">}</span>

    <span class="token function">addPepperoni</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>pepperoni <span class="token operator">=</span> <span class="token boolean">true</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span>
    <span class="token punctuation">}</span>

    <span class="token function">addLettuce</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>lettuce <span class="token operator">=</span> <span class="token boolean">true</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span>
    <span class="token punctuation">}</span>

    <span class="token function">addCheeze</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>cheeze <span class="token operator">=</span> <span class="token boolean">true</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span>
    <span class="token punctuation">}</span>

    <span class="token function">addTomato</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>tomato <span class="token operator">=</span> <span class="token boolean">true</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span>
    <span class="token punctuation">}</span>

    <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Burger</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><p>最后可以这样使用它</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> burger <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BurgerBuilder</span><span class="token punctuation">(</span><span class="token number">14</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">addPepperoni</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">addLettuce</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">addTomato</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>JavaScript 版本特别提示</strong>：当您发现一个函数或方法的参数太多（一般超过 2 个参数都被认为是太多）时，应当使用一个对象参数，来取代多个参数。理由有二：</p> <ol><li>它可以让您的代码看上去更整洁，因为只有一个参数。</li> <li>您不需要担心参数的顺序，因为参数将根据对象的命名属性传递。</li></ol> <p>举个例子，应当使用：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> burger <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Burger</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    size <span class="token operator">:</span> <span class="token number">14</span><span class="token punctuation">,</span>
    pepperoni <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    cheeze <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    lettuce <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    tomato <span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>来取代：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> burger <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Burger</span><span class="token punctuation">(</span><span class="token number">14</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>什么时候使用？</strong></p> <p>当一个对象可能有多种风格，并想要避免重叠构造函数时。与工厂模式的关键区别是，当创建对象过程只有一个步骤时，应使用工厂模式；当创建对象过程存在多个步骤时，应使用生成器模式。</p> <h3 id="🐑-原型模式-prototype"><a href="#🐑-原型模式-prototype" class="header-anchor">#</a> 🐑 原型模式 / Prototype</h3> <p>现实生活中的例子</p> <blockquote><p>还记得多莉吗？那只被克隆的羊！让我们聊聊克隆这件事儿，当然，不谈细节，只谈它的关键点所在。</p></blockquote> <p>简单来说</p> <blockquote><p>基于已存在的对象，通过克隆创建新的对象。</p></blockquote> <p>维基百科这样描述</p> <blockquote><p>在软件开发领域，原型模式是一种创建型设计模式。当创建的对象类型由一个原型实例确定时，使用原型模式，这个原型实例将被克隆来生成新的对象。</p></blockquote> <p>简而言之，原型模式允许您创建已存在对象的副本，并根据您的需要修改这个副本，而不用经历从头开始创建新的对象并配置整个对象的麻烦。</p> <p><strong>编程示例</strong></p> <p>首先我们定义了我们想要克隆的羊</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Sheep</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> category <span class="token operator">=</span> <span class="token string">&quot;山羊&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>category <span class="token operator">=</span> category<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">setName</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">setCategory</span><span class="token punctuation">(</span><span class="token parameter">category</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>category <span class="token operator">=</span> category<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">getCategory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>category<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>现在我们有了一个羊原型（SheepPrototype）的类，它将克隆给定了原型的对象。它的构造函数接受类型为羊的原型</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">SheepPrototype</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">proto</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>proto <span class="token operator">=</span> proto<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Sheep</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>proto<span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>proto<span class="token punctuation">.</span>category<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>最后我们可以这样使用它</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> originalSheep <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sheep</span><span class="token punctuation">(</span><span class="token string">&quot;Jolly&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
originalSheep<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Jolly</span>
originalSheep<span class="token punctuation">.</span><span class="token function">getCategory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 山羊</span>
<span class="token comment">// 克隆并根据需要修改</span>
<span class="token keyword">const</span> prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SheepPrototype</span><span class="token punctuation">(</span>originalSheep<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> clonedSheep <span class="token operator">=</span> prototype<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
clonedSheep<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;Dolly&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
clonedSheep<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Dolly</span>
clonedSheep<span class="token punctuation">.</span><span class="token function">getCategory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 山羊</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><strong>JavaScript 版本特别提示</strong>：此编程示例是原型模式的经典实现，但是 JavaScript 能够使用<a href="https://developer.mozilla.org/zh-CN/docs/Learn/JavaScript/Objects/Object_prototypes" target="_blank" rel="noopener noreferrer">内建原型工具<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>更有效地实现原型模式。</p> <p><strong>什么时候使用？</strong></p> <p>当需要的对象与现有的对象很相似时；或与克隆的方式相比，直接创建对象的成本更高时。</p> <h3 id="💍-单例模式-singleton"><a href="#💍-单例模式-singleton" class="header-anchor">#</a> 💍 单例模式 / Singleton</h3> <p>现实生活中的例子</p> <blockquote><p>在一个国家里同时只能有一位总统。当职责需要时，这位总统就必须采取行动。这里的总统即是单例。</p></blockquote> <p>简单来说</p> <blockquote><p>确保只创建了特定类的唯一对象。</p></blockquote> <p>维基百科这样描述</p> <blockquote><p>在软件工程领域，单例模式是一种软件设计模式，它将类的实例化限制为一个对象。当只需要一个对象来协助整个系统的运行时，单例模式很有帮助。</p></blockquote> <p>实际上，单例模式被认为是一种反面模式（Anti-pattern），应当避免过度使用它。单例模式不一定总是不好的，也能够有一些有效的用例，但仍应当谨慎使用它，因为它会在您的应用中引入全局状态，在一个地方对它的修改可能会影响到其它地方，并且调试起来可能会变得非常困难。使用单例模式的另一个坏处是，它会使您的代码紧密耦合，此外模拟（Mock，译者注：在单元测试中，常用 Mock 的方法来模拟构造一些复杂或不容易获取的对象）单例可能会很困难。</p> <p><strong>编程示例</strong></p> <p>在 JavaScript 中，单例可以使用模块模式实现。私有变量和方法隐藏在函数闭包中，而公有方法选择地暴露出去。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> president <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">const</span> presidentsPrivateInformation <span class="token operator">=</span> <span class="token string">'Super private'</span>

    <span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token string">'Turd Sandwich'</span>

    <span class="token keyword">const</span> <span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> name

    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        getName
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>在这里，<code>presidentsPrivateInformation</code> 和 <code>name</code> 为私有变量。但是，<code>name</code> 可以通过对外暴露的 <code>president.getName</code> 方法访问到。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>president<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 输出：'Turd Sandwich'</span>
president<span class="token punctuation">.</span>name <span class="token comment">// 输出：undefined</span>
president<span class="token punctuation">.</span>presidentsPrivateInformation <span class="token comment">// 输出：undefined</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="🔩-结构型设计模式-structural-design-patterns"><a href="#🔩-结构型设计模式-structural-design-patterns" class="header-anchor">#</a> 🔩 结构型设计模式 / Structural Design Patterns</h2> <p>In plain words</p> <blockquote><p>Structural patterns are mostly concerned with object composition or in other words how the entities can use each other. Or yet another explanation would be, they help in answering &quot;How to build a software component?&quot;</p></blockquote> <p>Wikipedia says</p> <blockquote><p>In software engineering, structural design patterns are design patterns that ease the design by identifying a simple way to realize relationships between entities.</p></blockquote> <h3 id="🔌-适配器模式-adapter"><a href="#🔌-适配器模式-adapter" class="header-anchor">#</a> 🔌 适配器模式 / Adapter</h3> <p>Real world example</p> <blockquote><p>Consider that you have some pictures in your memory card and you need to transfer them to your computer. In order to transfer them you need some kind of adapter that is compatible with your computer ports so that you can attach memory card to your computer. In this case card reader is an adapter.
Another example would be the famous power adapter a three legged plug can't be connected to a two pronged outlet, it needs to use a power adapter that makes it compatible with the two pronged outlet.
Yet another example would be a translator translating words spoken by one person to another</p></blockquote> <p>In plain words</p> <blockquote><p>Adapter pattern lets you wrap an otherwise incompatible object in an adapter to make it compatible with another class.</p></blockquote> <p>Wikipedia says</p> <blockquote><p>In software engineering, the adapter pattern is a software design pattern that allows the interface of an existing class to be used as another interface. It is often used to make existing classes work with others without modifying their source code.</p></blockquote> <p><strong>Programmatic Example</strong></p> <p>Consider a game where there is a hunter and he hunts lions.</p> <p>First we have an interface <code>Lion</code> that all types of lions have to implement</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/*
Lion interface :

roar()
*/</span>

<span class="token keyword">class</span> <span class="token class-name">AfricanLion</span>  <span class="token punctuation">{</span>
    <span class="token function">roar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">AsianLion</span>  <span class="token punctuation">{</span>
    <span class="token function">roar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>And hunter expects any implementation of <code>Lion</code> interface to hunt.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Hunter</span> <span class="token punctuation">{</span>
    <span class="token function">hunt</span><span class="token punctuation">(</span><span class="token parameter">lion</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// ... some code before</span>
        lion<span class="token punctuation">.</span><span class="token function">roar</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token comment">//... some code after</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>Now let's say we have to add a <code>WildDog</code> in our game so that hunter can hunt that also. But we can't do that directly because dog has a different interface. To make it compatible for our hunter, we will have to create an adapter that is compatible</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// This needs to be added to the game</span>
<span class="token keyword">class</span> <span class="token class-name">WildDog</span> <span class="token punctuation">{</span>
    <span class="token function">bark</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// Adapter around wild dog to make it compatible with our game</span>
<span class="token keyword">class</span> <span class="token class-name">WildDogAdapter</span> <span class="token punctuation">{</span>

    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">dog</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>dog <span class="token operator">=</span> dog<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token function">roar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>dog<span class="token punctuation">.</span><span class="token function">bark</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>And now the <code>WildDog</code> can be used in our game using <code>WildDogAdapter</code>.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>wildDog <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WildDog</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
wildDogAdapter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WildDogAdapter</span><span class="token punctuation">(</span>wildDog<span class="token punctuation">)</span>

hunter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Hunter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
hunter<span class="token punctuation">.</span><span class="token function">hunt</span><span class="token punctuation">(</span>wildDogAdapter<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="🚡-桥接模式-bridge"><a href="#🚡-桥接模式-bridge" class="header-anchor">#</a> 🚡 桥接模式 / Bridge</h3> <p>Real world example</p> <blockquote><p>Consider you have a website with different pages and you are supposed to allow the user to change the theme. What would you do? Create multiple copies of each of the pages for each of the themes or would you just create separate theme and load them based on the user's preferences? Bridge pattern allows you to do the second i.e.</p></blockquote> <p><img src="https://cloud.githubusercontent.com/assets/11269635/23065293/33b7aea0-f515-11e6-983f-98823c9845ee.png" alt="With and without the bridge pattern"></p> <p>In Plain Words</p> <blockquote><p>Bridge pattern is about preferring composition over inheritance. Implementation details are pushed from a hierarchy to another object with a separate hierarchy.</p></blockquote> <p>Wikipedia says</p> <blockquote><p>The bridge pattern is a design pattern used in software engineering that is meant to &quot;decouple an abstraction from its implementation so that the two can vary independently&quot;</p></blockquote> <p><strong>Programmatic Example</strong></p> <p>Translating our WebPage example from above. Here we have the <code>WebPage</code> hierarchy</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/*
Webpage interface :

constructor(theme)
getContent()
*/</span>

<span class="token keyword">class</span> <span class="token class-name">About</span><span class="token punctuation">{</span> 
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">theme</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>theme <span class="token operator">=</span> theme
    <span class="token punctuation">}</span>
    
    <span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;About page in &quot;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>theme<span class="token punctuation">.</span><span class="token function">getColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Careers</span><span class="token punctuation">{</span>
   <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">theme</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token keyword">this</span><span class="token punctuation">.</span>theme <span class="token operator">=</span> theme
   <span class="token punctuation">}</span>
   
   <span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token keyword">return</span> <span class="token string">&quot;Careers page in &quot;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>theme<span class="token punctuation">.</span><span class="token function">getColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token punctuation">}</span> 
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p>And the separate theme hierarchy</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/*
Theme interface :

getColor()
*/</span>

<span class="token keyword">class</span> <span class="token class-name">DarkTheme</span><span class="token punctuation">{</span>
    <span class="token function">getColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">'Dark Black'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">LightTheme</span><span class="token punctuation">{</span>
    <span class="token function">getColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">'Off white'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">AquaTheme</span><span class="token punctuation">{</span>
    <span class="token function">getColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">'Light blue'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>And both the hierarchies</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> darkTheme <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DarkTheme</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> about <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">About</span><span class="token punctuation">(</span>darkTheme<span class="token punctuation">)</span>
<span class="token keyword">const</span> careers <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Careers</span><span class="token punctuation">(</span>darkTheme<span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>about<span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token comment">// &quot;About page in Dark Black&quot;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>careers<span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token comment">// &quot;Careers page in Dark Black&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="🌿-组合模式-composite"><a href="#🌿-组合模式-composite" class="header-anchor">#</a> 🌿 组合模式 / Composite</h3> <p>Real world example</p> <blockquote><p>Every organization is composed of employees. Each of the employees has same features i.e. has a salary, has some responsibilities, may or may not report to someone, may or may not have some subordinates etc.</p></blockquote> <p>In plain words</p> <blockquote><p>Composite pattern lets clients to treat the individual objects in a uniform manner.</p></blockquote> <p>Wikipedia says</p> <blockquote><p>In software engineering, the composite pattern is a partitioning design pattern. The composite pattern describes that a group of objects is to be treated in the same way as a single instance of an object. The intent of a composite is to &quot;compose&quot; objects into tree structures to represent part-whole hierarchies. Implementing the composite pattern lets clients treat individual objects and compositions uniformly.</p></blockquote> <p><strong>Programmatic Example</strong></p> <p>Taking our employees example from above. Here we have different employee types</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/*
Employee interface :

constructor(name, salary)
getName()
setSalary()
getSalary()
getRoles()
*/</span>

<span class="token keyword">class</span> <span class="token class-name">Developer</span> <span class="token punctuation">{</span>

    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> salary</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
        <span class="token keyword">this</span><span class="token punctuation">.</span>salary <span class="token operator">=</span> salary
    <span class="token punctuation">}</span>

    <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name
    <span class="token punctuation">}</span>

    <span class="token function">setSalary</span><span class="token punctuation">(</span><span class="token parameter">salary</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>salary <span class="token operator">=</span> salary
    <span class="token punctuation">}</span>

    <span class="token function">getSalary</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>salary
    <span class="token punctuation">}</span>

    <span class="token function">getRoles</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>roles
    <span class="token punctuation">}</span>

    <span class="token function">develop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">/* */</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Designer</span> <span class="token punctuation">{</span>

    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> salary</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
        <span class="token keyword">this</span><span class="token punctuation">.</span>salary <span class="token operator">=</span> salary
    <span class="token punctuation">}</span>

    <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name
    <span class="token punctuation">}</span>

    <span class="token function">setSalary</span><span class="token punctuation">(</span><span class="token parameter">salary</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>salary <span class="token operator">=</span> salary
    <span class="token punctuation">}</span>

    <span class="token function">getSalary</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>salary
    <span class="token punctuation">}</span>

    <span class="token function">getRoles</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>roles
    <span class="token punctuation">}</span>

    <span class="token function">design</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">/* */</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br></div></div><p>Then we have an organization which consists of several different types of employees</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Organization</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>employees <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>

    <span class="token function">addEmployee</span><span class="token punctuation">(</span><span class="token parameter">employee</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>employees<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>employee<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token function">getNetSalaries</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> netSalary <span class="token operator">=</span> <span class="token number">0</span>

        <span class="token keyword">this</span><span class="token punctuation">.</span>employees<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">employee</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            netSalary <span class="token operator">+=</span> employee<span class="token punctuation">.</span><span class="token function">getSalary</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>

        <span class="token keyword">return</span> netSalary
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>And then it can be used as</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// Prepare the employees</span>
<span class="token keyword">const</span> john <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Developer</span><span class="token punctuation">(</span><span class="token string">'John Doe'</span><span class="token punctuation">,</span> <span class="token number">12000</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> jane <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Designer</span><span class="token punctuation">(</span><span class="token string">'Jane'</span><span class="token punctuation">,</span> <span class="token number">10000</span><span class="token punctuation">)</span>

<span class="token comment">// Add them to organization</span>
<span class="token keyword">const</span> organization <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Organization</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
organization<span class="token punctuation">.</span><span class="token function">addEmployee</span><span class="token punctuation">(</span>john<span class="token punctuation">)</span>
organization<span class="token punctuation">.</span><span class="token function">addEmployee</span><span class="token punctuation">(</span>jane<span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Net salaries: &quot;</span> <span class="token punctuation">,</span> organization<span class="token punctuation">.</span><span class="token function">getNetSalaries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// Net Salaries: 22000</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="☕-装饰器模式-decorator"><a href="#☕-装饰器模式-decorator" class="header-anchor">#</a> ☕ 装饰器模式 / Decorator</h3> <p>Real world example</p> <blockquote><p>Imagine you run a car service shop offering multiple services. Now how do you calculate the bill to be charged? You pick one service and dynamically keep adding to it the prices for the provided services till you get the final cost. Here each type of service is a decorator.</p></blockquote> <p>In plain words</p> <blockquote><p>Decorator pattern lets you dynamically change the behavior of an object at run time by wrapping them in an object of a decorator class.</p></blockquote> <p>Wikipedia says</p> <blockquote><p>In object-oriented programming, the decorator pattern is a design pattern that allows behavior to be added to an individual object, either statically or dynamically, without affecting the behavior of other objects from the same class. The decorator pattern is often useful for adhering to the Single Responsibility Principle, as it allows functionality to be divided between classes with unique areas of concern.</p></blockquote> <p><strong>Programmatic Example</strong></p> <p>Lets take coffee for example. First of all we have a simple coffee implementing the coffee interface</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/*
Coffee interface:
getCost()
getDescription()
*/</span>

<span class="token keyword">class</span> <span class="token class-name">SimpleCoffee</span><span class="token punctuation">{</span>

    <span class="token function">getCost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token number">10</span>
    <span class="token punctuation">}</span>

    <span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">'Simple coffee'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>We want to make the code extensible to allow options to modify it if required. Lets make some add-ons (decorators)</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">MilkCoffee</span> <span class="token punctuation">{</span>


    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">coffee</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>coffee <span class="token operator">=</span> coffee
    <span class="token punctuation">}</span>

    <span class="token function">getCost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>coffee<span class="token punctuation">.</span><span class="token function">getCost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">2</span>
    <span class="token punctuation">}</span>

    <span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>coffee<span class="token punctuation">.</span><span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">', milk'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">WhipCoffee</span> <span class="token punctuation">{</span>

    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">coffee</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>coffee <span class="token operator">=</span> coffee
    <span class="token punctuation">}</span>

    <span class="token function">getCost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>coffee<span class="token punctuation">.</span><span class="token function">getCost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">5</span>
    <span class="token punctuation">}</span>

    <span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>coffee<span class="token punctuation">.</span><span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">', whip'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">VanillaCoffee</span> <span class="token punctuation">{</span>

    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">coffee</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>coffee <span class="token operator">=</span> coffee
    <span class="token punctuation">}</span>

    <span class="token function">getCost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>coffee<span class="token punctuation">.</span><span class="token function">getCost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">3</span>
    <span class="token punctuation">}</span>

    <span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>coffee<span class="token punctuation">.</span><span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">', vanilla'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br></div></div><p>Lets make a coffee now</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> someCoffee

someCoffee <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>someCoffee<span class="token punctuation">.</span><span class="token function">getCost</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">// 10</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>someCoffee<span class="token punctuation">.</span><span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">// Simple Coffee</span>

someCoffee <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MilkCoffee</span><span class="token punctuation">(</span>someCoffee<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>someCoffee<span class="token punctuation">.</span><span class="token function">getCost</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">// 12</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>someCoffee<span class="token punctuation">.</span><span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">// Simple Coffee, milk</span>

someCoffee <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WhipCoffee</span><span class="token punctuation">(</span>someCoffee<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>someCoffee<span class="token punctuation">.</span><span class="token function">getCost</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">// 17</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>someCoffee<span class="token punctuation">.</span><span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">// Simple Coffee, milk, whip</span>

someCoffee <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VanillaCoffee</span><span class="token punctuation">(</span>someCoffee<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>someCoffee<span class="token punctuation">.</span><span class="token function">getCost</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">// 20</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>someCoffee<span class="token punctuation">.</span><span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">// Simple Coffee, milk, whip, vanilla</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="📦-门面模式-facade"><a href="#📦-门面模式-facade" class="header-anchor">#</a> 📦 门面模式 / Facade</h3> <p>译注：也常被译为<strong>外观模式</strong>。</p> <p>Real world example</p> <blockquote><p>How do you turn on the computer? &quot;Hit the power button&quot; you say! That is what you believe because you are using a simple interface that computer provides on the outside, internally it has to do a lot of stuff to make it happen. This simple interface to the complex subsystem is a facade.</p></blockquote> <p>In plain words</p> <blockquote><p>Facade pattern provides a simplified interface to a complex subsystem.</p></blockquote> <p>Wikipedia says</p> <blockquote><p>A facade is an object that provides a simplified interface to a larger body of code, such as a class library.</p></blockquote> <p><strong>Programmatic Example</strong>
Taking our computer example from above. Here we have the computer class</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Computer</span> <span class="token punctuation">{</span>

    <span class="token function">getElectricShock</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Ouch!'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token function">makeSound</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Beep beep!'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token function">showLoadingScreen</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Loading..'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token function">bam</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Ready to be used!'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token function">closeEverything</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Bup bup bup buzzzz!'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token function">sooth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Zzzzz'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token function">pullCurrent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Haaah!'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><p>Here we have the facade</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">ComputerFacade</span>
<span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">computer</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>computer <span class="token operator">=</span> computer
    <span class="token punctuation">}</span>

    <span class="token function">turnOn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>computer<span class="token punctuation">.</span><span class="token function">getElectricShock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>computer<span class="token punctuation">.</span><span class="token function">makeSound</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>computer<span class="token punctuation">.</span><span class="token function">showLoadingScreen</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>computer<span class="token punctuation">.</span><span class="token function">bam</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token function">turnOff</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>computer<span class="token punctuation">.</span><span class="token function">closeEverything</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>computer<span class="token punctuation">.</span><span class="token function">pullCurrent</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>computer<span class="token punctuation">.</span><span class="token function">sooth</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>Now to use the facade</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> computer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ComputerFacade</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Computer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
computer<span class="token punctuation">.</span><span class="token function">turnOn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// Ouch! Beep beep! Loading.. Ready to be used!</span>
computer<span class="token punctuation">.</span><span class="token function">turnOff</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// Bup bup buzzz! Haah! Zzzzz</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="🍃-享元模式-flyweight"><a href="#🍃-享元模式-flyweight" class="header-anchor">#</a> 🍃 享元模式 / Flyweight</h3> <p>Real world example</p> <blockquote><p>Did you ever have fresh tea from some stall? They often make more than one cup that you demanded and save the rest for any other customer so to save the resources e.g. gas etc. Flyweight pattern is all about that i.e. sharing.</p></blockquote> <p>In plain words</p> <blockquote><p>It is used to minimize memory usage or computational expenses by sharing as much as possible with similar objects.</p></blockquote> <p>Wikipedia says</p> <blockquote><p>In computer programming, flyweight is a software design pattern. A flyweight is an object that minimizes memory use by sharing as much data as possible with other similar objects it is a way to use objects in large numbers when a simple repeated representation would use an unacceptable amount of memory.</p></blockquote> <p><strong>Programmatic example</strong>
Translating our tea example from above. First of all we have tea types and tea maker</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// Anything that will be cached is flyweight. </span>
<span class="token comment">// Types of tea here will be flyweights.</span>
<span class="token keyword">class</span> <span class="token class-name">KarakTea</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token comment">// Acts as a factory and saves the tea</span>
<span class="token keyword">class</span> <span class="token class-name">TeaMaker</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>availableTea <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token function">make</span><span class="token punctuation">(</span><span class="token parameter">preference</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>availableTea<span class="token punctuation">[</span>preference<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>availableTea<span class="token punctuation">[</span>preference<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">KarakTea</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>availableTea<span class="token punctuation">[</span>preference<span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>Then we have the <code>TeaShop</code> which takes orders and serves them</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">TeaShop</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">teaMaker</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>teaMaker <span class="token operator">=</span> teaMaker
        <span class="token keyword">this</span><span class="token punctuation">.</span>orders <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>

    <span class="token function">takeOrder</span><span class="token punctuation">(</span><span class="token parameter">teaType<span class="token punctuation">,</span> table</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>orders<span class="token punctuation">[</span>table<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>teaMaker<span class="token punctuation">.</span><span class="token function">make</span><span class="token punctuation">(</span>teaType<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token function">serve</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>orders<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">order<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Serving tea to table#'</span> <span class="token operator">+</span> index<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>And it can be used as below</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> teaMaker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TeaMaker</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> shop <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TeaShop</span><span class="token punctuation">(</span>teaMaker<span class="token punctuation">)</span>

shop<span class="token punctuation">.</span><span class="token function">takeOrder</span><span class="token punctuation">(</span><span class="token string">'less sugar'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
shop<span class="token punctuation">.</span><span class="token function">takeOrder</span><span class="token punctuation">(</span><span class="token string">'more milk'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
shop<span class="token punctuation">.</span><span class="token function">takeOrder</span><span class="token punctuation">(</span><span class="token string">'without sugar'</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>

shop<span class="token punctuation">.</span><span class="token function">serve</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// Serving tea to table# 1</span>
<span class="token comment">// Serving tea to table# 2</span>
<span class="token comment">// Serving tea to table# 5</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="🎱-代理模式-proxy"><a href="#🎱-代理模式-proxy" class="header-anchor">#</a> 🎱 代理模式 / Proxy</h3> <p>Real world example</p> <blockquote><p>Have you ever used an access card to go through a door? There are multiple options to open that door i.e. it can be opened either using access card or by pressing a button that bypasses the security. The door's main functionality is to open but there is a proxy added on top of it to add some functionality. Let me better explain it using the code example below.</p></blockquote> <p>In plain words</p> <blockquote><p>Using the proxy pattern, a class represents the functionality of another class.</p></blockquote> <p>Wikipedia says</p> <blockquote><p>A proxy, in its most general form, is a class functioning as an interface to something else. A proxy is a wrapper or agent object that is being called by the client to access the real serving object behind the scenes. Use of the proxy can simply be forwarding to the real object, or can provide additional logic. In the proxy extra functionality can be provided, for example caching when operations on the real object are resource intensive, or checking preconditions before operations on the real object are invoked.</p></blockquote> <p><strong>Programmatic Example</strong>
Taking our security door example from above. Firstly we have the door interface and an implementation of door</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/*
Door interface :

open()
close()
*/</span>

<span class="token keyword">class</span> <span class="token class-name">LabDoor</span> <span class="token punctuation">{</span>
    <span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Opening lab door'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Closing the lab door'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>Then we have a proxy to secure any doors that we want</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Security</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">door</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>door <span class="token operator">=</span> door
    <span class="token punctuation">}</span>

    <span class="token function">open</span><span class="token punctuation">(</span><span class="token parameter">password</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">authenticate</span><span class="token punctuation">(</span>password<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>door<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Big no! It ain\'t possible.'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token function">authenticate</span><span class="token punctuation">(</span><span class="token parameter">password</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> password <span class="token operator">===</span> <span class="token string">'ecr@t'</span>
    <span class="token punctuation">}</span>

    <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>door<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>And here is how it can be used</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> door <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Security</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">LabDoor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
door<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'invalid'</span><span class="token punctuation">)</span> <span class="token comment">// Big no! It ain't possible.</span>

door<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'ecr@t'</span><span class="token punctuation">)</span> <span class="token comment">// Opening lab door</span>
door<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// Closing lab door</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="🤹-行为型设计模式-behavioral-design-patterns"><a href="#🤹-行为型设计模式-behavioral-design-patterns" class="header-anchor">#</a> 🤹 行为型设计模式 / Behavioral Design Patterns</h2> <p>In plain words</p> <blockquote><p>It is concerned with assignment of responsibilities between the objects. What makes them different from structural patterns is they don't just specify the structure but also outline the patterns for message passing/communication between them. Or in other words, they assist in answering &quot;How to run a behavior in software component?&quot;</p></blockquote> <p>Wikipedia says</p> <blockquote><p>In software engineering, behavioral design patterns are design patterns that identify common communication patterns between objects and realize these patterns. By doing so, these patterns increase flexibility in carrying out this communication.</p></blockquote> <h3 id="🔗-责任链模式-chain-of-responsibility"><a href="#🔗-责任链模式-chain-of-responsibility" class="header-anchor">#</a> 🔗 责任链模式 / Chain of Responsibility</h3> <p>Real world example</p> <blockquote><p>For example, you have three payment methods (<code>A</code>, <code>B</code> and <code>C</code>) setup in your account each having a different amount in it. <code>A</code> has 100 USD, <code>B</code> has 300 USD and <code>C</code> having 1000 USD and the preference for payments is chosen as <code>A</code> then <code>B</code> then <code>C</code>. You try to purchase something that is worth 210 USD. Using Chain of Responsibility, first of all account <code>A</code> will be checked if it can make the purchase, if yes purchase will be made and the chain will be broken. If not, request will move forward to account <code>B</code> checking for amount if yes chain will be broken otherwise the request will keep forwarding till it finds the suitable handler. Here <code>A</code>, <code>B</code> and <code>C</code> are links of the chain and the whole phenomenon is Chain of Responsibility.</p></blockquote> <p>In plain words</p> <blockquote><p>It helps building a chain of objects. Request enters from one end and keeps going from object to object till it finds the suitable handler.</p></blockquote> <p>Wikipedia says</p> <blockquote><p>In object-oriented design, the chain-of-responsibility pattern is a design pattern consisting of a source of command objects and a series of processing objects. Each processing object contains logic that defines the types of command objects that it can handle the rest are passed to the next processing object in the chain.</p></blockquote> <p><strong>Programmatic Example</strong></p> <p>Translating our account example above. First of all we have a base account having the logic for chaining the accounts together and some accounts</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Account</span> <span class="token punctuation">{</span>

    <span class="token function">setNext</span><span class="token punctuation">(</span><span class="token parameter">account</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>successor <span class="token operator">=</span> account
    <span class="token punctuation">}</span>
    
    <span class="token function">pay</span><span class="token punctuation">(</span><span class="token parameter">amountToPay</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">canPay</span><span class="token punctuation">(</span>amountToPay<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Paid </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>amountToPay<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> using </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>successor<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Cannot pay using </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">. Proceeding...</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>successor<span class="token punctuation">.</span><span class="token function">pay</span><span class="token punctuation">(</span>amountToPay<span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'None of the accounts have enough balance'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    
    <span class="token function">canPay</span><span class="token punctuation">(</span><span class="token parameter">amount</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>balance <span class="token operator">&gt;=</span> amount
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Bank</span> <span class="token keyword">extends</span> <span class="token class-name">Account</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">balance</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'bank'</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>balance <span class="token operator">=</span> balance
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Paypal</span> <span class="token keyword">extends</span> <span class="token class-name">Account</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">balance</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'Paypal'</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>balance <span class="token operator">=</span> balance
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Bitcoin</span> <span class="token keyword">extends</span> <span class="token class-name">Account</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">balance</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'bitcoin'</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>balance <span class="token operator">=</span> balance
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br></div></div><p>Now let's prepare the chain using the links defined above (i.e. Bank, Paypal, Bitcoin)</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// Let's prepare a chain like below</span>
<span class="token comment">//      bank.paypal.bitcoin</span>
<span class="token comment">//</span>
<span class="token comment">// First priority bank</span>
<span class="token comment">//      If bank can't pay then paypal</span>
<span class="token comment">//      If paypal can't pay then bit coin</span>

<span class="token keyword">const</span> bank <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bank</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>          <span class="token comment">// Bank with balance 100</span>
<span class="token keyword">const</span> paypal <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Paypal</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span>      <span class="token comment">// Paypal with balance 200</span>
<span class="token keyword">const</span> bitcoin <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bitcoin</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">)</span>    <span class="token comment">// Bitcoin with balance 300</span>

bank<span class="token punctuation">.</span><span class="token function">setNext</span><span class="token punctuation">(</span>paypal<span class="token punctuation">)</span>
paypal<span class="token punctuation">.</span><span class="token function">setNext</span><span class="token punctuation">(</span>bitcoin<span class="token punctuation">)</span>

<span class="token comment">// Let's try to pay using the first priority i.e. bank</span>
bank<span class="token punctuation">.</span><span class="token function">pay</span><span class="token punctuation">(</span><span class="token number">259</span><span class="token punctuation">)</span>

<span class="token comment">// Output will be</span>
<span class="token comment">// ==============</span>
<span class="token comment">// Cannot pay using bank. Proceeding ..</span>
<span class="token comment">// Cannot pay using paypal. Proceeding ..: </span>
<span class="token comment">// Paid 259 using Bitcoin!</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h3 id="👮-命令模式-command"><a href="#👮-命令模式-command" class="header-anchor">#</a> 👮 命令模式 / Command</h3> <p>Real world example</p> <blockquote><p>A generic example would be you ordering a food at restaurant. You (i.e. <code>Client</code>) ask the waiter (i.e. <code>Invoker</code>) to bring some food (i.e. <code>Command</code>) and waiter simply forwards the request to Chef (i.e. <code>Receiver</code>) who has the knowledge of what and how to cook.
Another example would be you (i.e. <code>Client</code>) switching on (i.e. <code>Command</code>) the television (i.e. <code>Receiver</code>) using a remote control (<code>Invoker</code>).</p></blockquote> <p>In plain words</p> <blockquote><p>Allows you to encapsulate actions in objects. The key idea behind this pattern is to provide the means to decouple client from receiver.</p></blockquote> <p>Wikipedia says</p> <blockquote><p>In object-oriented programming, the command pattern is a behavioral design pattern in which an object is used to encapsulate all information needed to perform an action or trigger an event at a later time. This information includes the method name, the object that owns the method and values for the method parameters.</p></blockquote> <p><strong>Programmatic Example</strong></p> <p>First of all we have the receiver that has the implementation of every action that could be performed</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// Receiver</span>
<span class="token keyword">class</span> <span class="token class-name">Bulb</span> <span class="token punctuation">{</span>
    <span class="token function">turnOn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Bulb has been lit'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    
    <span class="token function">turnOff</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Darkness!'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>then we have an interface that each of the commands are going to implement and then we have a set of commands</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/*
Command interface :

    execute()
    undo()
    redo()
*/</span>

<span class="token comment">// Command</span>
<span class="token keyword">class</span> <span class="token class-name">TurnOnCommand</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">bulb</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>bulb <span class="token operator">=</span> bulb
    <span class="token punctuation">}</span>
    
    <span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>bulb<span class="token punctuation">.</span><span class="token function">turnOn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    
    <span class="token function">undo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>bulb<span class="token punctuation">.</span><span class="token function">turnOff</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    
    <span class="token function">redo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">TurnOffCommand</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">bulb</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>bulb <span class="token operator">=</span> bulb
    <span class="token punctuation">}</span>
    
    <span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>bulb<span class="token punctuation">.</span><span class="token function">turnOff</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    
    <span class="token function">undo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>bulb<span class="token punctuation">.</span><span class="token function">turnOn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    
    <span class="token function">redo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br></div></div><p>Then we have an <code>Invoker</code> with whom the client will interact to process any commands</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// Invoker</span>
<span class="token keyword">class</span> <span class="token class-name">RemoteControl</span> <span class="token punctuation">{</span>
    <span class="token function">submit</span><span class="token punctuation">(</span><span class="token parameter">command</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        command<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>Finally let's see how we can use it in our client</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> bulb <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bulb</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> turnOn <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TurnOnCommand</span><span class="token punctuation">(</span>bulb<span class="token punctuation">)</span>
<span class="token keyword">const</span> turnOff <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TurnOffCommand</span><span class="token punctuation">(</span>bulb<span class="token punctuation">)</span>

<span class="token keyword">const</span> remote <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RemoteControl</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
remote<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span>turnOn<span class="token punctuation">)</span> <span class="token comment">// Bulb has been lit!</span>
remote<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span>turnOff<span class="token punctuation">)</span> <span class="token comment">// Darkness!</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>Command pattern can also be used to implement a transaction based system. Where you keep maintaining the history of commands as soon as you execute them. If the final command is successfully executed, all good otherwise just iterate through the history and keep executing the <code>undo</code> on all the executed commands.</p> <h3 id="➿-迭代器模式-iterator"><a href="#➿-迭代器模式-iterator" class="header-anchor">#</a> ➿ 迭代器模式 / Iterator</h3> <p>Real world example</p> <blockquote><p>An old radio set will be a good example of iterator, where user could start at some channel and then use next or previous buttons to go through the respective channels. Or take an example of MP3 player or a TV set where you could press the next and previous buttons to go through the consecutive channels or in other words they all provide an interface to iterate through the respective channels, songs or radio stations.</p></blockquote> <p>In plain words</p> <blockquote><p>It presents a way to access the elements of an object without exposing the underlying presentation.</p></blockquote> <p>Wikipedia says</p> <blockquote><p>In object-oriented programming, the iterator pattern is a design pattern in which an iterator is used to traverse a container and access the container's elements. The iterator pattern decouples algorithms from containers in some cases, algorithms are necessarily container-specific and thus cannot be decoupled.</p></blockquote> <p><strong>Programmatic example</strong>
Translating our radio stations example from above. First of all we have <code>RadioStation</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">RadioStation</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">frequency</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>frequency <span class="token operator">=</span> frequency    
    <span class="token punctuation">}</span>
    
    <span class="token function">getFrequency</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>frequency
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>Then we have our iterator</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">StationList</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>stations <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>

    <span class="token function">addStation</span><span class="token punctuation">(</span><span class="token parameter">station</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>stations<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>station<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    
    <span class="token function">removeStation</span><span class="token punctuation">(</span><span class="token parameter">toRemove</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> toRemoveFrequency <span class="token operator">=</span> toRemove<span class="token punctuation">.</span><span class="token function">getFrequency</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>stations <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>stations<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">station</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> station<span class="token punctuation">.</span><span class="token function">getFrequency</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!==</span> toRemoveFrequency
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>And then it can be used as</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> stationList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StationList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

stationList<span class="token punctuation">.</span><span class="token function">addStation</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">RadioStation</span><span class="token punctuation">(</span><span class="token number">89</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
stationList<span class="token punctuation">.</span><span class="token function">addStation</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">RadioStation</span><span class="token punctuation">(</span><span class="token number">101</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
stationList<span class="token punctuation">.</span><span class="token function">addStation</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">RadioStation</span><span class="token punctuation">(</span><span class="token number">102</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
stationList<span class="token punctuation">.</span><span class="token function">addStation</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">RadioStation</span><span class="token punctuation">(</span><span class="token number">103.2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

stationList<span class="token punctuation">.</span>stations<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">station</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>station<span class="token punctuation">.</span><span class="token function">getFrequency</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

stationList<span class="token punctuation">.</span><span class="token function">removeStation</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">RadioStation</span><span class="token punctuation">(</span><span class="token number">89</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// Will remove station 89</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="👽-中介者模式-mediator"><a href="#👽-中介者模式-mediator" class="header-anchor">#</a> 👽 中介者模式 / Mediator</h3> <p>Real world example</p> <blockquote><p>A general example would be when you talk to someone on your mobile phone, there is a network provider sitting between you and them and your conversation goes through it instead of being directly sent. In this case network provider is mediator.</p></blockquote> <p>In plain words</p> <blockquote><p>Mediator pattern adds a third party object (called mediator) to control the interaction between two objects (called colleagues). It helps reduce the coupling between the classes communicating with each other. Because now they don't need to have the knowledge of each other's implementation.</p></blockquote> <p>Wikipedia says</p> <blockquote><p>In software engineering, the mediator pattern defines an object that encapsulates how a set of objects interact. This pattern is considered to be a behavioral pattern due to the way it can alter the program's running behavior.</p></blockquote> <p><strong>Programmatic Example</strong></p> <p>Here is the simplest example of a chat room (i.e. mediator) with users (i.e. colleagues) sending messages to each other.</p> <p>First of all, we have the mediator i.e. the chat room</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// Mediator</span>
<span class="token keyword">class</span> <span class="token class-name">ChatRoom</span> <span class="token punctuation">{</span>
    <span class="token function">showMessage</span><span class="token punctuation">(</span><span class="token parameter">user<span class="token punctuation">,</span> message</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> time <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">const</span> sender <span class="token operator">=</span> user<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>time <span class="token operator">+</span> <span class="token string">'['</span> <span class="token operator">+</span> sender <span class="token operator">+</span> <span class="token string">']:'</span> <span class="token operator">+</span> message<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>Then we have our users i.e. colleagues</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> chatMediator</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
        <span class="token keyword">this</span><span class="token punctuation">.</span>chatMediator <span class="token operator">=</span> chatMediator
    <span class="token punctuation">}</span>
    
    <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name
    <span class="token punctuation">}</span>
    
    <span class="token function">send</span><span class="token punctuation">(</span><span class="token parameter">message</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>chatMediator<span class="token punctuation">.</span><span class="token function">showMessage</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> message<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>And the usage</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> mediator <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ChatRoom</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> john <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">'John Doe'</span><span class="token punctuation">,</span> mediator<span class="token punctuation">)</span>
<span class="token keyword">const</span> jane <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">'Jane Doe'</span><span class="token punctuation">,</span> mediator<span class="token punctuation">)</span>

john<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'Hi there!'</span><span class="token punctuation">)</span>
jane<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'Hey!'</span><span class="token punctuation">)</span>

<span class="token comment">// Output will be</span>
<span class="token comment">// Feb 14, 10:58 [John]: Hi there!</span>
<span class="token comment">// Feb 14, 10:58 [Jane]: Hey!</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="💾-备忘录模式-memento"><a href="#💾-备忘录模式-memento" class="header-anchor">#</a> 💾 备忘录模式 / Memento</h3> <p>Real world example</p> <blockquote><p>Take the example of calculator (i.e. originator), where whenever you perform some calculation the last calculation is saved in memory (i.e. memento) so that you can get back to it and maybe get it restored using some action buttons (i.e. caretaker).</p></blockquote> <p>In plain words</p> <blockquote><p>Memento pattern is about capturing and storing the current state of an object in a manner that it can be restored later on in a smooth manner.</p></blockquote> <p>Wikipedia says</p> <blockquote><p>The memento pattern is a software design pattern that provides the ability to restore an object to its previous state (undo via rollback).</p></blockquote> <p>Usually useful when you need to provide some sort of undo functionality.</p> <p><strong>Programmatic Example</strong></p> <p>Lets take an example of text editor which keeps saving the state from time to time and that you can restore if you want.</p> <p>First of all we have our memento object that will be able to hold the editor state</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">EditorMemento</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">content</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>_content <span class="token operator">=</span> content
    <span class="token punctuation">}</span>
    
    <span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_content
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>Then we have our editor i.e. originator that is going to use memento object</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Editor</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>_content <span class="token operator">=</span> <span class="token string">''</span>
    <span class="token punctuation">}</span>
    
    <span class="token function">type</span><span class="token punctuation">(</span><span class="token parameter">words</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>_content <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_content <span class="token operator">+</span> <span class="token string">' '</span> <span class="token operator">+</span> words
    <span class="token punctuation">}</span>
    
    <span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_content
    <span class="token punctuation">}</span>
    
    <span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">EditorMemento</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>_content<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    
    <span class="token function">restore</span><span class="token punctuation">(</span><span class="token parameter">memento</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>_content <span class="token operator">=</span> memento<span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>And then it can be used as</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> editor <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Editor</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// Type some stuff</span>
editor<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token string">'This is the first sentence.'</span><span class="token punctuation">)</span>
editor<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token string">'This is second.'</span><span class="token punctuation">)</span>

<span class="token comment">// Save the state to restore to : This is the first sentence. This is second.</span>
<span class="token keyword">const</span> saved <span class="token operator">=</span> editor<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// Type some more</span>
editor<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token string">'And this is third.'</span><span class="token punctuation">)</span>

<span class="token comment">// Output: Content before Saving</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>editor<span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">// This is the first sentence. This is second. And this is third.</span>

<span class="token comment">// Restoring to last saved state</span>
editor<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span>saved<span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>editor<span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// This is the first sentence. This is second.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="😎-观察者模式-observer"><a href="#😎-观察者模式-observer" class="header-anchor">#</a> 😎 观察者模式 / Observer</h3> <p>(Otherwise known as <em>&quot;pub-sub&quot;</em>)</p> <p>Real world example</p> <blockquote><p>A good example would be the job seekers where they subscribe to some job posting site and they are notified whenever there is a matching job opportunity.</p></blockquote> <p>In plain words</p> <blockquote><p>Defines a dependency between objects so that whenever an object changes its state, all its dependents are notified.</p></blockquote> <p>Wikipedia says</p> <blockquote><p>The observer pattern is a software design pattern in which an object, called the subject, maintains a list of its dependents, called observers, and notifies them automatically of any state changes, usually by calling one of their methods.</p></blockquote> <p><strong>Programmatic example</strong></p> <p>Translating our example from above. First of all we have job seekers that need to be notified for a job posting</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">JobPost</span> <span class="token operator">=</span> <span class="token parameter">title</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
    title<span class="token operator">:</span> title
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">class</span> <span class="token class-name">JobSeeker</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>_name <span class="token operator">=</span> name
    <span class="token punctuation">}</span>

    <span class="token function">notify</span><span class="token punctuation">(</span><span class="token parameter">jobPost</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>_name<span class="token punctuation">,</span> <span class="token string">'has been notified of a new posting :'</span><span class="token punctuation">,</span> jobPost<span class="token punctuation">.</span>title<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>Then we have our job postings to which the job seekers will subscribe</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">JobBoard</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>_subscribers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>

    <span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token parameter">jobSeeker</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>_subscribers<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>jobSeeker<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token function">addJob</span><span class="token punctuation">(</span><span class="token parameter">jobPosting</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>_subscribers<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">subscriber</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            subscriber<span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span>jobPosting<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>Then it can be used as</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// Create subscribers</span>
<span class="token keyword">const</span> jonDoe <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JobSeeker</span><span class="token punctuation">(</span><span class="token string">'John Doe'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> janeDoe <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JobSeeker</span><span class="token punctuation">(</span><span class="token string">'Jane Doe'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> kaneDoe <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JobSeeker</span><span class="token punctuation">(</span><span class="token string">'Kane Doe'</span><span class="token punctuation">)</span>

<span class="token comment">// Create publisher and attach subscribers</span>
<span class="token keyword">const</span> jobBoard <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JobBoard</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
jobBoard<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span>jonDoe<span class="token punctuation">)</span>
jobBoard<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span>janeDoe<span class="token punctuation">)</span>

<span class="token comment">// Add a new job and see if subscribers get notified</span>
jobBoard<span class="token punctuation">.</span><span class="token function">addJob</span><span class="token punctuation">(</span><span class="token function">JobPost</span><span class="token punctuation">(</span><span class="token string">'Software Engineer'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">// Output</span>
<span class="token comment">// John Doe has been notified of a new posting : Software Engineer</span>
<span class="token comment">// Jane Doe has been notified of a new posting : Software Engineer</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="🏃-访问者模式-visitor"><a href="#🏃-访问者模式-visitor" class="header-anchor">#</a> 🏃 访问者模式 / Visitor</h3> <p>Real world example</p> <blockquote><p>Consider someone visiting Dubai. They just need a way (i.e. visa) to enter Dubai. After arrival, they can come and visit any place in Dubai on their own without having to ask for permission or to do some leg work in order to visit any place here just let them know of a place and they can visit it. Visitor pattern let's you do just that, it helps you add places to visit so that they can visit as much as they can without having to do any legwork.</p></blockquote> <p>In plain words</p> <blockquote><p>Visitor pattern let's you add further operations to objects without having to modify them.</p></blockquote> <p>Wikipedia says</p> <blockquote><p>In object-oriented programming and software engineering, the visitor design pattern is a way of separating an algorithm from an object structure on which it operates. A practical result of this separation is the ability to add new operations to existing object structures without modifying those structures. It is one way to follow the open/closed principle.</p></blockquote> <p><strong>Programmatic example</strong></p> <p>Let's take an example of a zoo simulation where we have several different kinds of animals and we have to make them Sound. Let's translate this using visitor pattern</p> <p>We have our implementations for the animals</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Monkey</span> <span class="token punctuation">{</span>
    <span class="token function">shout</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Ooh oo aa aa!'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token function">accept</span><span class="token punctuation">(</span><span class="token parameter">operation</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        operation<span class="token punctuation">.</span><span class="token function">visitMonkey</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Lion</span> <span class="token punctuation">{</span>
    <span class="token function">roar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Roaaar!'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    
    <span class="token function">accept</span><span class="token punctuation">(</span><span class="token parameter">operation</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        operation<span class="token punctuation">.</span><span class="token function">visitLion</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Dolphin</span> <span class="token punctuation">{</span>
    <span class="token function">speak</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Tuut tuttu tuutt!'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    
    <span class="token function">accept</span><span class="token punctuation">(</span><span class="token parameter">operation</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        operation<span class="token punctuation">.</span><span class="token function">visitDolphin</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><p>Let's implement our visitor</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> speak <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function">visitMonkey</span><span class="token punctuation">(</span><span class="token parameter">monkey</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        monkey<span class="token punctuation">.</span><span class="token function">shout</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">visitLion</span><span class="token punctuation">(</span><span class="token parameter">lion</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        lion<span class="token punctuation">.</span><span class="token function">roar</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">visitDolphin</span><span class="token punctuation">(</span><span class="token parameter">dolphin</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        dolphin<span class="token punctuation">.</span><span class="token function">speak</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>And then it can be used as</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> monkey <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Monkey</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> lion <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Lion</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> dolphin <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dolphin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

monkey<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>speak<span class="token punctuation">)</span>    <span class="token comment">// Ooh oo aa aa!    </span>
lion<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>speak<span class="token punctuation">)</span>      <span class="token comment">// Roaaar!</span>
dolphin<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>speak<span class="token punctuation">)</span>   <span class="token comment">// Tuut tutt tuutt!</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>We could have done this simply by having a inheritance hierarchy for the animals but then we would have to modify the animals whenever we would have to add new actions to animals. But now we will not have to change them. For example, let's say we are asked to add the jump behavior to the animals, we can simply add that by creating a new visitor i.e.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> jump <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function">visitMonkey</span><span class="token punctuation">(</span><span class="token parameter">monkey</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Jumped 20 feet high! on to the tree!'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">visitLion</span><span class="token punctuation">(</span><span class="token parameter">lion</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Jumped 7 feet! Back on the ground!'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">visitDolphin</span><span class="token punctuation">(</span><span class="token parameter">dolphin</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Walked on water a little and disappeared'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>And for the usage</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>monkey<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>speak<span class="token punctuation">)</span>   <span class="token comment">// Ooh oo aa aa!</span>
monkey<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>jump<span class="token punctuation">)</span>    <span class="token comment">// Jumped 20 feet high! on to the tree!</span>

lion<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>speak<span class="token punctuation">)</span>     <span class="token comment">// Roaaar!</span>
lion<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>jump<span class="token punctuation">)</span>      <span class="token comment">// Jumped 7 feet! Back on the ground! </span>

dolphin<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>speak<span class="token punctuation">)</span>  <span class="token comment">// Tuut tutt tuutt! </span>
dolphin<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>jump<span class="token punctuation">)</span>   <span class="token comment">// Walked on water a little and disappeared</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="💡-策略模式-strategy"><a href="#💡-策略模式-strategy" class="header-anchor">#</a> 💡 策略模式 / Strategy</h3> <p>Real world example</p> <blockquote><p>Consider the example of sorting, we implemented bubble sort but the data started to grow and bubble sort started getting very slow. In order to tackle this we implemented Quick sort. But now although the quick sort algorithm was doing better for large datasets, it was very slow for smaller datasets. In order to handle this we implemented a strategy where for small datasets, bubble sort will be used and for larger, quick sort.</p></blockquote> <p>In plain words</p> <blockquote><p>Strategy pattern allows you to switch the algorithm or strategy based upon the situation.</p></blockquote> <p>Wikipedia says</p> <blockquote><p>In computer programming, the strategy pattern (also known as the policy pattern) is a behavioural software design pattern that enables an algorithm's behavior to be selected at runtime.</p></blockquote> <p><strong>Programmatic example</strong></p> <p>Translating our example from above, we can easily implement this strategy in javascript using its feature of first class functions.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">bubbleSort</span> <span class="token operator">=</span> <span class="token parameter">dataset</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Sorting with bubble sort'</span><span class="token punctuation">)</span>
    <span class="token comment">// ...</span>
    <span class="token comment">// ...</span>
    <span class="token keyword">return</span> dataset
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">quickSort</span> <span class="token operator">=</span> <span class="token parameter">dataset</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Sorting with quick sort'</span><span class="token punctuation">)</span>
    <span class="token comment">// ...</span>
    <span class="token comment">// ...</span>
    <span class="token keyword">return</span> dataset
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>And then we have our client that is going to use any strategy</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">sorter</span> <span class="token operator">=</span> <span class="token parameter">dataset</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>dataset<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> quickSort
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> bubbleSort
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>And it can be used as</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> longDataSet <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">]</span>
<span class="token keyword">const</span> shortDataSet <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span>

<span class="token keyword">const</span> sorter1 <span class="token operator">=</span> <span class="token function">sorter</span><span class="token punctuation">(</span>longDataSet<span class="token punctuation">)</span>
<span class="token keyword">const</span> sorter2 <span class="token operator">=</span> <span class="token function">sorter</span><span class="token punctuation">(</span>shortDataSet<span class="token punctuation">)</span>

<span class="token function">sorter1</span><span class="token punctuation">(</span>longDataSet<span class="token punctuation">)</span> <span class="token comment">// Output : Sorting with quick sort</span>
<span class="token function">sorter2</span><span class="token punctuation">(</span>shortDataSet<span class="token punctuation">)</span> <span class="token comment">// Output : Sorting with bubble sort</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="💢-状态模式-state"><a href="#💢-状态模式-state" class="header-anchor">#</a> 💢 状态模式 / State</h3> <p>Real world example</p> <blockquote><p>Imagine you are using some drawing application, you choose the paint brush to draw. Now the brush changes it's behavior based on the selected color i.e. if you have chosen red color it will draw in red, if blue then it will be in blue etc.</p></blockquote> <p>In plain words</p> <blockquote><p>It lets you change the behavior of a class when the state changes.</p></blockquote> <p>Wikipedia says</p> <blockquote><p>The state pattern is a behavioral software design pattern that implements a state machine in an object-oriented way. With the state pattern, a state machine is implemented by implementing each individual state as a derived class of the state pattern interface, and implementing state transitions by invoking methods defined by the pattern's superclass.
The state pattern can be interpreted as a strategy pattern which is able to switch the current strategy through invocations of methods defined in the pattern's interface</p></blockquote> <p><strong>Programmatic example</strong></p> <p>Let's take an example of text editor, it let's you change the state of text that is typed i.e. if you have selected bold, it starts writing in bold, if italic then in italics etc.</p> <p>First of all we have our transformation functions</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">upperCase</span> <span class="token operator">=</span> <span class="token parameter">inputString</span> <span class="token operator">=&gt;</span> inputString<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token function-variable function">lowerCase</span> <span class="token operator">=</span> <span class="token parameter">inputString</span> <span class="token operator">=&gt;</span> inputString<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token function-variable function">defaultTransform</span> <span class="token operator">=</span> <span class="token parameter">inputString</span> <span class="token operator">=&gt;</span> inputString
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Then we have our editor</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">TextEditor</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">transform</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>_transform <span class="token operator">=</span> transform
    <span class="token punctuation">}</span>
    
    <span class="token function">setTransform</span><span class="token punctuation">(</span><span class="token parameter">transform</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>_transform <span class="token operator">=</span> transform
    <span class="token punctuation">}</span>
    
    <span class="token function">type</span><span class="token punctuation">(</span><span class="token parameter">words</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_transform</span><span class="token punctuation">(</span>words<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>And then it can be used as</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> editor <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TextEditor</span><span class="token punctuation">(</span>defaultTransform<span class="token punctuation">)</span>

editor<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token string">'First line'</span><span class="token punctuation">)</span>

editor<span class="token punctuation">.</span><span class="token function">setTransform</span><span class="token punctuation">(</span>upperCase<span class="token punctuation">)</span>

editor<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token string">'Second line'</span><span class="token punctuation">)</span>
editor<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token string">'Third line'</span><span class="token punctuation">)</span>

editor<span class="token punctuation">.</span><span class="token function">setTransform</span><span class="token punctuation">(</span>lowerCase<span class="token punctuation">)</span>

editor<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token string">'Fourth line'</span><span class="token punctuation">)</span>
editor<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token string">'Fifth line'</span><span class="token punctuation">)</span>

<span class="token comment">// Output:</span>
<span class="token comment">// First line</span>
<span class="token comment">// SECOND LINE</span>
<span class="token comment">// THIRD LINE</span>
<span class="token comment">// fourth line</span>
<span class="token comment">// fifth line</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h3 id="📒-模板方法模式-template-method"><a href="#📒-模板方法模式-template-method" class="header-anchor">#</a> 📒 模板方法模式 / Template Method</h3> <p>Real world example</p> <blockquote><p>Suppose we are getting some house built. The steps for building might look like</p> <ul><li>Prepare the base of house</li> <li>Build the walls</li> <li>Add roof</li> <li>Add other floors</li></ul> <p>The order of these steps could never be changed i.e. you can't build the roof before building the walls etc but each of the steps could be modified for example walls can be made of wood or polyester or stone.</p></blockquote> <p>In plain words</p> <blockquote><p>Template method defines the skeleton of how certain algorithm could be performed but defers the implementation of those steps to the children classes.</p></blockquote> <p>Wikipedia says</p> <blockquote><p>In software engineering, the template method pattern is a behavioral design pattern that defines the program skeleton of an algorithm in an operation, deferring some steps to subclasses. It lets one redefine certain steps of an algorithm without changing the algorithm's structure.</p></blockquote> <p><strong>Programmatic Example</strong></p> <p>Imagine we have a build tool that helps us test, lint, build, generate build reports (i.e. code coverage reports, linting report etc) and deploy our app on the test server.</p> <p>First of all we have our base class that specifies the skeleton for the build algorithm</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Builder</span> <span class="token punctuation">{</span>
    <span class="token comment">// Template method </span>
    <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">lint</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">assemble</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">deploy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>Then we can have our implementations</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">AndroidBuilder</span> <span class="token keyword">extends</span> <span class="token class-name">Builder</span> <span class="token punctuation">{</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Running android tests'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    
    <span class="token function">lint</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Linting the android code'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    
    <span class="token function">assemble</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Assembling the android build'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    
    <span class="token function">deploy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Deploying android build to server'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">IosBuilder</span> <span class="token keyword">extends</span> <span class="token class-name">Builder</span> <span class="token punctuation">{</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Running ios tests'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    
    <span class="token function">lint</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Linting the ios code'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    
    <span class="token function">assemble</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Assembling the ios build'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    
    <span class="token function">deploy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Deploying ios build to server'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><p>And then it can be used as</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> androidBuilder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AndroidBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
androidBuilder<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// Output:</span>
<span class="token comment">// Running android tests</span>
<span class="token comment">// Linting the android code</span>
<span class="token comment">// Assembling the android build</span>
<span class="token comment">// Deploying android build to server</span>

<span class="token keyword">const</span> iosBuilder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IosBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
iosBuilder<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// Output:</span>
<span class="token comment">// Running ios tests</span>
<span class="token comment">// Linting the ios code</span>
<span class="token comment">// Assembling the ios build</span>
<span class="token comment">// Deploying ios build to server</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h2 id="🚦-尾声-wrap-up-folks"><a href="#🚦-尾声-wrap-up-folks" class="header-anchor">#</a> 🚦 尾声 / Wrap Up Folks</h2> <p>到这里教程的正文内容就结束了。我会持续改进这篇教程，也许您以后想要重新访问这个仓库来查看最新的内容，不妨点一个关注以及星标。对了，我计划撰写同样风格的软件体系架构教程，希望您继续关注。</p> <h2 id="👬-参与贡献-contribution"><a href="#👬-参与贡献-contribution" class="header-anchor">#</a> 👬 参与贡献 / Contribution</h2> <ul><li>反馈问题 / Report issues</li> <li>拉取请求，改进文档 / Open pull request with improvements</li> <li>分享此仓库 / Spread the word</li></ul> <h2 id="🔑-项目许可-license"><a href="#🔑-项目许可-license" class="header-anchor">#</a> 🔑 项目许可 / License</h2> <p>MIT © <a href="https://github.com/LolipopJ" target="_blank" rel="noopener noreferrer">LolipopJ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>本项目基于 <a href="https://github.com/kamranahmedse/design-patterns-for-humans" target="_blank" rel="noopener noreferrer">Design Patterns for Humans<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，案例的 JavaScript 代码来自 <a href="https://github.com/sohamkamani/javascript-design-patterns-for-humans" target="_blank" rel="noopener noreferrer">JavaScript Design Patterns for Humans<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/LolipopJ/design-patterns-for-humans-zh/edit/main/vuepress/docs/README.md" target="_blank" rel="noopener noreferrer">帮助改善本教程的翻译！</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">上次更新：:</span> <span class="time">6/22/2021, 2:07:36 PM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/design-patterns-for-humans-zh/assets/js/app.bd9d272e.js" defer></script><script src="/design-patterns-for-humans-zh/assets/js/2.6b578c18.js" defer></script><script src="/design-patterns-for-humans-zh/assets/js/7.dc0c925c.js" defer></script>
  </body>
</html>
