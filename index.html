<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>献给中文读者的设计模式教程</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="apple-touch-icon" sizes="180x180" href="/design-patterns-for-humans-zh/favicon-180.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/design-patterns-for-humans-zh/favicon-32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/design-patterns-for-humans-zh/favicon-16.png">
    <link rel="shortcut icon" href="/design-patterns-for-humans-zh/favicon.ico">
    <meta name="description" content="对设计模式的超简单解读！的另一个中文译本。">
    
    <link rel="preload" href="/design-patterns-for-humans-zh/assets/css/0.styles.225eff94.css" as="style"><link rel="preload" href="/design-patterns-for-humans-zh/assets/js/app.686ebddc.js" as="script"><link rel="preload" href="/design-patterns-for-humans-zh/assets/js/2.852dfa87.js" as="script"><link rel="preload" href="/design-patterns-for-humans-zh/assets/js/7.07076d3a.js" as="script"><link rel="prefetch" href="/design-patterns-for-humans-zh/assets/js/3.9d07cf01.js"><link rel="prefetch" href="/design-patterns-for-humans-zh/assets/js/4.0a2f3beb.js"><link rel="prefetch" href="/design-patterns-for-humans-zh/assets/js/5.a33a2f42.js"><link rel="prefetch" href="/design-patterns-for-humans-zh/assets/js/6.f0091315.js">
    <link rel="stylesheet" href="/design-patterns-for-humans-zh/assets/css/0.styles.225eff94.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/design-patterns-for-humans-zh/" aria-current="page" class="home-link router-link-exact-active router-link-active"><img src="/design-patterns-for-humans-zh/favicon.png" alt="献给中文读者的设计模式教程" class="logo"> <span class="site-name can-hide">献给中文读者的设计模式教程</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="选择编程语言" class="dropdown-title"><span class="title">选择编程语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="选择编程语言" class="mobile-dropdown-title"><span class="title">选择编程语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/design-patterns-for-humans-zh/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  JavaScript
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/kamranahmedse/design-patterns-for-humans" target="_blank" rel="noopener noreferrer" class="nav-link external">
  英文原文
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/LolipopJ/design-patterns-for-humans-zh" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="选择编程语言" class="dropdown-title"><span class="title">选择编程语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="选择编程语言" class="mobile-dropdown-title"><span class="title">选择编程语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/design-patterns-for-humans-zh/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  JavaScript
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/kamranahmedse/design-patterns-for-humans" target="_blank" rel="noopener noreferrer" class="nav-link external">
  英文原文
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/LolipopJ/design-patterns-for-humans-zh" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span></span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/design-patterns-for-humans-zh/#🚀-介绍-introduction" class="sidebar-link">🚀 介绍 / Introduction</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/design-patterns-for-humans-zh/#⚠️-请注意-be-careful" class="sidebar-link">⚠️ 请注意 / Be Careful</a></li><li class="sidebar-sub-header"><a href="/design-patterns-for-humans-zh/#🐢-在开始之前-before-you-start" class="sidebar-link">🐢 在开始之前 / Before you start</a></li></ul></li><li><a href="/design-patterns-for-humans-zh/#🏗️-创建型设计模式-creational-design-patterns" class="sidebar-link">🏗️ 创建型设计模式 / Creational Design Patterns</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/design-patterns-for-humans-zh/#🏠-简单工厂模式-simple-factory" class="sidebar-link">🏠 简单工厂模式 / Simple Factory</a></li><li class="sidebar-sub-header"><a href="/design-patterns-for-humans-zh/#🏭-工厂方法模式-factory-method" class="sidebar-link">🏭 工厂方法模式 / Factory Method</a></li><li class="sidebar-sub-header"><a href="/design-patterns-for-humans-zh/#🔨-抽象工厂模式-abstract-factory" class="sidebar-link">🔨 抽象工厂模式 / Abstract Factory</a></li><li class="sidebar-sub-header"><a href="/design-patterns-for-humans-zh/#👷-生成器模式-builder" class="sidebar-link">👷 生成器模式 / Builder</a></li><li class="sidebar-sub-header"><a href="/design-patterns-for-humans-zh/#🐑-原型模式-prototype" class="sidebar-link">🐑 原型模式 / Prototype</a></li><li class="sidebar-sub-header"><a href="/design-patterns-for-humans-zh/#💍-单例模式-singleton" class="sidebar-link">💍 单例模式 / Singleton</a></li></ul></li><li><a href="/design-patterns-for-humans-zh/#🔩-结构型设计模式-structural-design-patterns" class="sidebar-link">🔩 结构型设计模式 / Structural Design Patterns</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/design-patterns-for-humans-zh/#🔌-适配器模式-adapter" class="sidebar-link">🔌 适配器模式 / Adapter</a></li><li class="sidebar-sub-header"><a href="/design-patterns-for-humans-zh/#🚡-桥接模式-bridge" class="sidebar-link">🚡 桥接模式 / Bridge</a></li><li class="sidebar-sub-header"><a href="/design-patterns-for-humans-zh/#🌿-组合模式-composite" class="sidebar-link">🌿 组合模式 / Composite</a></li><li class="sidebar-sub-header"><a href="/design-patterns-for-humans-zh/#☕-装饰器模式-decorator" class="sidebar-link">☕ 装饰器模式 / Decorator</a></li><li class="sidebar-sub-header"><a href="/design-patterns-for-humans-zh/#📦-门面模式-facade" class="sidebar-link">📦 门面模式 / Facade</a></li><li class="sidebar-sub-header"><a href="/design-patterns-for-humans-zh/#🍃-享元模式-flyweight" class="sidebar-link">🍃 享元模式 / Flyweight</a></li><li class="sidebar-sub-header"><a href="/design-patterns-for-humans-zh/#🎱-代理模式-proxy" class="sidebar-link">🎱 代理模式 / Proxy</a></li></ul></li><li><a href="/design-patterns-for-humans-zh/#🤹-行为型设计模式-behavioral-design-patterns" class="sidebar-link">🤹 行为型设计模式 / Behavioral Design Patterns</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/design-patterns-for-humans-zh/#🔗-责任链模式-chain-of-responsibility" class="sidebar-link">🔗 责任链模式 / Chain of Responsibility</a></li><li class="sidebar-sub-header"><a href="/design-patterns-for-humans-zh/#👮-命令模式-command" class="sidebar-link">👮 命令模式 / Command</a></li><li class="sidebar-sub-header"><a href="/design-patterns-for-humans-zh/#➿-迭代器模式-iterator" class="sidebar-link">➿ 迭代器模式 / Iterator</a></li><li class="sidebar-sub-header"><a href="/design-patterns-for-humans-zh/#👽-中介者模式-mediator" class="sidebar-link">👽 中介者模式 / Mediator</a></li><li class="sidebar-sub-header"><a href="/design-patterns-for-humans-zh/#💾-备忘录模式-memento" class="sidebar-link">💾 备忘录模式 / Memento</a></li><li class="sidebar-sub-header"><a href="/design-patterns-for-humans-zh/#😎-观察者模式-observer" class="sidebar-link">😎 观察者模式 / Observer</a></li><li class="sidebar-sub-header"><a href="/design-patterns-for-humans-zh/#🏃-访问者模式-visitor" class="sidebar-link">🏃 访问者模式 / Visitor</a></li><li class="sidebar-sub-header"><a href="/design-patterns-for-humans-zh/#💡-策略模式-strategy" class="sidebar-link">💡 策略模式 / Strategy</a></li><li class="sidebar-sub-header"><a href="/design-patterns-for-humans-zh/#💢-状态模式-state" class="sidebar-link">💢 状态模式 / State</a></li><li class="sidebar-sub-header"><a href="/design-patterns-for-humans-zh/#📒-模板方法模式-template-method" class="sidebar-link">📒 模板方法模式 / Template Method</a></li></ul></li><li><a href="/design-patterns-for-humans-zh/#🚦-尾声-wrap-up-folks" class="sidebar-link">🚦 尾声 / Wrap Up Folks</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/design-patterns-for-humans-zh/#👬-参与贡献-contribution" class="sidebar-link">👬 参与贡献 / Contribution</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/design-patterns-for-humans-zh/#🔑-项目许可-license" class="sidebar-link">🔑 项目许可 / License</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p><a href="https://github.com/LolipopJ/design-patterns-for-humans-zh" target="_blank" rel="noopener noreferrer">本项目<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>仍在润色过程中</p></div> <img src="/design-patterns-for-humans-zh/cover.png" alt="献给中文读者的设计模式教程 / Design Patterns for Humans ZH"> <hr> <div align="center"><p>
🎉 对设计模式的超简单解读！ 🎉
</p> <p>
设计模式的话题经常害得我们心神不宁。在这里，我将试着用尽可能简单的方式来解释它们，让它们深深地刻在您（还有我）的脑海里。
</p> <p>
本项目基于 <a href="https://github.com/kamranahmedse/design-patterns-for-humans">Design Patterns for Humans</a>，案例的 JavaScript 代码来自 <a href="https://github.com/sohamkamani/javascript-design-patterns-for-humans">JavaScript Design Patterns for Humans</a>。
</p></div> <hr> <p>译者在学习的过程中，想要使用自己的语言风格来翻译这篇“给人类写的”设计模式教程。奈何才疏学浅，如有谬误，敬请斧正。</p> <p>如果您喜欢这篇教程，不妨看看项目的原作者的<a href="http://sohamkamani.com" target="_blank" rel="noopener noreferrer">博客<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，或是在 <a href="https://twitter.com/sohamkamani" target="_blank" rel="noopener noreferrer">Twitter<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 上跟他打声招呼。</p> <h1 id="献给中文读者的设计模式教程-design-patterns-for-humans-zh"><a href="#献给中文读者的设计模式教程-design-patterns-for-humans-zh" class="header-anchor">#</a> 献给中文读者的设计模式教程 / Design Patterns for Humans ZH</h1> <h2 id="🚀-介绍-introduction"><a href="#🚀-介绍-introduction" class="header-anchor">#</a> 🚀 介绍 / Introduction</h2> <p>设计模式是为<strong>解决某些普遍存在的问题</strong>提出的<strong>方案与指导原则</strong>。它们不是类，程序包或库文件，没法直接放到您的应用程序里然后等待神奇的事情发生。确切地说，它们是一种指导原则，旨在告诉您可以选用某种方法，来解决某些问题。</p> <blockquote><p>设计模式是为解决某些普遍存在的问题提出的方案与指导原则。</p></blockquote> <p>维基百科这样描述它们：</p> <blockquote><p>在软件工程领域，软件设计模式是为软件设计过程中，对给定上下文普遍存在的问题，所提出的通用、可重用的解决方案。它不是完整的设计实现，无法直接转译为源代码或机器码。正相反，它是面向如何解决问题的描述或模板，并可以在很多不同的情况下使用。</p></blockquote> <h3 id="⚠️-请注意-be-careful"><a href="#⚠️-请注意-be-careful" class="header-anchor">#</a> ⚠️ 请注意 / Be Careful</h3> <ul><li>设计模式并不是解决您所有问题的万全之策。</li> <li>不要强迫去使用它们；否则很可能发生不好的事情。</li> <li>请记住，设计模式是一种指导方案，用来<strong>解决</strong>问题，而不是<strong>找到</strong>问题；所以不要想太多。</li> <li>如果在正确的地方以正确的方式使用设计模式，它们或许能成为您的得力帮手；否则可能导致您的代码混乱不堪。</li></ul> <h3 id="🐢-在开始之前-before-you-start"><a href="#🐢-在开始之前-before-you-start" class="header-anchor">#</a> 🐢 在开始之前 / Before you start</h3> <ul><li>所有的设计模式示例都基于 JavaScript 的 <a href="https://github.com/lukehoban/es6features" target="_blank" rel="noopener noreferrer">ES6<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 规范实现。</li> <li>由于 JavaScript 中不存在实现接口的说法，因此我们在代码示例中使用了隐式接口，这意味着只有一个类具有一个接口应当有的属性和方法，这个类就被认为实现了这个接口。为了让您更容易分辨当前正在使用的接口，我们在每个示例中都添加了注释信息。</li></ul> <h2 id="🏗️-创建型设计模式-creational-design-patterns"><a href="#🏗️-创建型设计模式-creational-design-patterns" class="header-anchor">#</a> 🏗️ 创建型设计模式 / Creational Design Patterns</h2> <p>简单来说</p> <blockquote><p>创建型设计模式关注如何实例化一个对象，或一组相关的对象。</p></blockquote> <p>维基百科这样描述</p> <blockquote><p>在软件工程领域，创建型设计模式是处理对象创建机制的设计模式，试图以符合要求的方式来创建对象。创建对象的基础方式可能导致设计问题或增加设计复杂度。创建型设计模式通过以某种方式控制对象创建的过程，来解决这个问题。</p></blockquote> <h3 id="🏠-简单工厂模式-simple-factory"><a href="#🏠-简单工厂模式-simple-factory" class="header-anchor">#</a> 🏠 简单工厂模式 / Simple Factory</h3> <p>现实生活中的例子</p> <blockquote><p>想象，您正在修建一栋房子，而您需要门。您可以穿上木匠的衣服，拿上木头、胶水、钉子以及其它需要的工具，在您的房子里亲自制作一扇门；或者，您只需要打个电话给工厂，让他们把制造好的门送到您身边，这样您不必了解任何关于制作门的知识，也不必处理制作门所带来的麻烦。</p></blockquote> <p>简单来说</p> <blockquote><p>简单工厂为客户端生成一个实例，而不向客户端暴露任何实例化操作的逻辑。</p></blockquote> <p>维基百科这样描述</p> <blockquote><p>在面向对象编程（OOP）中，工厂是用于创建其它对象的对象——更准确地说，工厂是一个函数或方法，通过调用它的某个方法（假设为 &quot;new&quot;）可以返回拥有不同原型或类的对象。</p></blockquote> <p><strong>编程示例</strong></p> <p>首先，我们定义了门的接口和并实现了它</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * Door interface
 *
 * getWidth()
 * getHeight()
 */</span>

<span class="token keyword">class</span> <span class="token class-name">WoodenDoor</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">width<span class="token punctuation">,</span> height</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>width <span class="token operator">=</span> width<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>height <span class="token operator">=</span> height<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>width<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">getHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>height<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>接下来，我们创建了制造并返回门的工厂</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> DoorFactory <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">makeDoor</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">width<span class="token punctuation">,</span> height</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token class-name">WoodenDoor</span><span class="token punctuation">(</span>width<span class="token punctuation">,</span> height<span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>最后，可以这样使用工厂</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 制造一个 100x200 的门给我</span>
<span class="token keyword">const</span> door <span class="token operator">=</span> DoorFactory<span class="token punctuation">.</span><span class="token function">makeDoor</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Width:'</span><span class="token punctuation">,</span> door<span class="token punctuation">.</span><span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Height:'</span><span class="token punctuation">,</span> door<span class="token punctuation">.</span><span class="token function">getHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 制造一个 50x100 的门给我</span>
<span class="token keyword">const</span> door <span class="token operator">=</span> DoorFactory<span class="token punctuation">.</span><span class="token function">makeDoor</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>什么时候使用？</strong></p> <p>当创建对象不仅只有赋值操作，还会涉及到一些逻辑过程时，把它放到一个专用的工厂中（而不是在每个地方编写重复的代码）是很有意义的。</p> <h3 id="🏭-工厂方法模式-factory-method"><a href="#🏭-工厂方法模式-factory-method" class="header-anchor">#</a> 🏭 工厂方法模式 / Factory Method</h3> <p>现实生活中的例子</p> <blockquote><p>以招聘经理为例。一个人不可能面试所有的职位。根据职位空缺情况，招聘经理必须决定面试的步骤，并将面试委派给其他不同的面试官。</p></blockquote> <p>简单来说</p> <blockquote><p>工厂方法模式提供了一种将实例化的逻辑分派给子类的方法。</p></blockquote> <p>维基百科这样描述</p> <blockquote><p>在基于类的编程中，工厂方法模式是一种创建型模式，它使用工厂方法来处理创建对象的问题，而不必指定将要创建的对象所基于的具体类。这是通过调用工厂方法来创建对象所实现的——要么在接口中指定并由子类实现，要么在基类中实现并可选地由派生类覆盖——而不是通过调用构造函数实现。</p></blockquote> <p><strong>编程示例</strong></p> <p>以上面的招聘经理为例。首先，我们定义面试官的接口和它的一些实现</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * Interviewer interface
 *
 * askQuestions()
 */</span>

<span class="token keyword">class</span> <span class="token class-name">Developer</span> <span class="token punctuation">{</span>
    <span class="token function">askQuestions</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'提出设计模式问题！'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">CommunityExecutive</span> <span class="token punctuation">{</span>
    <span class="token function">askQuestions</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'提出社区建设问题！'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>接着，让我们编写 <code>HiringManager</code>（招聘经理）类</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">HiringManager</span> <span class="token punctuation">{</span>
    <span class="token function">takeInterview</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> interviewer <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">makeInterviewer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        interviewer<span class="token punctuation">.</span><span class="token function">askQuestions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>现在所有的子类都可以继承它并提供需要的面试官</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">DevelopmentManager</span> <span class="token keyword">extends</span> <span class="token class-name">HiringManager</span> <span class="token punctuation">{</span>
    <span class="token function">makeInterviewer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Developer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">MarketingManager</span> <span class="token keyword">extends</span> <span class="token class-name">HiringManager</span> <span class="token punctuation">{</span>
    <span class="token function">makeInterviewer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">CommunityExecutive</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>最后，我们可以这样使用它</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> devManager <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DevelopmentManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
devManager<span class="token punctuation">.</span><span class="token function">takeInterview</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出：提出设计模式问题！</span>

<span class="token keyword">const</span> marketingManager <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MarketingManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
marketingManager<span class="token punctuation">.</span><span class="token function">takeInterview</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出：提出社区建设问题！</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>什么时候使用？</strong></p> <p>当类中存在一些通用的处理过程，而所需的子类要在运行时动态决定时，工厂方法模式非常有用。换句话说，当客户端不知道它可能需要什么具体的子类时。</p> <h3 id="🔨-抽象工厂模式-abstract-factory"><a href="#🔨-抽象工厂模式-abstract-factory" class="header-anchor">#</a> 🔨 抽象工厂模式 / Abstract Factory</h3> <p>现实生活中的例子</p> <blockquote><p>现在让我们拓展简单工厂模式里门的例子。根据您的需要，您可能会从木门店买到木门，从铁门店买到铁门，或是从对应的商店买到塑料门。接着，您可能需要有着不同专业能力的师傅来安装这些门，比如让木匠安装木门，让焊工安装铁门等等。如前所述，现在门与安装师傅之间存在一种依赖关系，木门需要木匠，铁门需要焊工等等。</p></blockquote> <p>简单来说</p> <blockquote><p>工厂的工厂；一个工厂，它将独立但是相关（或互相依赖）的工厂组成一组，而不用指定这些工厂的具体类。</p></blockquote> <p>维基百科这样描述</p> <blockquote><p>抽象工厂模式提供了一种封装一组具有共同主题的独立工厂的方法，而不必指定它们的具体类。</p></blockquote> <p><strong>编程示例</strong></p> <p>根据上面门的例子。首先，我们定义了 <code>Door</code>（门）接口和它的一些实现</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * Door interface :
 *
 * getDescription()
 */</span>

<span class="token keyword">class</span> <span class="token class-name">WoodenDoor</span> <span class="token punctuation">{</span>
    <span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'我是一个木门'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">IronDoor</span> <span class="token punctuation">{</span>
    <span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'我是一个铁门'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>接着我们为每一种类型的门定义了安装师傅</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * DoorFittingExpert interface :
 *
 * getDescription()
 */</span>

<span class="token keyword">class</span> <span class="token class-name">Welder</span> <span class="token punctuation">{</span>
    <span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'我只能安装木门'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Carpenter</span> <span class="token punctuation">{</span>
    <span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'我只能安装铁门'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>现在我们有了抽象工厂，它允许我们创建一系列相关联的对象，即木门工厂能够制造木门并提供安装木门的师傅，而铁门工厂能够制造铁门并提供安装铁门的师傅。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * DoorFactory interface :
 *
 * makeDoor()
 * makeFittingExpert()
 */</span>

<span class="token comment">// 返回木匠和木门的木门工厂</span>
<span class="token keyword">class</span> <span class="token class-name">WoodenDoorFactory</span> <span class="token punctuation">{</span>
    <span class="token function">makeDoor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">WoodenDoor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">makeFittingExpert</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Carpenter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 获得铁门和相应安装师傅的铁门工厂</span>
<span class="token keyword">class</span> <span class="token class-name">IronDoorFactory</span> <span class="token punctuation">{</span>
    <span class="token function">makeDoor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">IronDoor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">makeFittingExpert</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Welder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><p>最后我们可以这样使用它</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>woodenFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WoodenDoorFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

door <span class="token operator">=</span> woodenFactory<span class="token punctuation">.</span><span class="token function">makeDoor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
expert <span class="token operator">=</span> woodenFactory<span class="token punctuation">.</span><span class="token function">makeFittingExpert</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

door<span class="token punctuation">.</span><span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出：我是一个木门</span>
expert<span class="token punctuation">.</span><span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出：我只能安装木门</span>

<span class="token comment">// 铁门工厂和上面一样</span>
ironFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IronDoorFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

door <span class="token operator">=</span> ironFactory<span class="token punctuation">.</span><span class="token function">makeDoor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
expert <span class="token operator">=</span> ironFactory<span class="token punctuation">.</span><span class="token function">makeFittingExpert</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

door<span class="token punctuation">.</span><span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出：我是一个铁门</span>
expert<span class="token punctuation">.</span><span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出：我只能安装铁门</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>正如您看到的，木门工厂已经封装了 <code>carpenter</code>（木匠）和 <code>wooden door</code>（木门），而铁门工厂已经封装了 <code>iron door</code>（铁门）和 <code>welder</code>（焊工）。因此，它确保了对于每一个制造出来的门，我们都能得到正确的安装师傅。</p> <p><strong>什么时候使用？</strong></p> <p>当对象之间存在相互依赖的关系，涉及的创建逻辑并不那么简单时。</p> <h3 id="👷-生成器模式-builder"><a href="#👷-生成器模式-builder" class="header-anchor">#</a> 👷 生成器模式 / Builder</h3> <p>译注：又名<strong>建造模式</strong>。</p> <p>现实生活中的例子</p> <blockquote><p>想象您在哈帝斯汉堡店里，点了一份“大哈迪汉堡”，接着店员就把汉堡递给你，<em>毫无疑问</em> 这是一个简单工厂的例子。但是在一些情况下，制作汉堡可能会包括额外的步骤逻辑。举个例子，您想要一份定制的汉堡，这里有很多选项：要什么面包片？喜欢哪款酱汁？想吃哪种奶酪？诸如此类。在这种情况下，就需要用到生成器模式了。</p></blockquote> <p>简单来说</p> <blockquote><p>生成器模式允许您创建不同风格的对象，同时避免污染构造函数。当一个对象可能存在多种风格时，或者当一个对象的创建过程包含很多步骤时，生成器模式非常有用。</p></blockquote> <p>维基百科这样描述</p> <blockquote><p>生成器模式是一种创建型软件设计模式，旨在找出重叠构造函数反面模式（Telescopic Constructor Anti-pattern）的一个解决方案。</p></blockquote> <p>既然已经提到，那么请允许我补充一下什么是重叠构造函数反面模式。在某一时刻我们都看到了这样一个构造函数：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Burger</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span>
        <span class="token parameter">size<span class="token punctuation">,</span>
        cheese <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        pepperoni <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        tomato <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        lettuce <span class="token operator">=</span> <span class="token boolean">true</span></span>
    <span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// ...</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>正如您所看见的，构造函数的参数数量很快就会失控，理解参数的含义也可能因此变得困难。此外，如果在以后您还想添加更多的构造选项，它的参数列表还会继续增长。这就被称作重叠构造函数反面模式。</p> <p><strong>编程示例</strong></p> <p>明智的选择是使用生成器模式。首先我们定义我们想要制作的汉堡</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Burger</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">builder</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>size <span class="token operator">=</span> builder<span class="token punctuation">.</span>size<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>cheeze <span class="token operator">=</span> builder<span class="token punctuation">.</span>cheeze <span class="token operator">||</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>pepperoni <span class="token operator">=</span> builder<span class="token punctuation">.</span>pepperoni <span class="token operator">||</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>lettuce <span class="token operator">=</span> builder<span class="token punctuation">.</span>lettuce <span class="token operator">||</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>tomato <span class="token operator">=</span> builder<span class="token punctuation">.</span>tomato <span class="token operator">||</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>接着我们编写了生成器</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">BurgerBuilder</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">size</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>size <span class="token operator">=</span> size<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">addPepperoni</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>pepperoni <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">addLettuce</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>lettuce <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">addCheeze</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>cheeze <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">addTomato</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>tomato <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Burger</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><p>最后可以这样使用它</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> burger <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BurgerBuilder</span><span class="token punctuation">(</span><span class="token number">14</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">addPepperoni</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">addLettuce</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">addTomato</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>JavaScript 版本特别提示</strong>：当您发现一个函数或方法的参数太多（一般超过 2 个参数都被认为是太多）时，应当使用一个对象参数，来取代多个参数。理由有二：</p> <ol><li>它可以让您的代码看上去更整洁，因为只有一个参数。</li> <li>您不需要担心参数的顺序，因为参数将根据对象的命名属性传递。</li></ol> <p>举个例子，应当使用：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> burger <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Burger</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">size</span><span class="token operator">:</span> <span class="token number">14</span><span class="token punctuation">,</span>
    <span class="token literal-property property">pepperoni</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">cheeze</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token literal-property property">lettuce</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">tomato</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>来取代：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> burger <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Burger</span><span class="token punctuation">(</span><span class="token number">14</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <div class="line-numbers-wrapper"></div></div><p><strong>什么时候使用？</strong></p> <p>当一个对象可能有多种风格，并想要避免重叠构造函数时。生成器模式与工厂模式的关键区别是，当创建对象过程只有一个步骤时，应使用工厂模式；当创建对象过程存在多个步骤时，应使用生成器模式。</p> <h3 id="🐑-原型模式-prototype"><a href="#🐑-原型模式-prototype" class="header-anchor">#</a> 🐑 原型模式 / Prototype</h3> <p>现实生活中的例子</p> <blockquote><p>还记得多莉吗？那只被克隆的羊！不谈羊的细节，这里全部的关键在于克隆。</p></blockquote> <p>简单来说</p> <blockquote><p>基于已存在的对象，通过克隆创建新的对象。</p></blockquote> <p>维基百科这样描述</p> <blockquote><p>在软件开发领域，原型模式是一种创建型设计模式。当创建的对象类型由一个原型实例确定时，使用原型模式，这个原型实例将被克隆来生成新的对象。</p></blockquote> <p>简而言之，原型模式允许您创建已存在对象的副本，并根据您的需要修改这个副本，而不用经历从头开始创建新的对象并配置整个对象的麻烦。</p> <p><strong>编程示例</strong></p> <p>首先我们定义了我们想要克隆的羊</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Sheep</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> category <span class="token operator">=</span> <span class="token string">'山羊'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>category <span class="token operator">=</span> category<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">setName</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">setCategory</span><span class="token punctuation">(</span><span class="token parameter">category</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>category <span class="token operator">=</span> category<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">getCategory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>category<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>现在我们有了 <code>SheepPrototype</code> 对象，它将克隆给定了原型的对象。它的构造函数接受 <code>Sheep</code> 对象</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">SheepPrototype</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">proto</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>proto <span class="token operator">=</span> proto<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Sheep</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>proto<span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>proto<span class="token punctuation">.</span>category<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>最后我们可以这样使用它</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> originalSheep <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sheep</span><span class="token punctuation">(</span><span class="token string">'Jolly'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
originalSheep<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Jolly</span>
originalSheep<span class="token punctuation">.</span><span class="token function">getCategory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 山羊</span>
<span class="token comment">// 克隆并根据需要修改</span>
<span class="token keyword">const</span> prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SheepPrototype</span><span class="token punctuation">(</span>originalSheep<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> clonedSheep <span class="token operator">=</span> prototype<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
clonedSheep<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">'Dolly'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
clonedSheep<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Dolly</span>
clonedSheep<span class="token punctuation">.</span><span class="token function">getCategory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 山羊</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>JavaScript 版本特别提示</strong>：此编程示例是原型模式的经典实现，但是 JavaScript 能够使用<a href="https://developer.mozilla.org/zh-CN/docs/Learn/JavaScript/Objects/Object_prototypes" target="_blank" rel="noopener noreferrer">内建原型工具<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>更有效地实现原型模式。</p> <p><strong>什么时候使用？</strong></p> <p>当需要的对象与现有的对象很相似时；或与克隆的方式相比，直接创建对象的成本更高时。</p> <h3 id="💍-单例模式-singleton"><a href="#💍-单例模式-singleton" class="header-anchor">#</a> 💍 单例模式 / Singleton</h3> <p>现实生活中的例子</p> <blockquote><p>一个国家里同时只能有一位总统。当职责需要时，这位总统就必须采取行动。这里的总统即是单例。</p></blockquote> <p>简单来说</p> <blockquote><p>确保只创建了特定类的唯一对象。</p></blockquote> <p>维基百科这样描述</p> <blockquote><p>在软件工程领域，单例模式是一种软件设计模式，它将类的实例化限制为一个对象。当只需要一个对象来协助整个系统的运行时，单例模式很有帮助。</p></blockquote> <p>实际上，单例模式被认为是一种反面模式（Anti-pattern），应当避免过度使用它。单例模式不一定总是不好的，也能够有一些有效的用例，但仍应当谨慎使用它，因为它会在您的应用中引入全局状态，在一个地方对它的修改可能会影响到其它地方，并且调试起来可能会变得非常困难。使用单例模式的另一个坏处是，它会使您的代码紧密耦合，此外模拟（Mock，译者注：在单元测试中，常用 Mock 的方法来模拟构造一些复杂或不容易获取的对象）单例可能会很困难。</p> <p><strong>编程示例</strong></p> <p>在 JavaScript 中，单例可以使用模块模式实现。私有变量和方法隐藏在函数闭包中，而公有方法有选择地暴露出去。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> president <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> presidentsPrivateInformation <span class="token operator">=</span> <span class="token string">'Super private'</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token string">'Turd Sandwich'</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> <span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> name<span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        getName<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>在这里，<code>presidentsPrivateInformation</code> 和 <code>name</code> 为私有变量。但是，<code>name</code> 可以通过对外暴露的 <code>president.getName</code> 方法访问到。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>president<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出：'Turd Sandwich'</span>
president<span class="token punctuation">.</span>name<span class="token punctuation">;</span> <span class="token comment">// 输出：undefined</span>
president<span class="token punctuation">.</span>presidentsPrivateInformation<span class="token punctuation">;</span> <span class="token comment">// 输出：undefined</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="🔩-结构型设计模式-structural-design-patterns"><a href="#🔩-结构型设计模式-structural-design-patterns" class="header-anchor">#</a> 🔩 结构型设计模式 / Structural Design Patterns</h2> <p>简单来说</p> <blockquote><p>结构型设计模式主要关注对象的组成，或者换句话说，关注实体之间如何相互使用。再或者另一种解释是，它有助于回答“如何构建软件的组件”这个问题。</p></blockquote> <p>维基百科这样描述</p> <blockquote><p>在软件工程领域，结构型设计模式是通过识别一个简单的方法，这个方法实现了实体之间的关系，来简化设计的设计模式。</p></blockquote> <h3 id="🔌-适配器模式-adapter"><a href="#🔌-适配器模式-adapter" class="header-anchor">#</a> 🔌 适配器模式 / Adapter</h3> <p>现实生活中的例子</p> <blockquote><p>您的存储卡里有一些图片，您想要将它们传输到您的电脑中。为了传输图片，您需要某种与电脑端口兼容的适配器，这样才能将存储卡连接到您的电脑。在这种情况下，读卡器就是一个适配器。
另一个例子是电源适配器，一个三脚插头无法插入到两脚插座中，它需要用到电源适配器使其与两脚插座兼容。
再举个例子，一位翻译者将一个人说的话翻译给另一个人（译注：这里的翻译者就是适配器）。</p></blockquote> <p>简单来说</p> <blockquote><p>适配器模式允许您将与其它不兼容的对象包装到一个适配器中，让这个对象与另一个类兼容。</p></blockquote> <p>维基百科这样描述</p> <blockquote><p>在软件工程领域，适配器模式是一种设计模式，它允许一个现有类的接口用作另一个接口。适配器模式常用于使现有的类与其它的类一起工作，而无需修改它们的源码。</p></blockquote> <p><strong>编程示例</strong></p> <p>考虑一个游戏，我们有一个猎人，他要狩猎狮子。</p> <p>首先我们定义了 <code>Lion</code>（狮子）接口，所有类型的狮子都需要实现这个接口</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * Lion interface :
 *
 * roar()
 */</span>

<span class="token keyword">class</span> <span class="token class-name">AfricanLion</span> <span class="token punctuation">{</span>
    <span class="token function">roar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">AsianLion</span> <span class="token punctuation">{</span>
    <span class="token function">roar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>而猎人需要 <code>Lion</code> 的某种实现来狩猎。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Hunter</span> <span class="token punctuation">{</span>
    <span class="token function">hunt</span><span class="token punctuation">(</span><span class="token parameter">lion</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// ... 前面的一些代码</span>
        lion<span class="token punctuation">.</span><span class="token function">roar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// ... 后面的一些代码</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>现在假设我们在我们的游戏里添加了一只 <code>WildDog</code>（野狗），猎人也可以狩猎它。但是我们无法直接添加野狗，因为它有着不同的接口。为了让它与我们的猎人兼容，我们必须创建一个适配器</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 需要添加到游戏中</span>
<span class="token keyword">class</span> <span class="token class-name">WildDog</span> <span class="token punctuation">{</span>
    <span class="token function">bark</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 与野狗相关的适配器，让它与我们的游戏兼容</span>
<span class="token keyword">class</span> <span class="token class-name">WildDogAdapter</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">dog</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>dog <span class="token operator">=</span> dog<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">roar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>dog<span class="token punctuation">.</span><span class="token function">bark</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>于是，通过 <code>WildDogAdapter</code>，在我们的游戏中就可以使用 <code>WildDog</code> 了。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>wildDog <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WildDog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
wildDogAdapter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WildDogAdapter</span><span class="token punctuation">(</span>wildDog<span class="token punctuation">)</span><span class="token punctuation">;</span>

hunter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Hunter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
hunter<span class="token punctuation">.</span><span class="token function">hunt</span><span class="token punctuation">(</span>wildDogAdapter<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="🚡-桥接模式-bridge"><a href="#🚡-桥接模式-bridge" class="header-anchor">#</a> 🚡 桥接模式 / Bridge</h3> <p>现实生活中的例子</p> <blockquote><p>您有一个包括很多页面的网站，现在您计划让用户修改网站的主题。您会怎么做？为每个页面的每个主题创建一份副本，或是创建单独的主题并根据用户的偏好加载它们？桥接模式允许您实现后者，如下图所示。</p></blockquote> <img src="/design-patterns-for-humans-zh/With-and-without-the-bridge-pattern.png" alt="不使用和使用桥接模式的区别"> <p>简单来说</p> <blockquote><p>桥接模式是偏好于使用组合的模式，而不是继承。实现的细节从一个模组层次推送给另一个具有单独模组层次的对象。</p></blockquote> <p>维基百科这样描述</p> <blockquote><p>桥接模式是一种用在软件工程领域的设计模式，旨在“将抽象与其实现解耦，使得两者可以独立改变”。</p></blockquote> <p><strong>编程示例</strong></p> <p>翻译一下刚刚关于我们网站的例子。现在我们定义了 <code>WebPage</code>（网站）的模组层次</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * Webpage interface :
 *
 * constructor(theme)
 * getContent()
 */</span>

<span class="token keyword">class</span> <span class="token class-name">About</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">theme</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>theme <span class="token operator">=</span> theme<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">'About page in '</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>theme<span class="token punctuation">.</span><span class="token function">getColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Careers</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">theme</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>theme <span class="token operator">=</span> theme<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">'Careers page in '</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>theme<span class="token punctuation">.</span><span class="token function">getColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><p>以及单独的主题模组层次</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * Theme interface :
 *
 * getColor()
 */</span>

<span class="token keyword">class</span> <span class="token class-name">DarkTheme</span> <span class="token punctuation">{</span>
    <span class="token function">getColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">'Dark Black'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">LightTheme</span> <span class="token punctuation">{</span>
    <span class="token function">getColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">'Off white'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">AquaTheme</span> <span class="token punctuation">{</span>
    <span class="token function">getColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">'Light blue'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>最后，结合使用两个主题模组层次</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> darkTheme <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DarkTheme</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> about <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">About</span><span class="token punctuation">(</span>darkTheme<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> careers <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Careers</span><span class="token punctuation">(</span>darkTheme<span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>about<span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;About page in Dark Black&quot;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>careers<span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;Careers page in Dark Black&quot;</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="🌿-组合模式-composite"><a href="#🌿-组合模式-composite" class="header-anchor">#</a> 🌿 组合模式 / Composite</h3> <p>现实生活中的例子</p> <blockquote><p>每个组织都由雇员组成。这些雇员具有一些共同点：有一定的薪水酬劳，担负某些任务职责，可能需要向某人汇报，可能拥有下属等等。</p></blockquote> <p>简单来说</p> <blockquote><p>组合模式使得客户端以统一的方式处理不同的对象。</p></blockquote> <p>维基百科这样描述</p> <blockquote><p>在软件工程领域，组合模式是一种分离设计模式。组合模式描述了一组对象的处理，与对一个对象的单个实例的处理相同。组合模式的目的是将对象“组合”进树结构中，来表示部分整体的层次结构。实现组合模式使得客户端使用统一的方式处理不同的对象和组合体。</p></blockquote> <p><strong>编程示例</strong></p> <p>以前面我们雇员的例子为例。现在我们有两种不同的雇员类型</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * Employee interface :
 *
 * constructor(name, salary)
 * getName()
 * setSalary()
 * getSalary()
 * getRoles()
 */</span>

<span class="token keyword">class</span> <span class="token class-name">Developer</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> salary</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>salary <span class="token operator">=</span> salary<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">setSalary</span><span class="token punctuation">(</span><span class="token parameter">salary</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>salary <span class="token operator">=</span> salary<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">getSalary</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>salary<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">getRoles</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>roles<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">develop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">/* */</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Designer</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> salary</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>salary <span class="token operator">=</span> salary<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">setSalary</span><span class="token punctuation">(</span><span class="token parameter">salary</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>salary <span class="token operator">=</span> salary<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">getSalary</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>salary<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">getRoles</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>roles<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">design</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">/* */</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br></div></div><p>接着我们定义了一个组织类，它包含这两种类型的雇员</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Organization</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>employees <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">addEmployee</span><span class="token punctuation">(</span><span class="token parameter">employee</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>employees<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>employee<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">getNetSalaries</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> netSalary <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

        <span class="token keyword">this</span><span class="token punctuation">.</span>employees<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">employee</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            netSalary <span class="token operator">+=</span> employee<span class="token punctuation">.</span><span class="token function">getSalary</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> netSalary<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>最后我们可以这样使用它</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 定义新的雇员</span>
<span class="token keyword">const</span> john <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Developer</span><span class="token punctuation">(</span><span class="token string">'John Doe'</span><span class="token punctuation">,</span> <span class="token number">12000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> jane <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Designer</span><span class="token punctuation">(</span><span class="token string">'Jane'</span><span class="token punctuation">,</span> <span class="token number">10000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 添加雇员到组织中</span>
<span class="token keyword">const</span> organization <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Organization</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
organization<span class="token punctuation">.</span><span class="token function">addEmployee</span><span class="token punctuation">(</span>john<span class="token punctuation">)</span><span class="token punctuation">;</span>
organization<span class="token punctuation">.</span><span class="token function">addEmployee</span><span class="token punctuation">(</span>jane<span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'薪金净额：'</span><span class="token punctuation">,</span> organization<span class="token punctuation">.</span><span class="token function">getNetSalaries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 薪金净额：22000</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="☕-装饰器模式-decorator"><a href="#☕-装饰器模式-decorator" class="header-anchor">#</a> ☕ 装饰器模式 / Decorator</h3> <p>现实生活中的例子</p> <blockquote><p>想象您经营了一家提供多种服务的汽修厂。那么您要如何计算应该收取的费用？您可以选择一种服务，然后将服务的价格动态地累计到账单上，直到您得到了最终的费用。在这个例子中，每一种类型的服务都是一个装饰器。</p></blockquote> <p>简单来说</p> <blockquote><p>装饰器模式允许您将对象放入一个装饰器类的对象中，动态地改变这个对象在运行时的行为。</p></blockquote> <p>维基百科这样描述</p> <blockquote><p>在面向对象编程中，装饰器模式是一种设计模式，它允许静态或动态地向单个对象中添加行为，而不会影响同一个类的其它对象的行为。装饰器模式通常有助于遵循单一责任原则，这是因为它允许在具有独特关注领域的类之间，划分出各自的功能。</p></blockquote> <p><strong>编程示例</strong></p> <p>不妨以咖啡为例。首先，我们编写了一个简单的咖啡类来实现咖啡接口</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * Coffee interface:
 * getCost()
 * getDescription()
 */</span>

<span class="token keyword">class</span> <span class="token class-name">SimpleCoffee</span> <span class="token punctuation">{</span>
    <span class="token function">getCost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">'普通咖啡'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>我们想要让代码具有可扩展性，当需要的时候可以对它进行修改。让我们来编写一些额外选项（装饰器）</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">MilkCoffee</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">coffee</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>coffee <span class="token operator">=</span> coffee<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">getCost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>coffee<span class="token punctuation">.</span><span class="token function">getCost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>coffee<span class="token punctuation">.</span><span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'，加奶'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">WhipCoffee</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">coffee</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>coffee <span class="token operator">=</span> coffee<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">getCost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>coffee<span class="token punctuation">.</span><span class="token function">getCost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>coffee<span class="token punctuation">.</span><span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'，加鲜奶油'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">VanillaCoffee</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">coffee</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>coffee <span class="token operator">=</span> coffee<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">getCost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>coffee<span class="token punctuation">.</span><span class="token function">getCost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>coffee<span class="token punctuation">.</span><span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'，加香草'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div><p>现在，来一杯咖啡吧</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> someCoffee<span class="token punctuation">;</span>

someCoffee <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>someCoffee<span class="token punctuation">.</span><span class="token function">getCost</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 10</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>someCoffee<span class="token punctuation">.</span><span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 普通咖啡</span>

someCoffee <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MilkCoffee</span><span class="token punctuation">(</span>someCoffee<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>someCoffee<span class="token punctuation">.</span><span class="token function">getCost</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 12</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>someCoffee<span class="token punctuation">.</span><span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 普通咖啡，加奶</span>

someCoffee <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WhipCoffee</span><span class="token punctuation">(</span>someCoffee<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>someCoffee<span class="token punctuation">.</span><span class="token function">getCost</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 17</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>someCoffee<span class="token punctuation">.</span><span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 普通咖啡，加奶，加鲜奶油</span>

someCoffee <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VanillaCoffee</span><span class="token punctuation">(</span>someCoffee<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>someCoffee<span class="token punctuation">.</span><span class="token function">getCost</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 20</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>someCoffee<span class="token punctuation">.</span><span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 普通咖啡，加奶，加鲜奶油，加香草</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="📦-门面模式-facade"><a href="#📦-门面模式-facade" class="header-anchor">#</a> 📦 门面模式 / Facade</h3> <p>译注：也常被译为<strong>外观模式</strong>。</p> <p>现实生活中的例子</p> <blockquote><p>您是如何启动电脑的？您会说：“按下电源按钮！”。之所以如此确信，是因为您正使用着电脑为外界提供的简单接口。而在电脑内部，它必须做很多事情来实现启动事件。复杂子系统的简单接口，就是我们所说的门面。</p></blockquote> <p>简单来说</p> <blockquote><p>门面模式为复杂的子系统提供了一个简化的接口。</p></blockquote> <p>维基百科这样描述</p> <blockquote><p>门面是一个对象，它为更大的代码主体提供了简化的接口，例如一个类库。</p></blockquote> <p><strong>编程示例</strong></p> <p>拿上面启动电脑的例子来说。首先我们编写了电脑类</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Computer</span> <span class="token punctuation">{</span>
    <span class="token function">getElectricShock</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Ouch!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">makeSound</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Beep beep!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">showLoadingScreen</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'加载中..'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">bam</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'准备就绪！'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">closeEverything</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Bup bup bup buzzzz!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">sooth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Zzzzz'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">pullCurrent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Haaah!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><p>接着我们编写了它的门面</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">ComputerFacade</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">computer</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>computer <span class="token operator">=</span> computer<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">turnOn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>computer<span class="token punctuation">.</span><span class="token function">getElectricShock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>computer<span class="token punctuation">.</span><span class="token function">makeSound</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>computer<span class="token punctuation">.</span><span class="token function">showLoadingScreen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>computer<span class="token punctuation">.</span><span class="token function">bam</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">turnOff</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>computer<span class="token punctuation">.</span><span class="token function">closeEverything</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>computer<span class="token punctuation">.</span><span class="token function">pullCurrent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>computer<span class="token punctuation">.</span><span class="token function">sooth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>最后就可以使用电脑的门面了</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> computer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ComputerFacade</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Computer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
computer<span class="token punctuation">.</span><span class="token function">turnOn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Ouch! Beep beep! 加载中.. 准备就绪！</span>
computer<span class="token punctuation">.</span><span class="token function">turnOff</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Bup bup buzzz! Haah! Zzzzz</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="🍃-享元模式-flyweight"><a href="#🍃-享元模式-flyweight" class="header-anchor">#</a> 🍃 享元模式 / Flyweight</h3> <p>现实生活中的例子</p> <blockquote><p>您喝过摊位上新鲜的茶吗？摊主通常会沏很多杯茶，一杯给您，然后将其它的留待给其他消费者，以达到节省资源（例如燃气）的目。享元模式就是关于这件事——共享。</p></blockquote> <p>简单来说</p> <blockquote><p>享元模式通过在相似对象间共享尽可能多的数据，来减少内存使用或计算开销。</p></blockquote> <p>维基百科这样描述</p> <blockquote><p>在计算机编程中，享元模式是一个软件设计模式。享元是一个对象，它与其它相似的对象共享尽可能多的数据，来减少内存开销。当简单的重复行为将占用不可接受数值的内存时，可以使用享元模式来表示大量级的对象。</p></blockquote> <p><strong>编程示例</strong></p> <p>翻译前边我们关于茶的例子。首先我们编写了茶和茶的制作类</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 所有将被缓存的数据即是享元</span>
<span class="token comment">// 这里茶的类型将成为享元</span>
<span class="token keyword">class</span> <span class="token class-name">KarakTea</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token comment">// 充当工厂，保存沏好的茶</span>
<span class="token keyword">class</span> <span class="token class-name">TeaMaker</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>availableTea <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">make</span><span class="token punctuation">(</span><span class="token parameter">preference</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>availableTea<span class="token punctuation">[</span>preference<span class="token punctuation">]</span> <span class="token operator">=</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>availableTea<span class="token punctuation">[</span>preference<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token keyword">new</span> <span class="token class-name">KarakTea</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>availableTea<span class="token punctuation">[</span>preference<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>接着我们编写了 <code>TeaShop</code>（茶店）类，它将处理点单和上茶事件</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">TeaShop</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">teaMaker</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>teaMaker <span class="token operator">=</span> teaMaker<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>orders <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">takeOrder</span><span class="token punctuation">(</span><span class="token parameter">teaType<span class="token punctuation">,</span> table</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>orders<span class="token punctuation">[</span>table<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>teaMaker<span class="token punctuation">.</span><span class="token function">make</span><span class="token punctuation">(</span>teaType<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">serve</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>orders<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">order<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'上茶给桌号 #'</span> <span class="token operator">+</span> index<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>最后我们可以像下面一样使用它</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> teaMaker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TeaMaker</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> shop <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TeaShop</span><span class="token punctuation">(</span>teaMaker<span class="token punctuation">)</span><span class="token punctuation">;</span>

shop<span class="token punctuation">.</span><span class="token function">takeOrder</span><span class="token punctuation">(</span><span class="token string">'少糖'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
shop<span class="token punctuation">.</span><span class="token function">takeOrder</span><span class="token punctuation">(</span><span class="token string">'多奶'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
shop<span class="token punctuation">.</span><span class="token function">takeOrder</span><span class="token punctuation">(</span><span class="token string">'无糖'</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

shop<span class="token punctuation">.</span><span class="token function">serve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 上茶给桌号 #1</span>
<span class="token comment">// 上茶给桌号 #2</span>
<span class="token comment">// 上茶给桌号 #5</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="🎱-代理模式-proxy"><a href="#🎱-代理模式-proxy" class="header-anchor">#</a> 🎱 代理模式 / Proxy</h3> <p>现实生活中的例子</p> <blockquote><p>您曾刷卡来通过门禁吗？有很多方法可以通过门禁，刷卡或是按下跳过安保的按钮。门是拿来被打开的，但这里添加了一层代理到门禁上，为它增添了一些安保功能。让我通过下面的代码示例更好地解释它。</p></blockquote> <p>简单来说</p> <blockquote><p>使用代理模式，类能够行驶另一个类的功能。</p></blockquote> <p>维基百科这样描述</p> <blockquote><p>在其最一般的形式，代理是一个类，作为其它类的接口发挥功能。代理是被客户端调用的封装或中介对象，用于访问系统背后真正提供服务的对象。使用代理可以直接地指向真正的对象，或者可以提供额外的逻辑。在代理模式下，可以添加附加的功能，例如，当对真正对象的操作会消耗大量资源时进行缓存，或是在调用真正对象的操作之前检查前置条件。</p></blockquote> <p><strong>编程示例</strong></p> <p>以上面我们的门禁为例。首先，我们编写了门的接口和它的实现</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * Door interface :
 *
 * open()
 * close()
 */</span>

<span class="token keyword">class</span> <span class="token class-name">LabDoor</span> <span class="token punctuation">{</span>
    <span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'打开实验室门'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'关闭实验室门'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>接着我们编写了代理，它可以确保门的安全</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Security</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">door</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>door <span class="token operator">=</span> door<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">open</span><span class="token punctuation">(</span><span class="token parameter">password</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">authenticate</span><span class="token punctuation">(</span>password<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>door<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'奥不！密码错误。'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token function">authenticate</span><span class="token punctuation">(</span><span class="token parameter">password</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> password <span class="token operator">===</span> <span class="token string">'ecr@t'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>door<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>最后这是使用门禁的方法</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> door <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Security</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">LabDoor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
door<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'invalid'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 奥不！密码错误。</span>

door<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'ecr@t'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 打开实验室门</span>
door<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 关闭实验室门</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="🤹-行为型设计模式-behavioral-design-patterns"><a href="#🤹-行为型设计模式-behavioral-design-patterns" class="header-anchor">#</a> 🤹 行为型设计模式 / Behavioral Design Patterns</h2> <p>简单来说</p> <blockquote><p>行为型设计模式主要关注对象之间责任的分配。与结构型设计模式不同的是，它们不仅指定了对象的结构，还概述了对象之间消息传递（通信）的模式。换句话说，它们有助于回答了“如何在软件组件中执行行为？”这个问题。</p></blockquote> <p>维基百科这样描述</p> <blockquote><p>在软件工程领域，行为型设计模式是识别并实现对象之间的常见通信模式的设计模式。如此一来，这些模式使得通信变得更加灵活。</p></blockquote> <h3 id="🔗-责任链模式-chain-of-responsibility"><a href="#🔗-责任链模式-chain-of-responsibility" class="header-anchor">#</a> 🔗 责任链模式 / Chain of Responsibility</h3> <p>现实生活中的例子</p> <blockquote><p>举个例子，在您的账户中，您设置了三种支付方式（<code>A</code>, <code>B</code> 和 <code>C</code>），其中存放了不同数量的钱。<code>A</code> 账户中有 100 美元，<code>B</code> 中有 300 美元，而 <code>C</code> 中有 1000 美元，按照 <code>A</code>，<code>B</code> 最后是 <code>C</code> 的顺序偏好进行支付操作。您尝试购买某个价值 210 美元的东西。使用责任链模式，首先，检查 <code>A</code> 账户是否能购买，如果可以，将进行支付操作然后中止链。如果不足以购买，请求将传递给 <code>B</code> 账户，检查是否能购买，同样如果可以，将链中止；如果不可以，请求将继续传递直到它找到合适的处理者。在这里，<code>A</code>，<code>B</code> 和 <code>C</code> 是链上的不同环节，而这整个模式就是责任链。</p></blockquote> <p>简单来说</p> <blockquote><p>责任链模式有助于构建一条对象链。请求从链的一端进入，从对象到另一个对象依次传递，直到它找到合适的处理者。</p></blockquote> <p>维基百科这样描述</p> <blockquote><p>在面向对象设计中，责任链模式是由一些命令对象和一系列处理对象组成的设计模式。每个处理对象都包含了它可以处理的命令对象类型的逻辑，其余的将传递给链中的下一个处理对象。</p></blockquote> <p><strong>编程示例</strong></p> <p>翻译一下刚刚我们账户的例子。首先，我们编写了账户基类，它包括将多个账户链接起来的逻辑。继承账户基类，我们编写了具体账户类</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Account</span> <span class="token punctuation">{</span>
    <span class="token function">setNext</span><span class="token punctuation">(</span><span class="token parameter">account</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>successor <span class="token operator">=</span> account<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">pay</span><span class="token punctuation">(</span><span class="token parameter">amountToPay</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">canPay</span><span class="token punctuation">(</span>amountToPay<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">使用 </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> 支付 </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>amountToPay<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">！</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>successor<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">无法使用 </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> 支付。继续中...</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>successor<span class="token punctuation">.</span><span class="token function">pay</span><span class="token punctuation">(</span>amountToPay<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'没有账户额度足够'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token function">canPay</span><span class="token punctuation">(</span><span class="token parameter">amount</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>balance <span class="token operator">&gt;=</span> amount<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Bank</span> <span class="token keyword">extends</span> <span class="token class-name">Account</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">balance</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'银行'</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>balance <span class="token operator">=</span> balance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Paypal</span> <span class="token keyword">extends</span> <span class="token class-name">Account</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">balance</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'贝宝'</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>balance <span class="token operator">=</span> balance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Bitcoin</span> <span class="token keyword">extends</span> <span class="token class-name">Account</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">balance</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'比特币'</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>balance <span class="token operator">=</span> balance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br></div></div><p>现在，让我们使用上面定义的具体账户类（即银行，贝宝，比特币），构成我们的责任链</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 让我们像下面这样构成责任链</span>
<span class="token comment">//      银行.贝宝.比特币</span>
<span class="token comment">//</span>
<span class="token comment">// 银行优先支付</span>
<span class="token comment">//      如果银行不足以支付，则使用贝宝</span>
<span class="token comment">//      如果贝宝不足以支付，则使用比特币</span>

<span class="token keyword">const</span> bank <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bank</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 银行额度为 100</span>
<span class="token keyword">const</span> paypal <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Paypal</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 贝宝额度为 200</span>
<span class="token keyword">const</span> bitcoin <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bitcoin</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 比特币额度为 300</span>

bank<span class="token punctuation">.</span><span class="token function">setNext</span><span class="token punctuation">(</span>paypal<span class="token punctuation">)</span><span class="token punctuation">;</span>
paypal<span class="token punctuation">.</span><span class="token function">setNext</span><span class="token punctuation">(</span>bitcoin<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 让我们尝试使用银行优先支付</span>
bank<span class="token punctuation">.</span><span class="token function">pay</span><span class="token punctuation">(</span><span class="token number">259</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 输出如下</span>
<span class="token comment">// ==============</span>
<span class="token comment">// 无法使用 银行 支付。继续中...</span>
<span class="token comment">// 无法使用 贝宝 支付。继续中...</span>
<span class="token comment">// 使用 比特币 支付 259！</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h3 id="👮-命令模式-command"><a href="#👮-命令模式-command" class="header-anchor">#</a> 👮 命令模式 / Command</h3> <p>现实生活中的例子</p> <blockquote><p>举一个常见的例子，您在餐厅点单。您（<code>Client</code> 客户端）告诉服务员（<code>Invoker</code> 调用者）您想要这些菜肴（<code>Command</code> 命令），于是服务员简单地将这些需求转发给厨师（<code>Receiver</code> 接收者），他们知道这些菜肴是什么以及该如何烹制。
另一个例子是您（<code>Client</code>）使用遥控器（<code>Invoker</code>），切换（<code>Command</code>）电视（<code>Receiver</code>）正在播放的频道。</p></blockquote> <p>简单来说</p> <blockquote><p>命令模式允许您将操作封装到对象中。命令模式背后的核心思想是，提供将客户端与接收者解耦的方法。</p></blockquote> <p>维基百科这样描述</p> <blockquote><p>在面向对象编程中，命令模式是一种行为型设计模式，它将执行操作或稍后触发事件所需的全部信息封装到一个对象中。信息包括方法名，拥有此方法的对象和此方法参数的值。</p></blockquote> <p><strong>编程示例</strong></p> <p>首先，我们定义了接收者，它实现了可能会执行的每个方法</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// Receiver</span>
<span class="token keyword">class</span> <span class="token class-name">Bulb</span> <span class="token punctuation">{</span>
    <span class="token function">turnOn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'点亮了灯泡！'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">turnOff</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'黑暗！'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>我们已经有了每个命令都需要实现的接口，基于这个接口，我们定义了一组命令</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * Command interface
 *
 * execute()
 * undo()
 * redo()
 */</span>

<span class="token comment">// Command</span>
<span class="token keyword">class</span> <span class="token class-name">TurnOnCommand</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">bulb</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>bulb <span class="token operator">=</span> bulb<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>bulb<span class="token punctuation">.</span><span class="token function">turnOn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">undo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>bulb<span class="token punctuation">.</span><span class="token function">turnOff</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">redo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">TurnOffCommand</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">bulb</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>bulb <span class="token operator">=</span> bulb<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>bulb<span class="token punctuation">.</span><span class="token function">turnOff</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">undo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>bulb<span class="token punctuation">.</span><span class="token function">turnOn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">redo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br></div></div><p>之后，我们定义了 <code>Invoker</code>，由它来处理客户端的交互命令</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// Invoker</span>
<span class="token keyword">class</span> <span class="token class-name">RemoteControl</span> <span class="token punctuation">{</span>
    <span class="token function">submit</span><span class="token punctuation">(</span><span class="token parameter">command</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        command<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>最后，让我们来看看该如何通过客户端调用它</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> bulb <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bulb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> turnOn <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TurnOnCommand</span><span class="token punctuation">(</span>bulb<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> turnOff <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TurnOffCommand</span><span class="token punctuation">(</span>bulb<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> remote <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RemoteControl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
remote<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span>turnOn<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 点亮了灯泡！</span>
remote<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span>turnOff<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 黑暗！</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>命令模式也可以用来实现基于事务的系统。您执行的命令将保存在历史记录中。如果成功执行了最后的命令，一切都好；如果没有，则可以根据历史记录不断回滚，对所有已执行的命令进行 <code>undo</code>（撤销）操作。</p> <h3 id="➿-迭代器模式-iterator"><a href="#➿-迭代器模式-iterator" class="header-anchor">#</a> ➿ 迭代器模式 / Iterator</h3> <p>现实生活中的例子</p> <blockquote><p>旧式收音机是解释迭代器模式的好例子，用户可以从某个广播频道开始，使用向后或向前的按钮来遍历收听各个广播频道。或者以 MP3 音乐播放器或电视为例，您可以按下向后或向前的按钮来浏览连续的频道。换句话说，它们都提供了使用迭代器遍历各个频道，音乐或广播的接口。</p></blockquote> <p>简单来说</p> <blockquote><p>迭代器模式提供了访问对象的所有元素的方法，而不必暴露对象的底层表现形式（译者注：列表、栈和树等）。</p></blockquote> <p>维基百科这样描述</p> <blockquote><p>在面向对象编程中，迭代器模式是一种使用迭代器遍历容器并访问其所有元素的设计模式。迭代器模式可以将算法与容器解耦；但在某些情况下，算法是必然特定于容器的，因而无法解耦。</p></blockquote> <p><strong>编程示例</strong></p> <p>翻译一下我们上面广播电台的例子。首先我们定义了 <code>RadioStation</code>（广播电台）类。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">RadioStation</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">frequency</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>frequency <span class="token operator">=</span> frequency<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">getFrequency</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>frequency<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>接着我们定义了迭代器</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">StationList</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>stations <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">addStation</span><span class="token punctuation">(</span><span class="token parameter">station</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>stations<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>station<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">removeStation</span><span class="token punctuation">(</span><span class="token parameter">toRemove</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> toRemoveFrequency <span class="token operator">=</span> toRemove<span class="token punctuation">.</span><span class="token function">getFrequency</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>stations <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>stations<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">station</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> station<span class="token punctuation">.</span><span class="token function">getFrequency</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!==</span> toRemoveFrequency<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>现在我们可以这样使用它</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> stationList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StationList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

stationList<span class="token punctuation">.</span><span class="token function">addStation</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">RadioStation</span><span class="token punctuation">(</span><span class="token number">89</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
stationList<span class="token punctuation">.</span><span class="token function">addStation</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">RadioStation</span><span class="token punctuation">(</span><span class="token number">101</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
stationList<span class="token punctuation">.</span><span class="token function">addStation</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">RadioStation</span><span class="token punctuation">(</span><span class="token number">102</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
stationList<span class="token punctuation">.</span><span class="token function">addStation</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">RadioStation</span><span class="token punctuation">(</span><span class="token number">103.2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

stationList<span class="token punctuation">.</span>stations<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">station</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>station<span class="token punctuation">.</span><span class="token function">getFrequency</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

stationList<span class="token punctuation">.</span><span class="token function">removeStation</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">RadioStation</span><span class="token punctuation">(</span><span class="token number">89</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 将移除 89 频道的广播电台</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="👽-中介者模式-mediator"><a href="#👽-中介者模式-mediator" class="header-anchor">#</a> 👽 中介者模式 / Mediator</h3> <p>现实生活中的例子</p> <blockquote><p>一个常见的例子是，当您正使用您的手机跟其他人聊天时，中间存在有一个网络提供商，您发出的消息将通过这个网络提供商送达，而非直接发送。在这种情况下，网络提供商充当了中介者的身份。</p></blockquote> <p>简单来说</p> <blockquote><p>中介者模式在两个对象（称作“同事类”）之间添加了一个第三方对象（称作“中介者”），进而控制这两个对象之间的交互。中介者模式有助于降低类之间通信交流的耦合度。因为现在，它们不再需要了解对方的实现细节。</p></blockquote> <p>维基百科这样描述</p> <blockquote><p>在软件工程领域，中介者模式定义了一个对象，该对象封装了一组对象之间交互的方式。中介者模式被认为是一种行为型设计模式，因为它可以改变程序运行时的行为。</p></blockquote> <p><strong>编程示例</strong></p> <p>下面是聊天室的最简单示例，其中有若干互相发送消息的用户</p> <p>首先我们定义了中介者：聊天室</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// Mediator</span>
<span class="token keyword">class</span> <span class="token class-name">ChatRoom</span> <span class="token punctuation">{</span>
    <span class="token function">showMessage</span><span class="token punctuation">(</span><span class="token parameter">user<span class="token punctuation">,</span> message</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> time <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> sender <span class="token operator">=</span> user<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>time <span class="token operator">+</span> <span class="token string">'['</span> <span class="token operator">+</span> sender <span class="token operator">+</span> <span class="token string">']:'</span> <span class="token operator">+</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>接着我们定义了同事类：用户</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> chatMediator</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>chatMediator <span class="token operator">=</span> chatMediator<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">send</span><span class="token punctuation">(</span><span class="token parameter">message</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>chatMediator<span class="token punctuation">.</span><span class="token function">showMessage</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>就可以像这样使用了</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> mediator <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ChatRoom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> john <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">'John Doe'</span><span class="token punctuation">,</span> mediator<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> jane <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">'Jane Doe'</span><span class="token punctuation">,</span> mediator<span class="token punctuation">)</span><span class="token punctuation">;</span>

john<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'你好！'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
jane<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'你好哇！'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 输出如下</span>
<span class="token comment">// Feb 14, 10:58 [John]: 你好！</span>
<span class="token comment">// Feb 14, 10:58 [Jane]: 你好哇！</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="💾-备忘录模式-memento"><a href="#💾-备忘录模式-memento" class="header-anchor">#</a> 💾 备忘录模式 / Memento</h3> <p>现实生活中的例子</p> <blockquote><p>以计算器（即“原发器”）为例，每当您执行了某些计算操作时，最后一次计算的结果都会被保存到内存（即“备忘录”）中，这样您就可以通过按下某些操作按钮（即“负责人”）来查看，或者如果可能的话，恢复它。</p></blockquote> <p>简单来说</p> <blockquote><p>备忘录模式通过某种方式捕获并保存对象的当前状态，以便在之后可以使用轻松的方式恢复。</p></blockquote> <p>维基百科这样描述</p> <blockquote><p>备忘录模式是一种提供了恢复对象到以前状态（通过回滚来撤销）的能力的软件设计模式。</p></blockquote> <p>通常在您需要提供某种撤销功能时十分有用。</p> <p><strong>编程示例</strong></p> <p>以本文编辑器为例，它不时地保存当前的状态，当您想要时则可以恢复</p> <p>首先我们定义了备忘录对象，它能够保存编辑器的状态</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">EditorMemento</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">content</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>_content <span class="token operator">=</span> content<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_content<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>接着我们定义了编辑器对象，即原发器，它将会使用到备忘录对象</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Editor</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>_content <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">type</span><span class="token punctuation">(</span><span class="token parameter">words</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>_content <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_content <span class="token operator">+</span> words<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_content<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">EditorMemento</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>_content<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">restore</span><span class="token punctuation">(</span><span class="token parameter">memento</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>_content <span class="token operator">=</span> memento<span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>最后可以这样使用它</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> editor <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Editor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 输入一些文本</span>
editor<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token string">'日月忽其不淹兮，'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
editor<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token string">'春与秋其代序。'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 保存当前用于恢复的状态：日月忽其不淹兮，春与秋其代序。</span>
<span class="token keyword">const</span> saved <span class="token operator">=</span> editor<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 再输入一些文本</span>
editor<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token string">'惟草木之零落兮，恐美人之迟暮。'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 不保存，输出当前内容</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>editor<span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 日月忽其不淹兮，春与秋其代序。惟草木之零落兮，恐美人之迟暮。</span>

<span class="token comment">// 恢复到上次保存的状态</span>
editor<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span>saved<span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>editor<span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 日月忽其不淹兮，春与秋其代序。</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h3 id="😎-观察者模式-observer"><a href="#😎-观察者模式-observer" class="header-anchor">#</a> 😎 观察者模式 / Observer</h3> <p>（也被称为 <em>“发布-订阅模式”</em> ）</p> <p>现实生活中的例子</p> <blockquote><p>求职者就是很好的例子，他们会订阅一些职位发布网站，当存在匹配的工作机会时会通知他们。</p></blockquote> <p>简单来说</p> <blockquote><p>观察者模式定义了对象之间的依赖关系，每当一个对象改变它的状态时，它的所有依赖对象将会得到通知。</p></blockquote> <p>维基百科这样描述</p> <blockquote><p>观察者模式是一种软件设计模式，一个目标对象管理所有依赖于它的观察者对象，并在它状态发生改变时主动通知观察者对象，这通常是通过调用观察者对象的某个方法来实现的。</p></blockquote> <p><strong>编程示例</strong></p> <p>翻译前面我们的例子。首先，我们定义了求职者类，当有新的职位发布时，他们将得到通知</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">JobPost</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">title</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">title</span><span class="token operator">:</span> title<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">JobSeeker</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>_name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">notify</span><span class="token punctuation">(</span><span class="token parameter">jobPost</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>_name<span class="token punctuation">,</span> <span class="token string">' 接收了一个新职位的通知：'</span><span class="token punctuation">,</span> jobPost<span class="token punctuation">.</span>title<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>接着，我们定义了职位发布公告栏，供求职者订阅</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">JobBoard</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>_subscribers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token parameter">jobSeeker</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>_subscribers<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>jobSeeker<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">addJob</span><span class="token punctuation">(</span><span class="token parameter">jobPosting</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>_subscribers<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">subscriber</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            subscriber<span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span>jobPosting<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>现在，可以这样使用它</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 创建订阅者</span>
<span class="token keyword">const</span> johnDoe <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JobSeeker</span><span class="token punctuation">(</span><span class="token string">'John Doe'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> janeDoe <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JobSeeker</span><span class="token punctuation">(</span><span class="token string">'Jane Doe'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> kaneDoe <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JobSeeker</span><span class="token punctuation">(</span><span class="token string">'Kane Doe'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 创建发布者，并绑定订阅者</span>
<span class="token keyword">const</span> jobBoard <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JobBoard</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
jobBoard<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span>johnDoe<span class="token punctuation">)</span><span class="token punctuation">;</span>
jobBoard<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span>janeDoe<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 添加一份新的职位，看看订阅者是否收到通知</span>
jobBoard<span class="token punctuation">.</span><span class="token function">addJob</span><span class="token punctuation">(</span><span class="token function">JobPost</span><span class="token punctuation">(</span><span class="token string">'软件工程师'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 输出如下</span>
<span class="token comment">// John Doe 接收了一个新职位的通知：软件工程师</span>
<span class="token comment">// Jane Doe 接收了一个新职位的通知：软件工程师</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="🏃-访问者模式-visitor"><a href="#🏃-访问者模式-visitor" class="header-anchor">#</a> 🏃 访问者模式 / Visitor</h3> <p>现实生活中的例子</p> <blockquote><p>以去杜拜旅游为例，人们只需要通过签证便可进入杜拜。抵达之后，他们可以自行参观杜拜的所有地方，而不必征得更多许可。只需要知道地点，他们就可以访问参观了。访问者模式允许您像这样做，添加一些访问者可以自由访问的地点，而无需访问者做额外的跑腿工作。</p></blockquote> <p>简单来说</p> <blockquote><p>访问者模式允许您为对象添加进一步的操作，而无需修改它们。</p></blockquote> <p>维基百科这样描述</p> <blockquote><p>在面向对象编程和软件工程领域，访问者模式是一种将算法，从执行它的对象的结构中分离出来的方式模式。这种分离带来的实际效果是，提供了向已存在对象的结构中添加新的操作方法，而无需修改这些对象的结构的能力。它是一种遵循开闭原则（Open–closed principle）的方法。</p></blockquote> <p><strong>编程示例</strong></p> <p>让我们模拟一个动物园作为例子，这里有几种不同的动物，它们会发出不同的叫声。现在使用访问者模式翻译为代码语言</p> <p>我们已经实现了动物类</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Monkey</span> <span class="token punctuation">{</span>
    <span class="token function">shout</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Ooh oo aa aa!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">accept</span><span class="token punctuation">(</span><span class="token parameter">operation</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        operation<span class="token punctuation">.</span><span class="token function">visitMonkey</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Lion</span> <span class="token punctuation">{</span>
    <span class="token function">roar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Roaaar!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">accept</span><span class="token punctuation">(</span><span class="token parameter">operation</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        operation<span class="token punctuation">.</span><span class="token function">visitLion</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Dolphin</span> <span class="token punctuation">{</span>
    <span class="token function">speak</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Tuut tuttu tuutt!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">accept</span><span class="token punctuation">(</span><span class="token parameter">operation</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        operation<span class="token punctuation">.</span><span class="token function">visitDolphin</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><p>接着，实现我们的访问者</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> speak <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function">visitMonkey</span><span class="token punctuation">(</span><span class="token parameter">monkey</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        monkey<span class="token punctuation">.</span><span class="token function">shout</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">visitLion</span><span class="token punctuation">(</span><span class="token parameter">lion</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        lion<span class="token punctuation">.</span><span class="token function">roar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">visitDolphin</span><span class="token punctuation">(</span><span class="token parameter">dolphin</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        dolphin<span class="token punctuation">.</span><span class="token function">speak</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>它可以这样使用</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> monkey <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Monkey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> lion <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Lion</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> dolphin <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dolphin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

monkey<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>speak<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Ooh oo aa aa!</span>
lion<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>speak<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Roaaar!</span>
dolphin<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>speak<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Tuut tutt tuutt!</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>我们可以简单地为动物类添加可继承的层次结构来让动物发出叫声，但接下来当我们需要为动物添加新的行为时，不得不去修改动物类本身。但现在，我们不再需要修改动物类。举个例子，如果我们需要为动物添加跳跃行为，我们可以简单地创建一个新的访问者来实现，如下所示</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> jump <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function">visitMonkey</span><span class="token punctuation">(</span><span class="token parameter">monkey</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'跳了 20 英尺高！跳到了树上去！'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">visitLion</span><span class="token punctuation">(</span><span class="token parameter">lion</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'跳了 7 英尺高！回到了地上！'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">visitDolphin</span><span class="token punctuation">(</span><span class="token parameter">dolphin</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'探出了水面一点随后消失了'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>像这样使用它</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>monkey<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>speak<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Ooh oo aa aa!</span>
monkey<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>jump<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 跳了 20 英尺高！跳到了树上去！</span>

lion<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>speak<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Roaaar!</span>
lion<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>jump<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 跳了 7 英尺高！回到了地上！</span>

dolphin<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>speak<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Tuut tutt tuutt!</span>
dolphin<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>jump<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 探出了水面一点随后消失了</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="💡-策略模式-strategy"><a href="#💡-策略模式-strategy" class="header-anchor">#</a> 💡 策略模式 / Strategy</h3> <p>现实生活中的例子</p> <blockquote><p>考虑排序的例子，我们实现了冒泡排序，但随着数据量的增长，冒泡排序变得非常慢。为了解决这个问题，我们又实现了快速排序。但是，尽管快速排序算法在处理较大数据集时表现得很好，在处理较小数据集时它却表现较差。为此，我们定义了一种策略，当处理较小数据集时，采用冒泡排序算法；处理较大数据集时，采用快速排序算法。</p></blockquote> <p>简单来说</p> <blockquote><p>策略模式允许您根据实际情况切换使用的算法或策略。</p></blockquote> <p>维基百科这样描述</p> <blockquote><p>在计算机编程中，策略模式（Strategy pattern，也被称为 Policy pattern）是一种允许在运行时选择算法行为的行为型设计模式。</p></blockquote> <p><strong>编程示例</strong></p> <p>翻译上面我们的例子，通过 JavaScript 的<a href="https://developer.mozilla.org/zh-CN/docs/Glossary/First-class_Function" target="_blank" rel="noopener noreferrer">头等函数<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>特性，我们可以轻松实现这两种策略</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">bubbleSort</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">dataset</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'使用冒泡排序'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// ...</span>
    <span class="token comment">// ...</span>
    <span class="token keyword">return</span> dataset<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">quickSort</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">dataset</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'使用快速排序'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// ...</span>
    <span class="token comment">// ...</span>
    <span class="token keyword">return</span> dataset<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>接着我们定义了客户端，它将决定使用何种策略</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">sorter</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">dataset</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>dataset<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> quickSort<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> bubbleSort<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>最后，可以这样使用它</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> longDataSet <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> shortDataSet <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> sorter1 <span class="token operator">=</span> <span class="token function">sorter</span><span class="token punctuation">(</span>longDataSet<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> sorter2 <span class="token operator">=</span> <span class="token function">sorter</span><span class="token punctuation">(</span>shortDataSet<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">sorter1</span><span class="token punctuation">(</span>longDataSet<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Output : 使用快速排序</span>
<span class="token function">sorter2</span><span class="token punctuation">(</span>shortDataSet<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Output : 使用冒泡排序</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="💢-状态模式-state"><a href="#💢-状态模式-state" class="header-anchor">#</a> 💢 状态模式 / State</h3> <p>现实生活中的例子</p> <blockquote><p>想象您正在使用某种绘画应用，您选择了一种画笔来画图。现在，画笔将根据您选择的颜色来改变它的行为：如果您选择了红色，那么将以红色画图，如果选择了蓝色则以蓝色画图。</p></blockquote> <p>简单来说</p> <blockquote><p>状态模式允许您在状态变化时，改变类的行为。</p></blockquote> <p>维基百科这样描述</p> <blockquote><p>状态模式是一种以面向对象的形式，实现状态机的行为型设计模式。在状态模式中，通过将每个单独的状态实现为状态模式接口的派生类，并通过调用此模式超类定义的方法实现状态转换，最终实现了状态机。
状态模式可以看作能够通过调用此模式的接口所定义的方法，来改变当前策略的策略模式。</p></blockquote> <p><strong>编程示例</strong></p> <p>以文本编辑器为例，它允许您改变输入文本的状态：如果您选择了加粗，就开始输入加粗的文本，如果选择了斜体则输入斜体的文本等等</p> <p>首先我们编写了改变输入文本状态的方法</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">upperCase</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">inputString</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> inputString<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">lowerCase</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">inputString</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> inputString<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">defaultTransform</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">inputString</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> inputString<span class="token punctuation">;</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>接着我们编写了文本编辑器类</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">TextEditor</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">transform</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>_transform <span class="token operator">=</span> transform<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">setTransform</span><span class="token punctuation">(</span><span class="token parameter">transform</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>_transform <span class="token operator">=</span> transform<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">type</span><span class="token punctuation">(</span><span class="token parameter">words</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_transform</span><span class="token punctuation">(</span>words<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>最后可以像这样使用它</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> editor <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TextEditor</span><span class="token punctuation">(</span>defaultTransform<span class="token punctuation">)</span><span class="token punctuation">;</span>

editor<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token string">'First line'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

editor<span class="token punctuation">.</span><span class="token function">setTransform</span><span class="token punctuation">(</span>upperCase<span class="token punctuation">)</span><span class="token punctuation">;</span>

editor<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token string">'Second line'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
editor<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token string">'Third line'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

editor<span class="token punctuation">.</span><span class="token function">setTransform</span><span class="token punctuation">(</span>lowerCase<span class="token punctuation">)</span><span class="token punctuation">;</span>

editor<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token string">'Fourth line'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
editor<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token string">'Fifth line'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 输出：</span>
<span class="token comment">// First line</span>
<span class="token comment">// SECOND LINE</span>
<span class="token comment">// THIRD LINE</span>
<span class="token comment">// fourth line</span>
<span class="token comment">// fifth line</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="📒-模板方法模式-template-method"><a href="#📒-模板方法模式-template-method" class="header-anchor">#</a> 📒 模板方法模式 / Template Method</h3> <p>现实生活中的例子</p> <blockquote><p>假设我们打算盖一些房子。建房子的步骤可能像这样</p> <ul><li>打地基</li> <li>筑墙壁</li> <li>盖屋顶</li> <li>加楼层</li></ul> <p>上述步骤的先后顺序不能被改变：在筑好墙壁之前您没法盖屋顶。但您可以修改任意步骤内部的实现细节，例如可以使用木头、聚酯纤维或石头来筑建墙壁。</p></blockquote> <p>简单来说</p> <blockquote><p>模板方法模式定义了如何执行某些算法的框架，但将这些步骤的具体实现推迟到了子类。</p></blockquote> <p>维基百科这样描述</p> <blockquote><p>在软件工程领域，模板方法模式是一种行为型设计模式。模板方法是超类中的方法，通常是抽象超类，它根据大量的高级步骤来定义操作的框架。这些步骤本身由与模板方法中相同的类中附加的帮助类方法实现。</p></blockquote> <p><strong>编程示例</strong></p> <p>想象我们在编写一个工具，它能帮助我们测试代码，检查代码格式，构建应用，生成构建报告（即代码覆盖率，代码格式检查结果等）以及将我们的应用部署到测试服务器上</p> <p>首先我们编写了基类，它指定了构建算法的框架</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Builder</span> <span class="token punctuation">{</span>
    <span class="token comment">// 模板方法</span>
    <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">lint</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">assemble</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">deploy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>现在我们编写了它的具体实现</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">AndroidBuilder</span> <span class="token keyword">extends</span> <span class="token class-name">Builder</span> <span class="token punctuation">{</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'执行安卓代码测试'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">lint</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'检查安卓代码格式'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">assemble</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'启动安卓应用构建'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">deploy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'部署安卓应用到服务器'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">IosBuilder</span> <span class="token keyword">extends</span> <span class="token class-name">Builder</span> <span class="token punctuation">{</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'执行 IOS 代码测试'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">lint</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'检查 IOS 代码格式'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">assemble</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'启动 IOS 应用构建'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">deploy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'部署 IOS 应用到服务器'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><p>最后可以这样使用它</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> androidBuilder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AndroidBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
androidBuilder<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 输出：</span>
<span class="token comment">// 执行安卓代码测试</span>
<span class="token comment">// 检查安卓代码格式</span>
<span class="token comment">// 启动安卓应用构建</span>
<span class="token comment">// 部署安卓应用到服务器</span>

<span class="token keyword">const</span> iosBuilder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IosBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
iosBuilder<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 输出：</span>
<span class="token comment">// 执行 IOS 代码测试</span>
<span class="token comment">// 检查 IOS 代码格式</span>
<span class="token comment">// 启动 IOS 应用构建</span>
<span class="token comment">// 部署 IOS 应用到服务器</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h2 id="🚦-尾声-wrap-up-folks"><a href="#🚦-尾声-wrap-up-folks" class="header-anchor">#</a> 🚦 尾声 / Wrap Up Folks</h2> <p>到这里教程的正文内容就结束了。我会持续改进这篇教程，也许您以后想要重新访问这个仓库来查看最新的内容，不妨点一个关注以及星标。对了，我计划撰写同样风格的软件体系架构教程，希望您继续关注。</p> <h2 id="👬-参与贡献-contribution"><a href="#👬-参与贡献-contribution" class="header-anchor">#</a> 👬 参与贡献 / Contribution</h2> <ul><li>反馈问题</li> <li>拉取请求，改进文档</li> <li>分享此仓库</li></ul> <h2 id="🔑-项目许可-license"><a href="#🔑-项目许可-license" class="header-anchor">#</a> 🔑 项目许可 / License</h2> <p>MIT © <a href="https://github.com/LolipopJ" target="_blank" rel="noopener noreferrer">LolipopJ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>本项目基于 <a href="https://github.com/kamranahmedse/design-patterns-for-humans" target="_blank" rel="noopener noreferrer">Design Patterns for Humans<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，案例的 JavaScript 代码来自 <a href="https://github.com/sohamkamani/javascript-design-patterns-for-humans" target="_blank" rel="noopener noreferrer">JavaScript Design Patterns for Humans<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/LolipopJ/design-patterns-for-humans-zh/edit/main/vuepress/docs/README.md" target="_blank" rel="noopener noreferrer">帮助改善本教程的翻译！</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">上次更新：:</span> <span class="time">3/8/2022, 4:51:53 AM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/design-patterns-for-humans-zh/assets/js/app.686ebddc.js" defer></script><script src="/design-patterns-for-humans-zh/assets/js/2.852dfa87.js" defer></script><script src="/design-patterns-for-humans-zh/assets/js/7.07076d3a.js" defer></script>
  </body>
</html>
